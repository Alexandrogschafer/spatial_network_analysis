
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. ROTEAMENTO EM REDES ESPACIAIS: CÁLCULO E ANÁLISE DE CAMINHOS OTIMIZADOS &#8212; Análise Espacial de Redes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'capitulo4';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Capítulo 5 - Mapeamento de isócronas para análise de acessibilidade espacial" href="capitulo5.html" />
    <link rel="prev" title="3. MÉTRICAS E INDICADORES DE REDES" href="capitulo3.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Análise Espacial de Redes - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="Análise Espacial de Redes - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="capitulo1.html">1. INTRODUÇÃO A GRAFOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="capitulo2.html">2. INTRODUÇÃO AO USO DO OSMnx PARA ANÁLISE DE REDES ESPACIAIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="capitulo3.html">3. MÉTRICAS E INDICADORES DE REDES</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4. ROTEAMENTO EM REDES ESPACIAIS: CÁLCULO E ANÁLISE DE CAMINHOS OTIMIZADOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="capitulo5.html">Capítulo 5 - Mapeamento de isócronas para análise de acessibilidade espacial</a></li>

<li class="toctree-l1"><a class="reference internal" href="referencias.html">Bibliografia básica</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Alexandrogschafer/spatial_network_analysis" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Alexandrogschafer/spatial_network_analysis/issues/new?title=Issue%20on%20page%20%2Fcapitulo4.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/capitulo4.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>4. ROTEAMENTO EM REDES ESPACIAIS: CÁLCULO E ANÁLISE DE CAMINHOS OTIMIZADOS</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#algoritmos-de-roteamento">4.1 Algoritmos de Roteamento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-na-biblioteca-osmnx">4.2 Cálculo de roteamento na biblioteca OSMnx**</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#obtencao-e-analise-preliminar-da-rede-viaria">4.3 Obtenção e análise preliminar da rede viária</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roteamento-basico-por-distancia">4.4 Roteamento básico por distância</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definicao-dos-pontos-para-o-roteamento">4.4.1 Definição dos pontos para o roteamento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#determinacao-do-caminho-minimo">4.4.2 Determinação do caminho mínimo</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roteamento-considerando-velocidade-e-tempo-de-viagem">4.5 Roteamento considerando velocidade e tempo de viagem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exemplo"><strong>Exemplo</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-a-partir-de-nos-do-grafo-da-rede-viaria">4.6 Cálculo de roteamento a partir de nós do grafo da rede viária</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-a-partir-de-pontos-de-interesse">4.7 Calculo de roteamento a partir de pontos de interesse</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="roteamento-em-redes-espaciais-calculo-e-analise-de-caminhos-otimizados">
<h1>4. ROTEAMENTO EM REDES ESPACIAIS: CÁLCULO E ANÁLISE DE CAMINHOS OTIMIZADOS<a class="headerlink" href="#roteamento-em-redes-espaciais-calculo-e-analise-de-caminhos-otimizados" title="Link to this heading">#</a></h1>
<p><strong>Roteamento</strong> é o processo de determinar o melhor caminho ou sequência de caminhos entre dois ou mais pontos dentro de uma rede espacial, desempenhando um papel essencial em redes viárias. Ele otimiza deslocamentos para pedestres, ciclistas, veículos e transporte público, com base em critérios como menor distância, menor tempo de viagem ou menor custo operacional.</p>
<p>Esse processo utiliza algoritmos matemáticos que analisam e calculam caminhos com base em pesos atribuídos às arestas da rede, representando fatores como distância, tempo ou custo monetário. Entre os algoritmos mais comuns estão o <strong>algoritmo de Dijkstra</strong>, que calcula o caminho mais curto em redes ponderadas; o <strong>algoritmo A</strong>*, que utiliza heurísticas para acelerar a busca; e o <strong>algoritmo de Bellman-Ford</strong>, capaz de lidar com pesos negativos nas arestas.</p>
<p>O roteamento possui aplicações práticas diversas. Na <strong>logística e transporte</strong>, é usado para planejar caminhos eficientes, reduzindo custos e tempos de operação. No <strong>planejamento urbano</strong>, contribui para avaliar e melhorar a infraestrutura de mobilidade. Também é essencial na <strong>análise de acessibilidade</strong>, identificando regiões com melhores ou piores acessos a serviços, e na <strong>navegação em mapas digitais</strong>, sendo a base de aplicativos como Google Maps e Waze.</p>
<p>Por meio dessas ferramentas, o roteamento se torna indispensável para a gestão de redes espaciais, melhorando a eficiência dos sistemas de transporte e a qualidade de vida nas cidades.</p>
<p>A <strong>análise de tempos de viagem</strong> é uma abordagem que examina os tempos necessários para percorrer caminhos em uma rede, considerando fatores como velocidades médias, condições de tráfego e topografia. Essa análise é fundamental para avaliar a acessibilidade urbana e planejar sistemas de transporte mais eficientes, promovendo mobilidade mais ágil para pessoas e maior eficiência logística para bens.</p>
<p>A velocidade média, um dos principais componentes dessa análise, é definida com base no tipo de via, nos limites de velocidade impostos pela legislação ou em dados empíricos obtidos por medições reais. No caso de modos de transporte como bicicleta ou transporte público, considera-se também a interação com a infraestrutura urbana. Além disso, as condições de tráfego influenciam diretamente os tempos de viagem. Congestionamentos, semáforos, obras em vias e eventos inesperados, como acidentes, podem gerar variações significativas, especialmente quando analisadas ao longo do dia.</p>
<p>Os diferentes modos de transporte também apresentam características específicas que impactam os tempos de deslocamento. Veículos motorizados, por exemplo, dependem das condições viárias e do fluxo de tráfego, enquanto pedestres e ciclistas enfrentam desafios relacionados à distância e à topografia. No transporte público, fatores como o tempo de espera nas paradas e a frequência dos serviços desempenham um papel importante.</p>
<p>Ao integrar esses fatores, a análise de tempos de viagem identifica gargalos e oferece subsídios para otimizar os deslocamentos, contribuindo para o desenvolvimento de sistemas de transporte mais acessíveis, eficientes e sustentáveis.</p>
<section id="algoritmos-de-roteamento">
<h2>4.1 Algoritmos de Roteamento<a class="headerlink" href="#algoritmos-de-roteamento" title="Link to this heading">#</a></h2>
<p>Os <strong>algoritmos de roteamento</strong> são métodos computacionais usados para encontrar o melhor caminho entre dois ou mais pontos em uma rede. Esses algoritmos consideram os <strong>pesos</strong> atribuídos às arestas da rede (como distância, tempo de viagem, custo, ou outros fatores) para determinar o trajeto mais eficiente de acordo com critérios específicos.</p>
<p>Abaixo estão os principais algoritmos de roteamento utilizados, com explicação de seus funcionamentos e aplicações:</p>
<p><strong>Algoritmo de Dijkstra</strong></p>
<p>O <strong>algoritmo de Dijkstra</strong> é amplamente utilizado para encontrar o caminho mais curto em redes ponderadas, desde que todos os pesos das arestas sejam não negativos.
Ele trabalha atribuindo custos cumulativos aos nós de uma rede, representando o custo mínimo necessário para alcançar cada nó a partir de um ponto inicial.
O processo inicia atribuindo custo zero ao nó de partida e infinito a todos os outros nós.
A partir daí, seleciona-se o nó não visitado com o menor custo acumulado, calculando o custo para alcançar os nós vizinhos através dele.
Se o custo calculado for menor que o registrado previamente para um vizinho, o valor é atualizado e o nó atual é registrado como parte do caminho mais curto.
O nó visitado é então marcado, e o processo se repete para o próximo nó com menor custo acumulado, até que todos os nós tenham sido visitados ou o nó de destino tenha sido alcançado.</p>
<p>O algoritmo é simples e eficiente para redes com pesos positivos, garantindo sempre a identificação do caminho mais curto.
No entanto, apresenta limitações em redes muito grandes, podendo ser ineficiente se não otimizado com estruturas como filas de prioridade, e não pode lidar com pesos negativos, pois pressupõe que os custos registrados para cada nó são definitivos após sua marcação.
Entre suas principais aplicações estão o planejamento de rotas urbanas, como em sistemas de navegação e GPS, onde é utilizado para calcular a menor distância ou o menor tempo de deslocamento.
Também é amplamente empregado em redes de computadores para determinar caminhos otimizadas em protocolos de roteamento, além de ser útil no planejamento de infraestrutura de transporte, logística e até em jogos e simulações.</p>
<p><strong>Algoritmo A</strong>*</p>
<p>O <strong>algoritmo A</strong>* (A-star) é uma extensão do algoritmo de Dijkstra que utiliza uma <strong>função heurística</strong> para guiar a busca de forma mais eficiente, priorizando os caminhos mais promissores.
Essa abordagem reduz o número de nós explorados e, em muitos casos, torna o algoritmo significativamente mais rápido, especialmente em redes grandes ou aplicações em tempo real.</p>
<p>O funcionamento do A* baseia-se no cálculo de uma função de custo total para cada nó, definida como <span class="math notranslate nohighlight">\(f(n) = g(n) + h(n)\)</span>, onde <span class="math notranslate nohighlight">\(g(n)\)</span> representa o custo acumulado do caminho percorrido até o nó atual e <span class="math notranslate nohighlight">\(h(n)\)</span> é uma estimativa heurística do custo restante para alcançar o destino. A heurística, em geral, baseia-se em uma métrica como a distância euclidiana ou a distância Manhattan, dependendo do problema. Durante a execução, o algoritmo prioriza explorar os nós com menor custo total estimado <span class="math notranslate nohighlight">\((f(n))\)</span>, garantindo uma busca direcionada e eficiente.</p>
<p>O A* oferece diversas vantagens, como a capacidade de reduzir significativamente o número de nós analisados em comparação com o Dijkstra puro, o que o torna mais rápido e ideal para aplicações que exigem respostas em tempo real, como sistemas de navegação GPS, jogos que envolvem movimentação de personagens ou planejamento de trajetórias em robótica. Contudo, a eficiência do algoritmo depende diretamente da qualidade da heurística utilizada. Uma heurística não informada ou mal calibrada pode levar o A* a se comportar de forma semelhante ao Dijkstra, perdendo sua vantagem em termos de rapidez.</p>
<p>Apesar dessa limitação, o A* é amplamente utilizado devido à sua capacidade de equilibrar a busca exata do caminho mais curto com a eficiência computacional, sendo uma escolha padrão em muitos sistemas modernos que exigem planejamento de rotas ou trajetórias em redes complexas.</p>
<p><strong>Algoritmo Bellman-Ford</strong></p>
<p>O <strong>algoritmo Bellman-Ford</strong> é uma solução clássica para encontrar o caminho mais curto em redes que podem conter arestas com <strong>pesos negativos</strong>, o que o torna mais versátil que o Dijkstra em certos cenários. Sua capacidade de lidar com pesos negativos é essencial em aplicações onde os custos de transição entre estados podem incluir perdas ou ganhos.</p>
<p>O funcionamento do Bellman-Ford inicia com a atribuição de custos infinitos a todos os nós da rede, exceto o nó de partida, que recebe custo zero. Em seguida, o algoritmo realiza o processo de <strong>relaxamento das arestas</strong>: para cada aresta, verifica se o custo acumulado para o nó de destino pode ser reduzido ao passar pelo nó de origem e, se isso ocorrer, atualiza o custo. Esse processo é repetido para cada aresta da rede, por por <span class="math notranslate nohighlight">\(V-1\)</span> iterações (<span class="math notranslate nohighlight">\(V\)</span>) é o número de nós). Após essas iterações, os caminhos mínimos são garantidos. Uma etapa adicional verifica a existência de ciclos negativos na rede, onde o custo pode ser continuamente reduzido, indicando inconsistências ou problemas na modelagem.</p>
<p>Entre suas vantagens, destaca-se a capacidade de lidar com pesos negativos e a detecção de ciclos negativos, tornando-o útil em aplicações como <strong>redes financeiras</strong>, onde os pesos podem representar ganhos ou perdas. Contudo, o Bellman-Ford é menos eficiente em termos de tempo quando comparado ao Dijkstra ou ao A*, especialmente em redes grandes, já que sua complexidade temporal é <span class="math notranslate nohighlight">\(O(V \cdot E)\)</span>, onde <span class="math notranslate nohighlight">\(E\)</span> é o número de arestas.</p>
<p><strong>Algoritmo Floyd-Warshall</strong></p>
<p>O <strong>algoritmo Floyd-Warshall</strong> é uma solução eficiente para calcular os caminhos mais curtos <strong>entre todos os pares de nós</strong> em uma rede. Ele é amplamente utilizado em cenários onde é necessário conhecer o custo mínimo para deslocar-se entre quaisquer dois pontos da rede, o que o torna útil para análises de acessibilidade e estudos que envolvem múltiplas consultas.</p>
<p>O funcionamento do algoritmo começa com a criação de uma matriz que representa os custos iniciais entre os nós, baseando-se nos pesos das arestas. Se não há conexão direta entre dois nós, o custo inicial é definido como infinito. O algoritmo então percorre iterativamente cada nó como um possível ponto intermediário, atualizando os valores da matriz sempre que encontra um caminho mais curto ao passar por esse nó. Esse processo continua até que todos os nós tenham sido considerados como intermediários, garantindo que a matriz final contenha os menores custos possíveis entre todos os pares de nós.</p>
<p>Entre as vantagens do Floyd-Warshall, destaca-se sua capacidade de fornecer resultados para todas as combinações de pares de nós em uma única execução, eliminando a necessidade de calcular caminhos individuais repetidamente. Além disso, sua lógica é direta, tornando-o relativamente simples de implementar.</p>
<p>Por outro lado, o algoritmo é computacionalmente caro para redes grandes, com complexidade <span class="math notranslate nohighlight">\(O(n^3)\)</span>, onde <span class="math notranslate nohighlight">\(n\)</span> é o número de nós. Isso o torna mais adequado para redes pequenas ou médias, onde sua eficiência computacional não é comprometida.</p>
<p>As aplicações do Floyd-Warshall incluem estudos de <strong>acessibilidade</strong>, como determinar as menores distâncias entre pontos de interesse em uma cidade, e análises de redes em <strong>sistemas de transporte</strong> ou <strong>logística</strong>, onde é necessário otimizar caminhos entre múltiplos destinos. Além disso, ele é utilizado em contextos como <strong>análises de conectividade em redes sociais</strong> e sistemas de comunicação, permitindo a avaliação de distâncias ou latências entre diferentes nós de uma rede complexa.</p>
<p><strong>Algoritmo Johnson</strong></p>
<p>O <strong>algoritmo Johnson</strong> é uma abordagem híbrida que combina as técnicas dos algoritmos <strong>Bellman-Ford</strong> e <strong>Dijkstra</strong> para calcular os caminhos mais curtos <strong>entre todos os pares de nós</strong> em redes, especialmente aquelas grandes e esparsas. Esse algoritmo é eficaz porque utiliza a reponderação das arestas para garantir que todos os pesos sejam positivos, permitindo o uso do algoritmo de Dijkstra, que não funciona corretamente com pesos negativos.</p>
<p>O funcionamento do algoritmo começa aplicando o <strong>Bellman-Ford</strong> em um nó adicional que é conectado a todos os outros nós da rede, criando uma rede modificada com pesos positivos. O Bellman-Ford ajusta os pesos das arestas para garantir que não existam valores negativos, permitindo que o algoritmo Dijkstra seja aplicado sem problemas. Depois, o <strong>Dijkstra</strong> é executado a partir de cada nó da rede para calcular os caminhos mais curtos, agora com os pesos ajustados. O algoritmo é eficiente para redes grandes, pois a reponderação facilita a aplicação do Dijkstra para múltiplos nós.</p>
<p>Entre as vantagens do algoritmo Johnson, destaca-se sua <strong>eficiência</strong> em redes esparsas, ou seja, redes com um número relativamente pequeno de arestas em comparação com o número de nós. Em comparação com o algoritmo Floyd-Warshall, que tem uma complexidade de <span class="math notranslate nohighlight">\(O(n^3)\)</span>, o Johnson é mais eficiente em redes grandes, especialmente se a rede for esparsa, já que a complexidade do Johnson é <span class="math notranslate nohighlight">\(O(V^2 \log V + VE)\)</span>, onde <span class="math notranslate nohighlight">\(V\)</span> é o número de nós e <span class="math notranslate nohighlight">\(E\)</span> o número de arestas.</p>
<p>Porém, o Johnson é mais <strong>complexo de implementar</strong>, já que envolve tanto a execução do Bellman-Ford quanto o Dijkstra para cada nó, além da necessidade de ajustar os pesos das arestas.</p>
<p>As aplicações do algoritmo incluem <strong>redes de transporte</strong>, onde a reponderação dos pesos das arestas pode representar, por exemplo, o ajuste de distâncias ou tempos de viagem com base em variáveis como tráfego ou outros fatores. Também é utilizado em problemas de <strong>logística</strong> e <strong>planejamento urbano</strong>, onde é necessário calcular múltiplos caminhos curtos em redes grandes e dinâmicas.</p>
<p>A tabela a seguir apresenta uma comparação entre os principais algoritmos de roteamento, destacando suas características, limitações e aplicações ideais.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Algoritmo</p></th>
<th class="head"><p>Tipo de Rede</p></th>
<th class="head"><p>Suporta Pesos Negativos</p></th>
<th class="head"><p>Velocidade</p></th>
<th class="head"><p>Melhor Aplicação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Dijkstra</p></td>
<td><p>Ponderada</p></td>
<td><p>Não</p></td>
<td><p>Rápido para redes pequenas/médias</p></td>
<td><p>Menor distância ou tempo em redes positivas</p></td>
</tr>
<tr class="row-odd"><td><p>A*</p></td>
<td><p>Ponderada</p></td>
<td><p>Não</p></td>
<td><p>Muito rápido (com boa heurística)</p></td>
<td><p>GPS e jogos</p></td>
</tr>
<tr class="row-even"><td><p>Bellman-Ford</p></td>
<td><p>Ponderada</p></td>
<td><p>Sim</p></td>
<td><p>Lento</p></td>
<td><p>Redes com pesos negativos</p></td>
</tr>
<tr class="row-odd"><td><p>Floyd-Warshall</p></td>
<td><p>Completa</p></td>
<td><p>Sim</p></td>
<td><p>Muito lento</p></td>
<td><p>Análise de acessibilidade (todos os pares)</p></td>
</tr>
<tr class="row-even"><td><p>Johnson</p></td>
<td><p>Ponderada</p></td>
<td><p>Sim</p></td>
<td><p>Moderadamente rápido</p></td>
<td><p>Redes grandes e esparsas</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="calculo-de-roteamento-na-biblioteca-osmnx">
<h2>4.2 Cálculo de roteamento na biblioteca OSMnx**<a class="headerlink" href="#calculo-de-roteamento-na-biblioteca-osmnx" title="Link to this heading">#</a></h2>
<p>No OSMnx, o cálculo de roteamento utiliza algoritmos clássicos, como <strong>Dijkstra</strong> e <strong>A</strong>*, para determinar o caminho mais curto entre dois pontos na rede. Os caminhos podem ser otimizados com base em diferentes critérios, como:</p>
<ul class="simple">
<li><p><strong>Distância total</strong>: Minimiza o comprimento das ruas percorridas.</p></li>
<li><p><strong>Tempo de viagem</strong>: Calculado a partir de velocidades médias atribuídas às arestas.</p></li>
<li><p><strong>Custos personalizados</strong>: Permite usar pesos específicos, como custos financeiros ou penalidades para certos tipos de vias.</p></li>
</ul>
<p>Os dados do OpenStreetMap são convertidos em um grafo direcionado e ponderado, no qual os pesos das arestas podem incluir atributos como comprimento, tipo de superfície, velocidade permitida ou restrições específicas.</p>
<p><strong>Passos para Cálculo de Roteamento</strong></p>
<p><strong>Construção do grafo</strong>:</p>
<ul class="simple">
<li><p>O grafo viário é extraído da área de interesse com o comando <code class="docutils literal notranslate"><span class="pre">osmnx.graph_from_place()</span></code> ou funções similares, que permitem delimitar a rede viária por localizações específicas, como cidades ou bairros.</p></li>
</ul>
<p><strong>Atribuição de pesos às arestas</strong>:</p>
<ul class="simple">
<li><p>Por padrão, o OSMnx utiliza o comprimento das ruas como peso. Contudo, é possível incluir atributos adicionais, como tempos de viagem, ajustando os pesos com base em dados externos (ex.: velocidades médias ou condições de tráfego).</p></li>
</ul>
<p><strong>Cálculo do caminho mais curto</strong>:</p>
<ul class="simple">
<li><p>Usando funções como <code class="docutils literal notranslate"><span class="pre">osmnx.shortest_path()</span></code>, o usuário pode determinar o caminho mais curto entre dois nós da rede. Algoritmos como Dijkstra e A* são aplicados dependendo da configuração.</p></li>
</ul>
<p><strong>Visualização e análise</strong>:</p>
<ul class="simple">
<li><p>Após o cálculo, o OSMnx permite visualizar o caminho encontrado diretamente no mapa e exportar os resultados para análises adicionais.</p></li>
</ul>
<p><strong>Personalização do Roteamento</strong></p>
<p>A biblioteca permite personalizar os pesos das arestas para atender a diferentes necessidades. Por exemplo, ao calcular caminhos para pedestres, é possível evitar vias não acessíveis a pé, enquanto para ciclistas podem ser priorizadas ciclovias. Além disso, é possível integrar dados externos, como velocidades médias reais ou condições de tráfego, para tornar os cálculos mais precisos.</p>
<p><strong>Aplicações do Roteamento com OSMnx</strong></p>
<ul class="simple">
<li><p>Planejamento de caminhos personalizados para pedestres, ciclistas e motoristas.</p></li>
<li><p>Análises de acessibilidade para serviços essenciais, como hospitais e escolas.</p></li>
<li><p>Estudos de impacto de infraestrutura viária em mobilidade urbana.</p></li>
<li><p>Simulação e otimização de trajetos em estudos logísticos.</p></li>
</ul>
</section>
<section id="obtencao-e-analise-preliminar-da-rede-viaria">
<h2>4.3 Obtenção e análise preliminar da rede viária<a class="headerlink" href="#obtencao-e-analise-preliminar-da-rede-viaria" title="Link to this heading">#</a></h2>
<p>Inicialmente, vamos instalar as bibliotecas necessárias para trabalhar com o <strong>OSMnx</strong> e com outras ferramentas utilizadas para análise de redes e visualização.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># !pip install osmnx</span>
<span class="c1"># !pip install shapely</span>
<span class="c1"># !pip install mapclassify</span>
</pre></div>
</div>
</div>
</div>
<p>Em seguida, importamos as bibliotecas necessárias para análise e visualização de redes. Além disso, configuramos o OSMnx para utilizar cache e exibir logs no console.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="kn">import</span> <span class="n">Line2D</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">mapping</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="c1"># Configuração do OSMnx</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="n">ox</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">use_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">log_console</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Utilize o <strong>OSMnx</strong> para baixar a rede viária de um local específico, neste caso, o bairro da Liberdade em São Paulo. Você pode especificar o tipo de rede desejada (por exemplo, “drive” para veículos motorizados).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bairro</span> <span class="o">=</span> <span class="s2">&quot;Liberdade, São Paulo, Brasil&quot;</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="n">bairro</span><span class="p">,</span> <span class="n">network_type</span><span class="o">=</span><span class="s1">&#39;drive&#39;</span><span class="p">)</span>

<span class="c1"># Plotar a rede</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/0e7747918ecfa74f2de7d6134c470d867ab7dd6caa4bbe2070867a552d388697.png" src="_images/0e7747918ecfa74f2de7d6134c470d867ab7dd6caa4bbe2070867a552d388697.png" />
</div>
</div>
<p>Agora vamos verificar se temos vias de mão única no grafo do bairro da Liberdade.</p>
<p>Neste passo, configuramos as cores das arestas com base no atributo “oneway” (mão única).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configurar as cores das arestas com base no atributo &#39;mão única&#39;</span>
<span class="n">cores_arestas</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span> <span class="k">if</span> <span class="n">dados</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;oneway&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;blue&quot;</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">dados</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>

<span class="c1"># Plotar o grafo</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span>
    <span class="n">G</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="n">cores_arestas</span><span class="p">,</span>
    <span class="n">edge_linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Adicionar o título</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Vias de Mão Única (vermelho) e de Mão Dupla (azul)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7868b63fac0d490ba380e3372b2c86763d6530a19ee5c49239699374b55ca6aa.png" src="_images/7868b63fac0d490ba380e3372b2c86763d6530a19ee5c49239699374b55ca6aa.png" />
</div>
</div>
</section>
<section id="roteamento-basico-por-distancia">
<h2>4.4 Roteamento básico por distância<a class="headerlink" href="#roteamento-basico-por-distancia" title="Link to this heading">#</a></h2>
<p>Após obter o grafo, vamos a um exemplo de cálculo de roteamento. Neste exemplo, queremos identificar o caminho de menor distância, ou caminho mínimo, entre dois pontos.</p>
<section id="definicao-dos-pontos-para-o-roteamento">
<h3>4.4.1 Definição dos pontos para o roteamento<a class="headerlink" href="#definicao-dos-pontos-para-o-roteamento" title="Link to this heading">#</a></h3>
<p>Existem várias maneiras de definir os pontos inicial e final (e intermediários, se for o caso) para calcular um caminho. Aqui estão algumas das principais abordagens:</p>
<p>a) Usando IDs de Nós Conhecidos</p>
<p>Se você conhece os IDs dos nós do grafo, pode utilizá-los diretamente:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">no_origem</span> <span class="o">=</span> <span class="mi">123456</span>
<span class="n">no_destino</span> <span class="o">=</span> <span class="mi">789101</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>b) Encontrando Nós Próximos com Coordenadas Geográficas</p>
<p>Você pode usar coordenadas geográficas para encontrar os nós mais próximos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ponto_origem</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6372</span><span class="p">,</span> <span class="o">-</span><span class="mf">23.5505</span><span class="p">)</span>
<span class="n">ponto_destino</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.635</span><span class="p">,</span> <span class="o">-</span><span class="mf">23.5503</span><span class="p">)</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>c) Convertendo Endereços em Coordenadas</p>
<p>Com o geocodificador integrado do OSMnx:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">coordenadas_origem</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="s2">&quot;Avenida Paulista, São Paulo, Brazil&quot;</span><span class="p">)</span>
<span class="n">coordenadas_destino</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="s2">&quot;Praça da Sé, São Paulo, Brazil&quot;</span><span class="p">)</span>
<span class="n">no_origem</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">coordenadas_origem</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordenadas_origem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">no_destino</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">coordenadas_destino</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordenadas_destino</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>No OSMnx, ao informar um endereço usando o método <code class="docutils literal notranslate"><span class="pre">ox.geocode()</span></code>, o resultado depende da precisão dos dados no serviço de geocodificação utilizado (por padrão, o Nominatim do OpenStreetMap). O geocodificador tentará localizar o endereço com base nas informações fornecidas, mas:</p>
<p><strong>Se o número da casa estiver registrado no banco de dados do OpenStreetMap</strong>, ele poderá retornar as coordenadas exatas do endereço.</p>
<p><strong>Caso contrário</strong>, ele retornará uma localização aproximada, geralmente no ponto médio da rua correspondente ou próximo ao local mais relevante com base nas informações fornecidas.</p>
<p>Portanto, se o número da casa não estiver registrado no OSM, você receberá apenas uma aproximação.</p>
<p>Para precisão melhor:</p>
<ul class="simple">
<li><p>Use serviços adicionais como o Google Maps API ou HERE API, que frequentemente têm dados mais precisos para endereços com números de casas.</p></li>
<li><p>Confirme os dados no OpenStreetMap para verificar se o número da casa está mapeado.</p></li>
</ul>
<p>Se a precisão for crucial para o projeto, é recomendável utilizar uma abordagem complementar para garantir que as coordenadas estejam corretas.</p>
<p>d) Selecionando Nós com Base em Atributos</p>
<p>Identifique nós com características específicas:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">no</span><span class="p">,</span> <span class="n">atributos</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;street_count&quot;</span> <span class="ow">in</span> <span class="n">atributos</span> <span class="ow">and</span> <span class="n">atributos</span><span class="p">[</span><span class="s2">&quot;street_count&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">no</span><span class="p">,</span> <span class="n">atributos</span><span class="p">)</span>
</pre></div>
</div>
<p>Neste código, “and atributos[“street_count”] == 3:” seleciona os nós onde o número de ruas conectadas é exatamente 3.
Esses nós podem representar interseções (cruzamentos) em que três ruas convergem.</p>
<p>e) Usando Interfaces Gráficas</p>
<p>Com bibliotecas como <strong>folium</strong>, você pode interagir com o mapa e selecionar os pontos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">folium</span>

<span class="c1"># Criar um mapa básico</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.5505</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.5505</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Origem&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.5525</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6320</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Destino&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">m</span>
</pre></div>
</div>
<p>Voltando ao processo de determinaçãor o caminho mínimo entre dois pontos, vamos informar as coordenadas de dois pontos no bairro da Liberdade, um ponto será a origem e o outro ponto, o destino de nosso trajeto.
É importante destacar que esses pontos não são nós da rede.</p>
<ul class="simple">
<li><p><strong>Ponto de Origem</strong>:</p>
<ul>
<li><p>Latitude: (23, 34, 22, “S”)</p></li>
<li><p>Longitude: (46, 37, 45, “W”)</p></li>
</ul>
</li>
<li><p><strong>Ponto de Destino</strong>:</p>
<ul>
<li><p>Latitude: (23, 33, 40, “S”)</p></li>
<li><p>Longitude: (46, 38, 6, “W”)</p></li>
</ul>
</li>
</ul>
<p>Como as coordenadas dos pontos estão no formato graus, minutos e segundos (DMS), é necessário convertê-las para o formato decimal (DD) para poder utilizar em nosso estudo de caso.
Para tanto, vamos criar uma função simples, que realiza esta conversão.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dms_para_decimal</span><span class="p">(</span><span class="n">graus</span><span class="p">,</span> <span class="n">minutos</span><span class="p">,</span> <span class="n">segundos</span><span class="p">,</span> <span class="n">hemisferio</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converte coordenadas no formato DMS (graus, minutos, segundos)</span>
<span class="sd">    para o formato decimal (DD), considerando o hemisfério.</span>

<span class="sd">    Parâmetros:</span>
<span class="sd">    - graus: int ou float (parte inteira dos graus)</span>
<span class="sd">    - minutos: int ou float (minutos)</span>
<span class="sd">    - segundos: int ou float (segundos)</span>
<span class="sd">    - hemisferio: str (&quot;S&quot; para Sul, &quot;N&quot; para Norte, &quot;W&quot; para Oeste, &quot;E&quot; para Leste)</span>

<span class="sd">    Retorno:</span>
<span class="sd">    - float: coordenada no formato decimal, com sinal ajustado</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">decimal</span> <span class="o">=</span> <span class="n">graus</span> <span class="o">+</span> <span class="p">(</span><span class="n">minutos</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">segundos</span> <span class="o">/</span> <span class="mi">3600</span><span class="p">)</span>

    <span class="c1"># Ajustar sinal com base no hemisfério</span>
    <span class="k">if</span> <span class="n">hemisferio</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">]:</span>  <span class="c1"># Sul ou Oeste -&gt; negativo</span>
        <span class="n">decimal</span> <span class="o">=</span> <span class="o">-</span><span class="n">decimal</span>

    <span class="k">return</span> <span class="n">decimal</span>
</pre></div>
</div>
</div>
</div>
<p>Agora podemos converter as coordenadas dos pontos. Primeiro criamos variáveis e informamos as coordenadas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Coordenadas de origem e destino</span>
<span class="n">latitude_dms_origem</span> <span class="o">=</span> <span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="s2">&quot;S&quot;</span><span class="p">)</span>
<span class="n">longitude_dms_origem</span> <span class="o">=</span> <span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">)</span>

<span class="n">latitude_dms_destino</span> <span class="o">=</span> <span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="s2">&quot;S&quot;</span><span class="p">)</span>
<span class="n">longitude_dms_destino</span> <span class="o">=</span> <span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>E em seguida aplicamos a função criada anteriormente para realizar a conversão.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Converter para decimal</span>
<span class="n">latitude_origem_decimal</span> <span class="o">=</span> <span class="n">dms_para_decimal</span><span class="p">(</span><span class="o">*</span><span class="n">latitude_dms_origem</span><span class="p">)</span>
<span class="n">longitude_origem_decimal</span> <span class="o">=</span> <span class="n">dms_para_decimal</span><span class="p">(</span><span class="o">*</span><span class="n">longitude_dms_origem</span><span class="p">)</span>

<span class="n">latitude_destino_decimal</span> <span class="o">=</span> <span class="n">dms_para_decimal</span><span class="p">(</span><span class="o">*</span><span class="n">latitude_dms_destino</span><span class="p">)</span>
<span class="n">longitude_destino_decimal</span> <span class="o">=</span> <span class="n">dms_para_decimal</span><span class="p">(</span><span class="o">*</span><span class="n">longitude_dms_destino</span><span class="p">)</span>

<span class="c1"># Exibir resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordenadas Origem (Decimal): Latitude = </span><span class="si">{</span><span class="n">latitude_origem_decimal</span><span class="si">}</span><span class="s2">, Longitude = </span><span class="si">{</span><span class="n">longitude_origem_decimal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordenadas Destino (Decimal): Latitude = </span><span class="si">{</span><span class="n">latitude_destino_decimal</span><span class="si">}</span><span class="s2">, Longitude = </span><span class="si">{</span><span class="n">longitude_destino_decimal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Coordenadas Origem (Decimal): Latitude = -23.576944444444443, Longitude = -46.628055555555555
Coordenadas Destino (Decimal): Latitude = -23.5575, Longitude = -46.635555555555555
</pre></div>
</div>
</div>
</div>
<p>No código acima, o uso de asteriscos (<code class="docutils literal notranslate"><span class="pre">*</span></code>) em chamadas como <code class="docutils literal notranslate"><span class="pre">dms_para_decimal(*latitude_dms_origem)</span></code> e <code class="docutils literal notranslate"><span class="pre">dms_para_decimal(*longitude_dms_origem)</span></code> tem a função de <strong>desempacotar</strong> os valores da tupla antes de passá-los como argumentos para a função <code class="docutils literal notranslate"><span class="pre">dms_para_decimal</span></code>.</p>
<p><strong>Entendendo o desempacotamento (<code class="docutils literal notranslate"><span class="pre">*</span></code>):</strong></p>
<p><strong>Tupla de entrada</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">latitude_dms_origem</span> <span class="pre">=</span> <span class="pre">(23,</span> <span class="pre">34,</span> <span class="pre">37,</span> <span class="pre">&quot;S&quot;)</span></code> é uma tupla contendo 4 elementos: graus, minutos, segundos e direção (norte/sul ou leste/oeste).</p></li>
</ul>
<p><strong>Função <code class="docutils literal notranslate"><span class="pre">dms_para_decimal</span></code></strong>:</p>
<ul>
<li><p>A função <code class="docutils literal notranslate"><span class="pre">dms_para_decimal</span></code> espera receber cada um desses valores como argumentos separados, assim:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dms_para_decimal</span><span class="p">(</span><span class="n">graus</span><span class="p">,</span> <span class="n">minutos</span><span class="p">,</span> <span class="n">segundos</span><span class="p">,</span> <span class="n">direcao</span><span class="p">):</span>
    <span class="c1"># Conversão lógica aqui</span>
</pre></div>
</div>
</li>
<li><p>Para que a tupla seja compatível com essa assinatura de função, seus elementos precisam ser separados ao serem passados para a função.</p></li>
</ul>
<p><strong>Uso do <code class="docutils literal notranslate"><span class="pre">*</span></code></strong>:</p>
<ul>
<li><p>O operador <code class="docutils literal notranslate"><span class="pre">*</span></code> em Python faz exatamente isso: ele <strong>desempacota</strong> os valores da tupla em argumentos individuais.</p></li>
<li><p>Assim, a chamada:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dms_para_decimal</span><span class="p">(</span><span class="o">*</span><span class="n">latitude_dms_origem</span><span class="p">)</span>
</pre></div>
</div>
<p>É equivalente a:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dms_para_decimal</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="s2">&quot;S&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Agora criamos as variáveis para armazenar os pontos de origem e de destino.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ponto_origem</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">longitude_origem_decimal</span><span class="p">,</span> <span class="n">latitude_origem_decimal</span><span class="p">)</span>
<span class="n">ponto_destino</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">longitude_destino_decimal</span><span class="p">,</span> <span class="n">latitude_destino_decimal</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Agora podemos visualizar o polígono do bairro (Liberdade) com os pontos de origem e destino convertidos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obter o centro do polígono para centralizar o mapa</span>
<span class="n">gdf_bairro</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode_to_gdf</span><span class="p">(</span><span class="n">bairro</span><span class="p">)</span>
<span class="n">centro_bairro</span> <span class="o">=</span> <span class="n">gdf_bairro</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Criar o mapa centrado no bairro</span>
<span class="n">mapa</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">centro_bairro</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">centro_bairro</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="c1"># Adicionar o polígono do bairro ao mapa</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf_bairro</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">mapping</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="p">),</span>
        <span class="n">style_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bairro&quot;</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mapa</span><span class="p">)</span>

<span class="c1"># Adicionar o ponto de origem</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">ponto_origem</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_origem</span><span class="o">.</span><span class="n">x</span><span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Origem&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;info-sign&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mapa</span><span class="p">)</span>

<span class="c1"># Adicionar o ponto de destino</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">ponto_destino</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_destino</span><span class="o">.</span><span class="n">x</span><span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Destino&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;info-sign&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mapa</span><span class="p">)</span>

<span class="c1"># Adicionar controle de camadas</span>
<span class="n">folium</span><span class="o">.</span><span class="n">LayerControl</span><span class="p">()</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mapa</span><span class="p">)</span>

<span class="c1"># Exibir o mapa</span>
<span class="n">mapa</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_70bb8552ad0a764206406f77aa5ef471 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_70bb8552ad0a764206406f77aa5ef471&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_70bb8552ad0a764206406f77aa5ef471 = L.map(
                &quot;map_70bb8552ad0a764206406f77aa5ef471&quot;,
                {
                    center: [-23.566928293428504, -46.63178882204397],
                    crs: L.CRS.EPSG3857,
                    zoom: 14,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_588a7c1a2617fc29cf65c4b5ebaf6962 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_588a7c1a2617fc29cf65c4b5ebaf6962.addTo(map_70bb8552ad0a764206406f77aa5ef471);
        
    
        function geo_json_2f5b26712ab30187fa7c983b5ae2463b_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;blue&quot;, &quot;fillColor&quot;: &quot;lightblue&quot;, &quot;fillOpacity&quot;: 0.5};
            }
        }

        function geo_json_2f5b26712ab30187fa7c983b5ae2463b_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_2f5b26712ab30187fa7c983b5ae2463b = L.geoJson(null, {
                onEachFeature: geo_json_2f5b26712ab30187fa7c983b5ae2463b_onEachFeature,
            
                style: geo_json_2f5b26712ab30187fa7c983b5ae2463b_styler,
        });

        function geo_json_2f5b26712ab30187fa7c983b5ae2463b_add (data) {
            geo_json_2f5b26712ab30187fa7c983b5ae2463b
                .addData(data);
        }
            geo_json_2f5b26712ab30187fa7c983b5ae2463b_add({&quot;features&quot;: [{&quot;geometry&quot;: {&quot;coordinates&quot;: [[[-46.641065, -23.573339], [-46.640796, -23.5734399], [-46.6407495, -23.5734593], [-46.640338, -23.573598], [-46.640098, -23.573629], [-46.6378619, -23.5743525], [-46.6364721, -23.5747826], [-46.63534, -23.575115], [-46.635062, -23.575083], [-46.634803, -23.575082], [-46.633995, -23.575043], [-46.633761, -23.575014], [-46.6339763, -23.5751717], [-46.634135, -23.575288], [-46.634219, -23.575334], [-46.634201, -23.575474], [-46.634177, -23.575525], [-46.634127, -23.575577], [-46.634077, -23.575597], [-46.63401, -23.575598], [-46.633858, -23.575566], [-46.633764, -23.575563], [-46.633668, -23.575588], [-46.633565, -23.575629], [-46.633503, -23.575683], [-46.633074, -23.576446], [-46.6330138, -23.5765724], [-46.632927, -23.576805], [-46.632772, -23.578168], [-46.6327527, -23.5782799], [-46.63261, -23.578502], [-46.6310371, -23.5786292], [-46.629624, -23.578752], [-46.629245, -23.578789], [-46.629077, -23.578773], [-46.628828, -23.578731], [-46.628574, -23.578747], [-46.628508, -23.578732], [-46.628246, -23.578628], [-46.628132, -23.578549], [-46.628044, -23.578467], [-46.627957, -23.578366], [-46.627945, -23.578283], [-46.6266574, -23.5782801], [-46.625435, -23.578266], [-46.6251481, -23.576945], [-46.62496, -23.575932], [-46.623036, -23.5666718], [-46.62272, -23.565151], [-46.622941, -23.565071], [-46.623213, -23.564914], [-46.623327, -23.563994], [-46.623341, -23.56393], [-46.62338, -23.563857], [-46.623743, -23.563398], [-46.623906, -23.561924], [-46.624324, -23.561914], [-46.625225, -23.561696], [-46.624363, -23.559114], [-46.625965, -23.558399], [-46.626357, -23.558261], [-46.626476, -23.558185], [-46.626544, -23.558127], [-46.626576, -23.557964], [-46.626617, -23.557454], [-46.626631, -23.55704], [-46.626629, -23.556639], [-46.626665, -23.556208], [-46.626829, -23.554873], [-46.626815, -23.554499], [-46.627051, -23.554526], [-46.627518, -23.555471], [-46.627693, -23.555709], [-46.627825, -23.555834], [-46.6280875, -23.5560032], [-46.6283666, -23.5561263], [-46.6287233, -23.5562052], [-46.6297253, -23.5562839], [-46.630703, -23.556347], [-46.6329761, -23.5565135], [-46.634464, -23.556602], [-46.634672, -23.556597], [-46.634927, -23.556568], [-46.63593, -23.556414], [-46.636866, -23.556248], [-46.63751, -23.556134], [-46.638104, -23.55758], [-46.6385283, -23.5586836], [-46.638606, -23.558886], [-46.638694, -23.559069], [-46.63902, -23.55957], [-46.639302, -23.559959], [-46.639457, -23.560193], [-46.639608, -23.560472], [-46.639793, -23.56093], [-46.63989, -23.561205], [-46.639962, -23.561487], [-46.64003, -23.561991], [-46.640079, -23.562428], [-46.6401009, -23.5626817], [-46.6401158, -23.5627753], [-46.64012, -23.562894], [-46.640229, -23.563593], [-46.640299, -23.563922], [-46.640543, -23.564946], [-46.64059, -23.565178], [-46.640628, -23.565484], [-46.640646, -23.565714], [-46.640643, -23.566081], [-46.640637, -23.566224], [-46.640592, -23.56653], [-46.64056, -23.566877], [-46.640563, -23.56752], [-46.640726, -23.569563], [-46.640836, -23.570726], [-46.640997, -23.572635], [-46.641065, -23.573339]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_2f5b26712ab30187fa7c983b5ae2463b.addTo(map_70bb8552ad0a764206406f77aa5ef471);
        
    
            var marker_bbdb8d77b2ba3696c046f041795cbbfb = L.marker(
                [-23.576944444444443, -46.628055555555555],
                {}
            ).addTo(map_70bb8552ad0a764206406f77aa5ef471);
        
    
            var icon_2bfdfe4e81586756af76b2d953be16d9 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;red&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_bbdb8d77b2ba3696c046f041795cbbfb.setIcon(icon_2bfdfe4e81586756af76b2d953be16d9);
        
    
        var popup_3e74f8bb8a83ce702b523f23f4a39677 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_9703cc7ccf56617c5e4ed2133068326a = $(`&lt;div id=&quot;html_9703cc7ccf56617c5e4ed2133068326a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Origem&lt;/div&gt;`)[0];
                popup_3e74f8bb8a83ce702b523f23f4a39677.setContent(html_9703cc7ccf56617c5e4ed2133068326a);
            
        

        marker_bbdb8d77b2ba3696c046f041795cbbfb.bindPopup(popup_3e74f8bb8a83ce702b523f23f4a39677)
        ;

        
    
    
            var marker_2b340cc736720fe304f12fb423d779b0 = L.marker(
                [-23.5575, -46.635555555555555],
                {}
            ).addTo(map_70bb8552ad0a764206406f77aa5ef471);
        
    
            var icon_609d100e9ab67589f4be1a9dfe0aa7f5 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;green&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_2b340cc736720fe304f12fb423d779b0.setIcon(icon_609d100e9ab67589f4be1a9dfe0aa7f5);
        
    
        var popup_c95cc4d921bdcfc91875fc48b0612164 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c23590bf3b2259a714f1b8ba26556562 = $(`&lt;div id=&quot;html_c23590bf3b2259a714f1b8ba26556562&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Destino&lt;/div&gt;`)[0];
                popup_c95cc4d921bdcfc91875fc48b0612164.setContent(html_c23590bf3b2259a714f1b8ba26556562);
            
        

        marker_2b340cc736720fe304f12fb423d779b0.bindPopup(popup_c95cc4d921bdcfc91875fc48b0612164)
        ;

        
    
    
            var layer_control_36e731f5f4274f762c1d87399478a78c_layers = {
                base_layers : {
                    &quot;openstreetmap&quot; : tile_layer_588a7c1a2617fc29cf65c4b5ebaf6962,
                },
                overlays :  {
                    &quot;Bairro&quot; : geo_json_2f5b26712ab30187fa7c983b5ae2463b,
                },
            };
            let layer_control_36e731f5f4274f762c1d87399478a78c = L.control.layers(
                layer_control_36e731f5f4274f762c1d87399478a78c_layers.base_layers,
                layer_control_36e731f5f4274f762c1d87399478a78c_layers.overlays,
                {&quot;autoZIndex&quot;: true, &quot;collapsed&quot;: true, &quot;position&quot;: &quot;topright&quot;}
            ).addTo(map_70bb8552ad0a764206406f77aa5ef471);

        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
</section>
<section id="determinacao-do-caminho-minimo">
<h3>4.4.2 Determinação do caminho mínimo<a class="headerlink" href="#determinacao-do-caminho-minimo" title="Link to this heading">#</a></h3>
<p>Vamos calcular o caminho mínimo entre o ponto de origem e o ponto de destino com base na distância de cada aresta que compõe o grafo.
Utilizaremos as coordenadas de origem e destino já convertidas para decimais. Os nós mais próximos no grafo serão localizados e utilizados para calcular esse caminho.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Coordenadas da origem e do destino</span>
<span class="n">origem</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitude_origem_decimal</span><span class="p">,</span> <span class="n">longitude_origem_decimal</span><span class="p">)</span>  <span class="c1"># Latitude e longitude da origem</span>
<span class="n">destino</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitude_destino_decimal</span><span class="p">,</span> <span class="n">longitude_destino_decimal</span><span class="p">)</span>  <span class="c1"># Latitude e longitude do destino</span>

<span class="c1"># Encontrar os nós mais próximos no grafo</span>
<span class="n">nó_origem</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">origem</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">origem</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Inverter para (longitude, latitude)</span>
<span class="n">nó_destino</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">destino</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">destino</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># Inverter para (longitude, latitude)</span>

<span class="c1"># Calcular o caminho mínimo com relação a distância</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">nó_origem</span><span class="p">,</span> <span class="n">nó_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>

<span class="c1"># Visualizar o caminho</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rota</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/71b88903d1ac1f5bc3a9693e42e11b5960f3b34cf0b786415a4c3ba11320411c.png" src="_images/71b88903d1ac1f5bc3a9693e42e11b5960f3b34cf0b786415a4c3ba11320411c.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&lt;Figure size 800x800 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div>
</div>
</div>
</div>
<p>No código acima:</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">ox.distance.nearest_nodes()</span></code></strong>: Encontra o nó no grafo <code class="docutils literal notranslate"><span class="pre">G</span></code> que está mais próximo de um par de coordenadas geográficas. O OSMnx organiza as coordenadas no formato <code class="docutils literal notranslate"><span class="pre">(longitude,</span> <span class="pre">latitude)</span></code>. Como o padrão é <code class="docutils literal notranslate"><span class="pre">(latitude,</span> <span class="pre">longitude)</span></code> em muitas APIs, as coordenadas precisam ser invertidas ao passá-las para a função.</p>
<p><strong>Entradas</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G</span></code>: Grafo representando a rede viária.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ponto_origem[1],</span> <span class="pre">ponto_origem[0]</span></code>: As coordenadas (longitude, latitude) do ponto de origem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ponto_destino[1],</span> <span class="pre">ponto_destino[0]</span></code>: As coordenadas (longitude, latitude) do ponto de destino.</p></li>
</ul>
<p><strong>Saídas</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nó_origem</span></code>: O nó do grafo mais próximo ao ponto de origem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nó_destino</span></code>: O nó do grafo mais próximo ao ponto de destino.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">ox.shortest_path()</span></code></strong>: Calcula o caminho mais curto entre dois nós (<code class="docutils literal notranslate"><span class="pre">nó_origem</span></code> e <code class="docutils literal notranslate"><span class="pre">nó_destino</span></code>) em um grafo <code class="docutils literal notranslate"><span class="pre">G</span></code>.</p>
<p><strong>Parâmetros</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G</span></code>: O grafo viário.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nó_origem</span></code>: O nó de partida.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nó_destino</span></code>: O nó de chegada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weight=&quot;length&quot;</span></code>: Define que o critério para calcular o caminho mínimo é a distância física das arestas. Isso assume que cada aresta no grafo tem um atributo <code class="docutils literal notranslate"><span class="pre">&quot;length&quot;</span></code> (geralmente em metros).</p></li>
</ul>
<p><strong>Saída</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rota</span></code>: Uma lista de nós que define o caminho mínimo no grafo.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ox.plot_graph_route()</span></code></strong>: Plota o grafo <code class="docutils literal notranslate"><span class="pre">G</span></code> e destaca o caminho calculado.</p></li>
</ul>
<p><strong>Entradas</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G</span></code>: O grafo da rede viária.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rota</span></code>: A lista de nós que formam o caminho mínimo.</p></li>
</ul>
<p><strong>Saída</strong>:</p>
<ul class="simple">
<li><p>Um gráfico exibindo o grafo, com a rota destacada.</p></li>
</ul>
<p>Definido o caminho mínimo, vamos calcular o comprimento total do caminho obtido somando o comprimento de cada aresta percorrida.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comprimento_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">G</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;length&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Comprimento total da rota: </span><span class="si">{</span><span class="n">comprimento_total</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> metros&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Comprimento total da rota: 2985.42 metros
</pre></div>
</div>
</div>
</div>
<p>No código acima:</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">rota</span></code></strong>: é uma lista de nós que define o caminho mínimo no grafo. Exemplo: <code class="docutils literal notranslate"><span class="pre">rota</span> <span class="pre">=</span> <span class="pre">[nó1,</span> <span class="pre">nó2,</span> <span class="pre">nó3,</span> <span class="pre">nó4]</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">zip(rota[:-1],</span> <span class="pre">rota[1:])</span></code></strong>: Combina pares consecutivos de nós na rota.
- <code class="docutils literal notranslate"><span class="pre">rota[:-1]</span></code>: Exclui o último nó da lista → <code class="docutils literal notranslate"><span class="pre">[nó1,</span> <span class="pre">nó2,</span> <span class="pre">nó3]</span></code>.
- <code class="docutils literal notranslate"><span class="pre">rota[1:]</span></code>: Exclui o primeiro nó da lista → <code class="docutils literal notranslate"><span class="pre">[nó2,</span> <span class="pre">nó3,</span> <span class="pre">nó4]</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">zip</span></code> une os dois em pares:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">[(nó1,</span> <span class="pre">nó2),</span> <span class="pre">(nó2,</span> <span class="pre">nó3),</span> <span class="pre">(nó3,</span> <span class="pre">nó4)]</span></code>.</p></li>
</ul>
</li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">G[u][v][0][&quot;length&quot;]</span></code></strong>: Acessa o grafo <code class="docutils literal notranslate"><span class="pre">G</span></code> para obter o comprimento da aresta entre os nós <code class="docutils literal notranslate"><span class="pre">u</span></code> e <code class="docutils literal notranslate"><span class="pre">v</span></code>:
- <code class="docutils literal notranslate"><span class="pre">G[u][v]</span></code>: Dicionário que contém as arestas entre os nós <code class="docutils literal notranslate"><span class="pre">u</span></code> e <code class="docutils literal notranslate"><span class="pre">v</span></code>.
- <code class="docutils literal notranslate"><span class="pre">[0]</span></code>: Seleciona a primeira aresta no caso de grafos direcionados ou multigrafos (onde pode haver várias arestas entre dois nós).
- <code class="docutils literal notranslate"><span class="pre">[&quot;length&quot;]</span></code>: Retorna o comprimento (geralmente em metros) da aresta entre <code class="docutils literal notranslate"><span class="pre">u</span></code> e <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">sum(...)</span></code></strong>: Soma os comprimentos de todas as arestas no caminho (<code class="docutils literal notranslate"><span class="pre">rota</span></code>). O resultado é o comprimento total do caminho em metros.
Por exemplo, para uma caminho <code class="docutils literal notranslate"><span class="pre">rota</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code> e arestas no grafo:</p>
<ul>
<li><p>Comprimento das arestas:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">G[1][2][0][&quot;length&quot;]</span> <span class="pre">=</span> <span class="pre">120.5</span></code> (de nó 1 para nó 2)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">G[2][3][0][&quot;length&quot;]</span> <span class="pre">=</span> <span class="pre">180.3</span></code> (de nó 2 para nó 3)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">G[3][4][0][&quot;length&quot;]</span> <span class="pre">=</span> <span class="pre">95.2</span></code> (de nó 3 para nó 4)</p></li>
</ul>
</li>
<li><p>Total:
[
\text{Comprimento total} = 120.5 + 180.3 + 95.2 = 396.0 , \text{metros}
]</p></li>
<li><p>Saída:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Comprimento</span> <span class="n">total</span> <span class="n">da</span> <span class="n">rota</span><span class="p">:</span> <span class="mf">396.00</span> <span class="n">metros</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="roteamento-considerando-velocidade-e-tempo-de-viagem">
<h2>4.5 Roteamento considerando velocidade e tempo de viagem<a class="headerlink" href="#roteamento-considerando-velocidade-e-tempo-de-viagem" title="Link to this heading">#</a></h2>
<p>O roteamento com base em velocidade e tempo de viagem é uma abordagem que considera não apenas a distância, mas também o tempo necessário para percorrer cada trecho de uma rede. Essa análise é útil em contextos onde as condições de deslocamento variam significativamente em função da velocidade permitida ou das características das vias.</p>
<p>Para estimar o tempo de viagem, utilizamos a fórmula básica:</p>
<div class="math notranslate nohighlight">
\[
\text{tempo} = \frac{\text{comprimento}}{\text{velocidade}}
\]</div>
<p>Nessa fórmula, o <strong>comprimento</strong> representa a extensão de cada aresta da rede (geralmente em metros), enquanto a <strong>velocidade</strong> é o valor atribuído à aresta (em metros por segundo ou convertido de unidades como km/h). Ao aplicar essa equação, é possível calcular o tempo total necessário para percorrer um caminho, permitindo determinar não apenas o caminho mínimo, mas também o mais rápido.</p>
<p>Para realizar essa análise, é fundamental que o grafo contenha informações sobre os valores de velocidade associados às arestas. Essas informações são essenciais para calcular o tempo de viagem em cada trecho da rede. Antes de prosseguir, vamos verificar os atributos do grafo para confirmar a presença desses dados e garantir que eles estejam disponíveis para o cálculo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar DataFrame com atributos das arestas</span>
<span class="n">df_arestas</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Atributos das Arestas:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_arestas</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Atributos das Arestas:
                                      osmid  oneway   lanes     highway  \
587993   459347433    [780219126, 38738766]    True  [2, 3]  trunk_link   
25929414 587993                   524487872    True       5       trunk   
25947658 2627719093               257174614    True       2    tertiary   
         2627737591  [942915234, 944346220]    True  [2, 3]     primary   
60641188 2070954431                 8579133    True       2    tertiary   

                    maxspeed reversed   length  \
587993   459347433        40    False  152.679   
25929414 587993           60    False   99.942   
25947658 2627719093      NaN    False   10.448   
         2627737591       50    False  296.802   
60641188 2070954431      NaN    False   11.140   

                                                              geometry  \
587993   459347433   LINESTRING (-46.6382561 -23.55821, -46.6381514...   
25929414 587993      LINESTRING (-46.6385968 -23.5590528, -46.63857...   
25947658 2627719093                                                NaN   
         2627737591  LINESTRING (-46.6399769 -23.5686478, -46.63996...   
60641188 2070954431                                                NaN   

                                                name bridge access junction  \
587993   459347433                               NaN    NaN    NaN      NaN   
25929414 587993         Avenida Vinte e Três de Maio    NaN    NaN      NaN   
25947658 2627719093  Viaduto Beneficência Portuguesa    NaN    NaN      NaN   
         2627737591                    Rua Vergueiro    NaN    NaN      NaN   
60641188 2070954431      Rua Condessa de São Joaquim    NaN    NaN      NaN   

                    width  
587993   459347433    NaN  
25929414 587993       NaN  
25947658 2627719093   NaN  
         2627737591   NaN  
60641188 2070954431   NaN  
</pre></div>
</div>
</div>
</div>
<p>Por padrão, o atributo que armazena informações de velocidade das arestas no OSM é <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>. Podemos verificar que temos esse atributo no grafo.
Vamos verificar se todas as arestas possuem valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>. Para tanto, vamos verificar a existência de dados ausentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Contar o número total de arestas</span>
<span class="n">total_arestas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_arestas</span><span class="p">)</span>

<span class="c1"># Contar os valores NaN no atributo &#39;maxspeed&#39;</span>
<span class="n">nan_maxspeed_count</span> <span class="o">=</span> <span class="n">df_arestas</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># Exibir os resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de arestas: </span><span class="si">{</span><span class="n">total_arestas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Quantidade de arestas com maxspeed = NaN: </span><span class="si">{</span><span class="n">nan_maxspeed_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total de arestas: 835
Quantidade de arestas com maxspeed = NaN: 698
</pre></div>
</div>
</div>
</div>
<p>Podemos verificar que existe uma grande quantidade de arestas sem dados de velocidade. Vamos identificar visualmente essas arestas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Categorizar as arestas com base no atributo maxspeed</span>
<span class="n">cores_arestas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;gray&quot;</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;red&quot;</span>
    <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Plotar o grafo com as cores configuradas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span>
    <span class="n">G</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="n">cores_arestas</span><span class="p">,</span>
    <span class="n">edge_linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Adicionar legenda manual</span>
<span class="n">handles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Maxspeed = NaN&quot;</span><span class="p">),</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Maxspeed definido&quot;</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">handles</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">)</span>

<span class="c1"># Adicionar título</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Rede Viária com Maxspeed Categorizada&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e3cdbd94ec509474d8ed69c49cc00abec25ea833ee4ab6d8b7b398bc73881cf9.png" src="_images/e3cdbd94ec509474d8ed69c49cc00abec25ea833ee4ab6d8b7b398bc73881cf9.png" />
</div>
</div>
<p>Além da questão dos dados faltantes, o atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> pode conter valores inconsistentes (como strings ou valores múltiplos). Para realizar os cálculos de tempo de viagem, é necessário garantir que <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> seja numérico. Desta maneira, antes de trabalhar com os dados de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>, é importante entender sua estrutura.</p>
<p>Vamos verificar os tipos de valores armazenados na coluna <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exibir informações sobre as arestas</span>
<span class="n">df_arestas</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>

<span class="c1"># Contar e exibir os tipos de valores armazenados na coluna &#39;maxspeed&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tipos de valores em maxspeed:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_arestas</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>

<span class="c1"># Listar exemplos de cada tipo armazenado</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Exemplos de valores armazenados:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tipo</span> <span class="ow">in</span> <span class="n">df_arestas</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">exemplos</span> <span class="o">=</span> <span class="n">df_arestas</span><span class="p">[</span><span class="n">df_arestas</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span> <span class="o">==</span> <span class="n">tipo</span><span class="p">][</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Tipo: </span><span class="si">{</span><span class="n">tipo</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exemplos</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
MultiIndex: 835 entries, (587993, 459347433) to (11453986130, 2390857079)
Data columns (total 13 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   osmid     835 non-null    object 
 1   oneway    835 non-null    bool   
 2   lanes     472 non-null    object 
 3   highway   835 non-null    object 
 4   maxspeed  137 non-null    object 
 5   reversed  835 non-null    object 
 6   length    835 non-null    float64
 7   geometry  649 non-null    object 
 8   name      747 non-null    object 
 9   bridge    5 non-null      object 
 10  access    19 non-null     object 
 11  junction  12 non-null     object 
 12  width     27 non-null     object 
dtypes: bool(1), float64(1), object(11)
memory usage: 120.9+ KB
Tipos de valores em maxspeed:
&lt;class &#39;float&#39;&gt;    698
&lt;class &#39;str&#39;&gt;      135
&lt;class &#39;list&#39;&gt;       2
Name: maxspeed, dtype: int64

Exemplos de valores armazenados:

Tipo: &lt;class &#39;str&#39;&gt;
587993    459347433     40
25929414  587993        60
25947658  2627737591    50
60641188  2396850249    50
60641341  60641336      50
Name: maxspeed, dtype: object

Tipo: &lt;class &#39;float&#39;&gt;
25947658  2627719093    NaN
60641188  2070954431    NaN
          1833396340    NaN
60641341  2210723698    NaN
60641427  60641341      NaN
Name: maxspeed, dtype: object

Tipo: &lt;class &#39;list&#39;&gt;
459347433   132347429    [40, 50]
3824975757  296284639    [30, 50]
Name: maxspeed, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Como <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> contém valores inconsistentes (como listas e valores ausentes), será necessário ajustar os dados para realizar cálculos.</p>
<p>Para garantir que alterações sejam feitas sem comprometer os dados originais, criaremos uma cópia do grafo. Em seguida, iremos imprimir os nós dos grafos original e cópia, para verificar se estão coerentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar uma cópia do grafo original</span>
<span class="n">grafo_editado</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Verificar se a cópia foi criada com sucesso</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Número de nós no grafo original: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Número de nós no grafo editado: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">grafo_editado</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Número de nós no grafo original: 399
Número de nós no grafo editado: 399
</pre></div>
</div>
</div>
</div>
<p>Inicialmente vamos abordar os registros que estão armazenados como listas em <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> (ex.: <code class="docutils literal notranslate"><span class="pre">[&quot;30&quot;,</span> <span class="pre">&quot;50&quot;]</span></code>). Quanto tivermos esse tipo de ocorrência, converteremos os valores armazenados como listas para garantir que cada aresta tenha um único valor, escolhendo o menor valor como medida de segurança.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Transformar listas de maxspeed em inteiros, mantendo o valor mais baixo</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">),</span> <span class="nb">list</span><span class="p">):</span>  <span class="c1"># Verificar se maxspeed é uma lista</span>
        <span class="n">menor_valor</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]))</span>  <span class="c1"># Obter o menor valor da lista</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">menor_valor</span><span class="p">)</span>  <span class="c1"># Converter para string</span>

<span class="c1"># Verificar se ainda existem listas em maxspeed</span>
<span class="n">listas_remanescentes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">),</span> <span class="nb">list</span><span class="p">)</span>
<span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Número de arestas com maxspeed como lista: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">listas_remanescentes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Número de arestas com maxspeed como lista: 0
</pre></div>
</div>
</div>
</div>
<p>No código acima:</p>
<p><strong>Etapa 1: Transformar listas de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> em inteiros</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">),</span> <span class="nb">list</span><span class="p">):</span>  <span class="c1"># Verificar se maxspeed é uma lista</span>
        <span class="n">menor_valor</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]))</span>  <span class="c1"># Obter o menor valor da lista</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">menor_valor</span><span class="p">)</span>  <span class="c1"># Converter para string</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">grafo_editado.edges(data=True)</span></code></strong>: Itera por todas as arestas do grafo <code class="docutils literal notranslate"><span class="pre">grafo_editado</span></code>. Cada aresta é definida pelos nós <code class="docutils literal notranslate"><span class="pre">u</span></code> (origem) e <code class="docutils literal notranslate"><span class="pre">v</span></code> (destino), e possui um dicionário de atributos <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">data.get(&quot;maxspeed&quot;)</span></code></strong>: Verifica o valor associado ao atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> para a aresta atual. Esse atributo pode ser:
- Uma string (ex.: <code class="docutils literal notranslate"><span class="pre">&quot;50&quot;</span></code>).
- Uma lista de strings (ex.: <code class="docutils literal notranslate"><span class="pre">[&quot;30&quot;,</span> <span class="pre">&quot;50&quot;]</span></code>).
- <code class="docutils literal notranslate"><span class="pre">None</span></code> (se o atributo não estiver presente na aresta).</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">isinstance(data.get(&quot;maxspeed&quot;),</span> <span class="pre">list):</span></code></strong>: Garante que o código manipule apenas arestas onde o valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> seja uma lista.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">min(map(int,</span> <span class="pre">data[&quot;maxspeed&quot;]))</span></code></strong>: Converte os valores da lista (originalmente strings) em inteiros usando <code class="docutils literal notranslate"><span class="pre">map(int,</span> <span class="pre">...)</span></code>. Determina o menor valor da lista com a função <code class="docutils literal notranslate"><span class="pre">min()</span></code>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">data[&quot;maxspeed&quot;]</span> <span class="pre">=</span> <span class="pre">str(menor_valor)</span></code></strong>: Substitui o valor original da lista por uma string contendo o menor valor.</p>
<p><strong>Etapa 2. Verificar se ainda existem listas em <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code></strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">listas_remanescentes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">),</span> <span class="nb">list</span><span class="p">)</span>
<span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Número de arestas com maxspeed como lista: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">listas_remanescentes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Lista de arestas remanescentes</strong>: Este trecho cria uma lista com todas as arestas (<code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">v</span></code>) cujos valores de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> ainda são listas.</p>
<ul class="simple">
<li><p><strong>Compreensão de lista</strong>:</p>
<ul>
<li><p>Itera novamente por todas as arestas do grafo.</p></li>
<li><p>Filtra apenas aquelas onde <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> ainda é uma lista.</p></li>
<li><p>Para cada aresta filtrada, inclui uma tupla com:</p>
<ul>
<li><p>Os nós <code class="docutils literal notranslate"><span class="pre">u</span></code> e <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p></li>
<li><p>O valor atual de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">len(listas_remanescentes)</span></code></strong>:</p>
<ul class="simple">
<li><p>Conta quantas arestas ainda possuem <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> como lista.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">print</span></code></strong>:</p>
<ul class="simple">
<li><p>Exibe o número de arestas remanescentes com o problema original.</p></li>
</ul>
<p><strong>Exemplo</strong>
Suponha que uma aresta tenha o seguinte atributo antes do processamento:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;30&quot;</span><span class="p">,</span> <span class="s2">&quot;50&quot;</span><span class="p">]}</span>
</pre></div>
</div>
<p>Após o código:</p>
<p><strong>Transformação</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min(map(int,</span> <span class="pre">[&quot;30&quot;,</span> <span class="pre">&quot;50&quot;]))</span></code> → <code class="docutils literal notranslate"><span class="pre">30</span></code></p></li>
<li><p>Substitui <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> pela string <code class="docutils literal notranslate"><span class="pre">&quot;30&quot;</span></code>.</p></li>
</ul>
<p><strong>Verificação</strong>:</p>
<ul class="simple">
<li><p>Se todas as listas forem tratadas, o diagnóstico (<code class="docutils literal notranslate"><span class="pre">listas_remanescentes</span></code>) será vazio, e o número de arestas problemáticas será <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
</ul>
<p>Agora podemos tratar a questão dos dados faltantes. Para garantir que todas as arestas tenham um valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>, valores ausentes serão imputados com um valor padrão. Inicialmente vamos criar uma cópia do grafo editado e imputar o valor de 40 km/h.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar uma cópia do grafo editado</span>
<span class="n">grafo_40</span> <span class="o">=</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Preencher maxspeed = NaN com 40 no grafo</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Verificar ausência ou NaN</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40</span>  <span class="c1"># Preencher com 40</span>

<span class="c1"># Verificar os valores únicos de maxspeed</span>
<span class="n">valores_unicos_maxspeed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">in</span> <span class="n">data</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed no grafo:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valores_unicos_maxspeed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Valores únicos de maxspeed no grafo:
{&#39;30&#39;, &#39;50&#39;, &#39;60&#39;, 40, &#39;20&#39;, &#39;40&#39;}
</pre></div>
</div>
</div>
</div>
<p>Vamos analisar o código passo a passo:</p>
<p><strong>1. Criar uma cópia do grafo</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grafo_40</span> <span class="o">=</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">grafo_editado.copy()</span></code></strong>: Cria uma cópia independente do grafo <code class="docutils literal notranslate"><span class="pre">grafo_editado</span></code> e a armazena na variável <code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>.
Essa abordagem é importante para preservar o grafo original (<code class="docutils literal notranslate"><span class="pre">grafo_editado</span></code>), pois iremos utilizá-lo em seu estado inicial mais adiante.</p>
<p><strong>2. Preencher valores ausentes de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> com 40</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Verificar ausência ou NaN</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40</span>  <span class="c1"># Preencher com 40</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">grafo_40.edges(data=True)</span></code></strong>: Itera por todas as arestas do grafo <code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>, retornando:
- <code class="docutils literal notranslate"><span class="pre">u</span></code>: Nó de origem da aresta.
- <code class="docutils literal notranslate"><span class="pre">v</span></code>: Nó de destino da aresta.
- <code class="docutils literal notranslate"><span class="pre">data</span></code>: Dicionário contendo os atributos da aresta, incluindo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>.</p>
<p><strong>Condição para preencher <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code></strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">&quot;maxspeed&quot;</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">data</span></code>: Verifica se o atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> não está presente no dicionário de atributos da aresta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">or</span> <span class="pre">data[&quot;maxspeed&quot;]</span> <span class="pre">is</span> <span class="pre">None</span></code>: Verifica se o valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> é <code class="docutils literal notranslate"><span class="pre">None</span></code>, indicando que o atributo está vazio ou inválido.</p></li>
</ul>
<p><strong>Substituição do valor</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data[&quot;maxspeed&quot;]</span> <span class="pre">=</span> <span class="pre">40</span></code>: Define o valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> como 40 para essas arestas.</p></li>
<li><p>O valor 40 pode representar um padrão de velocidade em locais onde os dados estão ausentes.</p></li>
</ul>
<p><strong>3. Verificar os valores únicos de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code></strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">valores_unicos_maxspeed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">in</span> <span class="n">data</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed no grafo:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valores_unicos_maxspeed</span><span class="p">)</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">set()</span></code></strong>: Cria um conjunto (<code class="docutils literal notranslate"><span class="pre">set</span></code>) com os valores únicos de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> presentes no grafo. Isso é útil para verificar a consistência e a diversidade dos valores.</p>
<p><strong>Compreensão de lista</strong>:</p>
<ul class="simple">
<li><p>Itera novamente pelas arestas do grafo.</p></li>
<li><p>Filtra apenas arestas que possuem o atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> (<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">&quot;maxspeed&quot;</span> <span class="pre">in</span> <span class="pre">data</span></code>).</p></li>
<li><p>Extrai o valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> para cada aresta.</p></li>
</ul>
<section id="exemplo">
<h3><strong>Exemplo</strong><a class="headerlink" href="#exemplo" title="Link to this heading">#</a></h3>
<p>Suponha que <code class="docutils literal notranslate"><span class="pre">grafo_editado</span></code> tenha as seguintes arestas e valores de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Aresta (u → v)</p></th>
<th class="head"><p>maxspeed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(1 → 2)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>(2 → 3)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p>(3 → 4)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>(4 → 5)</p></td>
<td><p>Não definido</p></td>
</tr>
</tbody>
</table>
</div>
<p>Após o código:</p>
<ol class="arabic">
<li><p>Arestas com <code class="docutils literal notranslate"><span class="pre">None</span></code> ou sem o atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> terão o valor preenchido como <code class="docutils literal notranslate"><span class="pre">40</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">→</span> <span class="pre">3)</span></code>: <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> será <code class="docutils literal notranslate"><span class="pre">40</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(4</span> <span class="pre">→</span> <span class="pre">5)</span></code>: <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> será <code class="docutils literal notranslate"><span class="pre">40</span></code>.</p></li>
</ul>
</li>
<li><p>Os valores únicos de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> serão:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<p>A próxima etapa consiste em verificar se ainda existem arestas sem registros de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Verificar se ainda existem arestas com maxspeed = None</span>
<span class="n">arestas_sem_maxspeed</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Arestas sem maxspeed após imputação: </span><span class="si">{</span><span class="n">arestas_sem_maxspeed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Arestas sem maxspeed após imputação: 0
</pre></div>
</div>
</div>
</div>
<p>Agora que nos certificamos que todas as arestas contém valores de velocidade, vamos garantir que esses valores sejam do tipo integer (inteiro), para que seja possível utilizá-los para calcular os tempos de viagem. O código abaixo força a conversão de todos os registros, sejam eles integer, float ou string, para o tipo integer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Converter maxspeed para valores consistentes (inteiro) no grafo</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span>  <span class="c1"># Converter strings numéricas para inteiros</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Definir como None se não for possível converter</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]):</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span>  <span class="c1"># Converter floats para inteiros</span>
</pre></div>
</div>
</div>
</div>
<p>Para facilitar as consultas e visualizações, vamos criar um dataframe das arestas do grafo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_arestas_40</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Atributos das Arestas:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_arestas_40</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Atributos das Arestas:
                                      osmid  oneway   lanes     highway  \
587993   459347433    [780219126, 38738766]    True  [2, 3]  trunk_link   
25929414 587993                   524487872    True       5       trunk   
25947658 2627719093               257174614    True       2    tertiary   
         2627737591  [942915234, 944346220]    True  [2, 3]     primary   
60641188 2070954431                 8579133    True       2    tertiary   

                     maxspeed reversed   length  \
587993   459347433         40    False  152.679   
25929414 587993            60    False   99.942   
25947658 2627719093        40    False   10.448   
         2627737591        50    False  296.802   
60641188 2070954431        40    False   11.140   

                                                              geometry  \
587993   459347433   LINESTRING (-46.6382561 -23.55821, -46.6381514...   
25929414 587993      LINESTRING (-46.6385968 -23.5590528, -46.63857...   
25947658 2627719093                                                NaN   
         2627737591  LINESTRING (-46.6399769 -23.5686478, -46.63996...   
60641188 2070954431                                                NaN   

                                                name bridge access junction  \
587993   459347433                               NaN    NaN    NaN      NaN   
25929414 587993         Avenida Vinte e Três de Maio    NaN    NaN      NaN   
25947658 2627719093  Viaduto Beneficência Portuguesa    NaN    NaN      NaN   
         2627737591                    Rua Vergueiro    NaN    NaN      NaN   
60641188 2070954431      Rua Condessa de São Joaquim    NaN    NaN      NaN   

                    width  
587993   459347433    NaN  
25929414 587993       NaN  
25947658 2627719093   NaN  
         2627737591   NaN  
60641188 2070954431   NaN  
</pre></div>
</div>
</div>
</div>
<p>Para verificar se todos os registros de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> agora são do tipo inteiro:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Verificar os tipos de dados únicos em maxspeed</span>
<span class="n">tipos_maxspeed</span> <span class="o">=</span> <span class="n">df_arestas_40</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tipos únicos em maxspeed:&quot;</span><span class="p">,</span> <span class="n">tipos_maxspeed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tipos únicos em maxspeed: [&lt;class &#39;int&#39;&gt;]
</pre></div>
</div>
</div>
</div>
<p>Para verificar quais são os valores de velocidade no nosso conjunto de dados após o processamento realizado:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Verificar valores únicos de maxspeed</span>
<span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">df_arestas_40</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed:&quot;</span><span class="p">,</span> <span class="n">valores_unicos</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Valores únicos de maxspeed: [40 60 50 20 30]
</pre></div>
</div>
</div>
</div>
<p>Para verificar visualmente como ficou a distribuição das velocidades no grafo da rede viária, vamos plotá-lo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar um dicionário de cores para cada valor único de maxspeed</span>
<span class="n">mapa_cores</span> <span class="o">=</span> <span class="p">{</span><span class="n">valor</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">tab20</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">valor</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">valores_unicos</span><span class="p">)}</span>

<span class="c1"># Adicionar cores às arestas com base no valor de maxspeed</span>
<span class="n">cores_arestas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">mapa_cores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">],</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="s2">&quot;gray&quot;</span><span class="p">))</span>  <span class="c1"># Usar cinza para valores fora do mapa</span>
    <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Plotar o grafo com as cores configuradas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span>
    <span class="n">grafo_40</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="n">cores_arestas</span><span class="p">,</span>
    <span class="n">edge_linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Criar legenda para as cores</span>
<span class="n">handles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">mapa_cores</span><span class="p">[</span><span class="n">valor</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">valor</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">valor</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">mapa_cores</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">10</span><span class="p">]</span>  <span class="c1"># Limitar a 10 valores na legenda</span>
<span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">handles</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Visualização das Arestas por Limites de Velocidade (Maxspeed)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f1018cebd998afe7ba227f114fa7c17525c148089e3eaddf8938df99d0d6606a.png" src="_images/f1018cebd998afe7ba227f114fa7c17525c148089e3eaddf8938df99d0d6606a.png" />
</div>
</div>
<p>Confirmando que todas as arestas possuem dados de velocidade, o próximo passo é adicionar o atributo “tempo” ao grafo. Esse atributo se refere ao tempo necessário para percorrer cada aresta existente no grafo, tendo como base seus valores de velocidade e comprimento.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adicionar atributo &#39;tempo&#39; às arestas</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">maxspeed</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">)</span>  <span class="c1"># Obter maxspeed da aresta</span>
    <span class="k">if</span> <span class="n">maxspeed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Verificar se maxspeed está definido</span>
        <span class="n">velocidade_m_s</span> <span class="o">=</span> <span class="n">maxspeed</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">3600</span>  <span class="c1"># Converter para m/s</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span> <span class="o">/</span> <span class="n">velocidade_m_s</span>  <span class="c1"># Tempo = comprimento / velocidade</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>  <span class="c1"># Definir tempo como infinito se maxspeed não estiver disponível</span>
</pre></div>
</div>
</div>
</div>
<p>O código acima adiciona um novo atributo chamado <code class="docutils literal notranslate"><span class="pre">tempo</span></code> às arestas de um grafo viário (<code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>), baseado na velocidade máxima (<code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>) e no comprimento da aresta (<code class="docutils literal notranslate"><span class="pre">length</span></code>).Vamos explicá-lo detalhadamente:</p>
<p><strong>Iterar sobre as arestas do grafo</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grafo_40.edges(data=True)</span></code> retorna todas as arestas do grafo, representadas pelos nós <code class="docutils literal notranslate"><span class="pre">u</span></code> (origem) e <code class="docutils literal notranslate"><span class="pre">v</span></code> (destino), além de um dicionário <code class="docutils literal notranslate"><span class="pre">data</span></code> contendo os atributos associados à aresta.</p></li>
</ul>
<p><strong>Obter o valor de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code></strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data.get(&quot;maxspeed&quot;)</span></code>: Busca o valor do atributo <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> associado à aresta. Se o atributo não existir, retorna <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
<p><strong>Calcular a velocidade em metros por segundo (<code class="docutils literal notranslate"><span class="pre">m/s</span></code>)</strong>:</p>
<ul class="simple">
<li><p>Se <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> estiver definido, ele é convertido de quilômetros por hora (<code class="docutils literal notranslate"><span class="pre">km/h</span></code>) para metros por segundo (<code class="docutils literal notranslate"><span class="pre">m/s</span></code>) usando a fórmula:
[
\text{velocidade_m_s} = \text{maxspeed} \times \frac{1000}{3600}
]</p></li>
</ul>
<p><strong>Calcular o tempo de travessia</strong>:</p>
<ul class="simple">
<li><p><strong>Se <code class="docutils literal notranslate"><span class="pre">length</span></code> estiver definido</strong>:</p>
<ul>
<li><p>O tempo de travessia da aresta é calculado como:
[
\text{tempo} = \frac{\text{comprimento}}{\text{velocidade}}
]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data.get(&quot;length&quot;,</span> <span class="pre">float('inf'))</span></code>: Obtém o valor do atributo <code class="docutils literal notranslate"><span class="pre">length</span></code> (em metros). Se o atributo não existir, assume <code class="docutils literal notranslate"><span class="pre">float('inf')</span></code> (tempo infinito).</p></li>
</ul>
</li>
<li><p><strong>Se <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> não estiver disponível</strong>:</p>
<ul>
<li><p>Define o tempo como infinito (<code class="docutils literal notranslate"><span class="pre">float('inf')</span></code>), representando uma aresta intransitável devido à ausência de dados.</p></li>
</ul>
</li>
</ul>
<p><strong>Adicionar o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> ao dicionário</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data[&quot;tempo&quot;]</span> <span class="pre">=</span> <span class="pre">...</span></code>: Adiciona o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> com o valor calculado.</p></li>
</ul>
<p><strong>Exemplo</strong></p>
<p>Suponha que uma aresta no grafo tenha os seguintes atributos:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Atributo</p></th>
<th class="head"><p>Valor</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">length</span></code></p></td>
<td><p>200</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">maxspeed</span></code></p></td>
<td><p>50</p></td>
</tr>
</tbody>
</table>
</div>
<ol class="arabic simple">
<li><p><strong>Cálculo da velocidade</strong>:
[
\text{velocidade_m_s} = 50 \times \frac{1000}{3600} = 13.89 , \text{m/s}
]</p></li>
<li><p><strong>Cálculo do tempo</strong>:
[
\text{tempo} = \frac{\text{length}}{\text{velocidade_m_s}} = \frac{200}{13.89} \approx 14.4 , \text{segundos}
]</p></li>
</ol>
<p>O DataFrame resultante incluirá o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> calculado para essa aresta.</p>
<p>Agora, convertemos o grafo em um dataframe para facilitar a consulta de seus atributos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_arestas_40</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Atributos das Arestas:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_arestas_40</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Atributos das Arestas:
                                      osmid  oneway   lanes     highway  \
587993   459347433    [780219126, 38738766]    True  [2, 3]  trunk_link   
25929414 587993                   524487872    True       5       trunk   
25947658 2627719093               257174614    True       2    tertiary   
         2627737591  [942915234, 944346220]    True  [2, 3]     primary   
60641188 2070954431                 8579133    True       2    tertiary   

                     maxspeed reversed   length  \
587993   459347433         40    False  152.679   
25929414 587993            60    False   99.942   
25947658 2627719093        40    False   10.448   
         2627737591        50    False  296.802   
60641188 2070954431        40    False   11.140   

                                                              geometry  \
587993   459347433   LINESTRING (-46.6382561 -23.55821, -46.6381514...   
25929414 587993      LINESTRING (-46.6385968 -23.5590528, -46.63857...   
25947658 2627719093                                                NaN   
         2627737591  LINESTRING (-46.6399769 -23.5686478, -46.63996...   
60641188 2070954431                                                NaN   

                         tempo                             name bridge access  \
587993   459347433   13.741110                              NaN    NaN    NaN   
25929414 587993       5.996520     Avenida Vinte e Três de Maio    NaN    NaN   
25947658 2627719093   0.940320  Viaduto Beneficência Portuguesa    NaN    NaN   
         2627737591  21.369744                    Rua Vergueiro    NaN    NaN   
60641188 2070954431   1.002600      Rua Condessa de São Joaquim    NaN    NaN   

                    junction width  
587993   459347433       NaN   NaN  
25929414 587993          NaN   NaN  
25947658 2627719093      NaN   NaN  
         2627737591      NaN   NaN  
60641188 2070954431      NaN   NaN  
</pre></div>
</div>
</div>
</div>
<p>Por fim, o caminho mais rápido é calculado, utilizando o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> como peso.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular a rota mais rápida</span>
<span class="n">rota_mais_rapida</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_40</span><span class="p">,</span> <span class="n">nó_origem</span><span class="p">,</span> <span class="n">nó_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;tempo&quot;</span><span class="p">)</span>

<span class="c1"># Visualizar a rota mais rápida</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span><span class="n">grafo_40</span><span class="p">,</span> <span class="n">rota_mais_rapida</span><span class="p">,</span> <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Calcular o tempo total da rota</span>
<span class="n">tempo_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">grafo_40</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota_mais_rapida</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota_mais_rapida</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tempo total da rota: </span><span class="si">{</span><span class="n">tempo_total</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> segundos (</span><span class="si">{</span><span class="n">tempo_total</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> minutos)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7033577a773ea38d23907b160915498150c593f2f0ef26b7ce943f2e227709fe.png" src="_images/7033577a773ea38d23907b160915498150c593f2f0ef26b7ce943f2e227709fe.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tempo total da rota: 260.89 segundos (4.35 minutos)
</pre></div>
</div>
</div>
</div>
<p>Esse código calcula e visualiza a <strong>rota mais rápida</strong> em um grafo com base no atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code>, já calculado previamente. Além disso, soma os tempos de travessia de todas as arestas da rota para determinar o tempo total de viagem. Vamos explicá-lo em detalhes:</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">ox.shortest_path()</span></code></strong>:</p>
<ul class="simple">
<li><p>Calcula o caminho mínimo entre dois nós (<code class="docutils literal notranslate"><span class="pre">nó_origem</span></code> e <code class="docutils literal notranslate"><span class="pre">nó_destino</span></code>) no grafo <code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>.</p></li>
<li><p>O parâmetro <code class="docutils literal notranslate"><span class="pre">weight=&quot;tempo&quot;</span></code> especifica que o critério de otimização é o tempo (<code class="docutils literal notranslate"><span class="pre">tempo</span></code>), ao invés de distância ou outro atributo.</p></li>
<li><p>O algoritmo percorre o grafo procurando o caminho que minimiza a soma dos tempos de travessia (<code class="docutils literal notranslate"><span class="pre">tempo</span></code>) das arestas.</p></li>
</ul>
<p><strong>Entradas</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>: Grafo com as arestas que possuem o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nó_origem</span></code>: Nó inicial da rota.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nó_destino</span></code>: Nó final da rota.</p></li>
</ul>
<p><strong>Saída</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rota_mais_rapida</span></code>: Uma lista ordenada de nós que define a rota mais rápida no grafo.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">ox.plot_graph_route()</span></code></strong>:</p>
<ul class="simple">
<li><p>Plota o grafo e destaca a rota mais rápida (<code class="docutils literal notranslate"><span class="pre">rota_mais_rapida</span></code>).</p></li>
</ul>
<p><strong>Parâmetros</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>: O grafo onde a rota foi calculada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rota_mais_rapida</span></code>: A lista de nós que define a rota.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">route_linewidth=4</span></code>: Controla a espessura da linha que representa a rota no gráfico.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node_size=0</span></code>: Oculta os nós do grafo no gráfico para um visual mais limpo.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">zip(rota_mais_rapida[:-1],</span> <span class="pre">rota_mais_rapida[1:])</span></code></strong>:</p>
<ul class="simple">
<li><p>Gera pares consecutivos de nós ao longo da rota:</p>
<ul>
<li><p>Exemplo: Para <code class="docutils literal notranslate"><span class="pre">rota_mais_rapida</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>, o resultado será:
[
[(1, 2), (2, 3), (3, 4)]
]</p></li>
</ul>
</li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">grafo_40[u][v][0][&quot;tempo&quot;]</span></code></strong>:</p>
<ul class="simple">
<li><p>Acessa o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> da aresta entre os nós <code class="docutils literal notranslate"><span class="pre">u</span></code> e <code class="docutils literal notranslate"><span class="pre">v</span></code> no grafo <code class="docutils literal notranslate"><span class="pre">grafo_40</span></code>.</p></li>
<li><p>O índice <code class="docutils literal notranslate"><span class="pre">[0]</span></code> é usado para selecionar a primeira aresta em caso de multigrafos (várias arestas entre os mesmos nós).</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">sum(...)</span></code></strong>:</p>
<ul class="simple">
<li><p>Soma os tempos de travessia de todas as arestas na rota para calcular o tempo total.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">tempo_total</span></code></strong>:</p>
<ul class="simple">
<li><p>Exibe o tempo total da rota em segundos, com duas casas decimais.
<strong><code class="docutils literal notranslate"><span class="pre">tempo_total</span> <span class="pre">/</span> <span class="pre">60</span></code></strong>:</p></li>
<li><p>Converte o tempo total de segundos para minutos, para facilitar a interpretação.</p></li>
</ul>
<p><strong>Exemplo</strong></p>
<p><em>Suponha que:</em></p>
<ul class="simple">
<li><p>Rota calculada: <code class="docutils literal notranslate"><span class="pre">rota_mais_rapida</span> <span class="pre">=</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>.</p></li>
<li><p>Arestas têm os seguintes tempos:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2)</span></code>: <code class="docutils literal notranslate"><span class="pre">tempo</span> <span class="pre">=</span> <span class="pre">10.5</span></code> segundos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">3)</span></code>: <code class="docutils literal notranslate"><span class="pre">tempo</span> <span class="pre">=</span> <span class="pre">15.0</span></code> segundos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">4)</span></code>: <code class="docutils literal notranslate"><span class="pre">tempo</span> <span class="pre">=</span> <span class="pre">20.3</span></code> segundos.</p></li>
</ul>
</li>
</ul>
<p><em>Cálculos:</em></p>
<ol class="arabic simple">
<li><p><strong>Tempo total</strong>:
[
\text{tempo_total} = 10.5 + 15.0 + 20.3 = 45.8 , \text{segundos}
]</p></li>
<li><p><strong>Tempo em minutos</strong>:
[
\text{tempo_total} / 60 = 45.8 / 60 \approx 0.76 , \text{minutos}
]</p></li>
</ol>
<p><em>Saída:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tempo</span> <span class="n">total</span> <span class="n">da</span> <span class="n">rota</span><span class="p">:</span> <span class="mf">45.80</span> <span class="n">segundos</span> <span class="p">(</span><span class="mf">0.76</span> <span class="n">minutos</span><span class="p">)</span>
</pre></div>
</div>
<p>Ao comparar os plots das rotas obtidas com base na menor distância e no menor tempo, considerando uma velocidade padrão de 40 km/h para as arestas sem registro, observamos que ambas as rotas são idênticas. Isso significa que, neste caso, a rota mais curta também corresponde à rota mais rápida.</p>
<p>Agora, recalcularemos a rota mais rápida, alterando a velocidade padrão para 50 km/h em todas as arestas originalmente sem registro de velocidade. Seguiremos o mesmo fluxo de tarefas utilizado no exercício anterior para garantir a consistência na análise.</p>
<p>Inicialmente, criamos a cópia do grafo editado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar uma cópia do grafo editado</span>
<span class="n">grafo_50</span> <span class="o">=</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Preencher maxspeed = NaN com 50 no grafo</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Verificar ausência ou NaN</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Preencher com 50</span>

<span class="c1"># Verificar os valores únicos de maxspeed</span>
<span class="n">valores_unicos_maxspeed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;maxspeed&quot;</span> <span class="ow">in</span> <span class="n">data</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed no grafo:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valores_unicos_maxspeed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Valores únicos de maxspeed no grafo:
{&#39;30&#39;, &#39;50&#39;, &#39;60&#39;, &#39;20&#39;, 50, &#39;40&#39;}
</pre></div>
</div>
</div>
</div>
<p>A próxima etapa consiste em verificar se ainda existem arestas sem registros de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Verificar se ainda existem arestas com maxspeed = None</span>
<span class="n">arestas_sem_maxspeed</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Arestas sem maxspeed após imputação: </span><span class="si">{</span><span class="n">arestas_sem_maxspeed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Arestas sem maxspeed após imputação: 0
</pre></div>
</div>
</div>
</div>
<p>Conferir se todos os valores de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> são do tipo integer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Converter maxspeed para valores consistentes (inteiro) no grafo</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span>  <span class="c1"># Converter strings numéricas para inteiros</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Definir como None se não for possível converter</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]):</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">])</span>  <span class="c1"># Converter floats para inteiros</span>
</pre></div>
</div>
</div>
</div>
<p>Criar um dataframe das arestas do grafo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_arestas_50</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">grafo_40</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Atributos das Arestas:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_arestas_50</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Atributos das Arestas:
                                      osmid  oneway   lanes     highway  \
587993   459347433    [780219126, 38738766]    True  [2, 3]  trunk_link   
25929414 587993                   524487872    True       5       trunk   
25947658 2627719093               257174614    True       2    tertiary   
         2627737591  [942915234, 944346220]    True  [2, 3]     primary   
60641188 2070954431                 8579133    True       2    tertiary   

                     maxspeed reversed   length  \
587993   459347433         40    False  152.679   
25929414 587993            60    False   99.942   
25947658 2627719093        40    False   10.448   
         2627737591        50    False  296.802   
60641188 2070954431        40    False   11.140   

                                                              geometry  \
587993   459347433   LINESTRING (-46.6382561 -23.55821, -46.6381514...   
25929414 587993      LINESTRING (-46.6385968 -23.5590528, -46.63857...   
25947658 2627719093                                                NaN   
         2627737591  LINESTRING (-46.6399769 -23.5686478, -46.63996...   
60641188 2070954431                                                NaN   

                         tempo                             name bridge access  \
587993   459347433   13.741110                              NaN    NaN    NaN   
25929414 587993       5.996520     Avenida Vinte e Três de Maio    NaN    NaN   
25947658 2627719093   0.940320  Viaduto Beneficência Portuguesa    NaN    NaN   
         2627737591  21.369744                    Rua Vergueiro    NaN    NaN   
60641188 2070954431   1.002600      Rua Condessa de São Joaquim    NaN    NaN   

                    junction width  
587993   459347433       NaN   NaN  
25929414 587993          NaN   NaN  
25947658 2627719093      NaN   NaN  
         2627737591      NaN   NaN  
60641188 2070954431      NaN   NaN  
</pre></div>
</div>
</div>
</div>
<p>Para verificar visualmente como ficou a distribuição das velocidades no grafo da rede viária, vamos plotá-lo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Verificar valores únicos de maxspeed</span>
<span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">df_arestas_50</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed:&quot;</span><span class="p">,</span> <span class="n">valores_unicos</span><span class="p">)</span>

<span class="c1"># Criar um dicionário de cores para cada valor único de maxspeed</span>
<span class="n">mapa_cores</span> <span class="o">=</span> <span class="p">{</span><span class="n">valor</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">tab20</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">valor</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">valores_unicos</span><span class="p">)}</span>

<span class="c1"># Adicionar cores às arestas com base no valor de maxspeed</span>
<span class="n">cores_arestas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">mapa_cores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;maxspeed&#39;</span><span class="p">],</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="s2">&quot;gray&quot;</span><span class="p">))</span>  <span class="c1"># Usar cinza para valores fora do mapa</span>
    <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Plotar o grafo com as cores configuradas</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span>
    <span class="n">grafo_50</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="n">cores_arestas</span><span class="p">,</span>
    <span class="n">edge_linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Criar legenda para as cores</span>
<span class="n">handles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">mapa_cores</span><span class="p">[</span><span class="n">valor</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">valor</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">valor</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">mapa_cores</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">10</span><span class="p">]</span>  <span class="c1"># Limitar a 10 valores na legenda</span>
<span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">handles</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Visualização das Arestas por Limites de Velocidade (Maxspeed)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Valores únicos de maxspeed: [40 60 50 20 30]
</pre></div>
</div>
<img alt="_images/d62532a7804d4705723ee088c332dd10395412487014952c6a9380da6176ff2a.png" src="_images/d62532a7804d4705723ee088c332dd10395412487014952c6a9380da6176ff2a.png" />
</div>
</div>
<p>Adicionar o atributo “tempo” ao grafo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adicionar atributo &#39;tempo&#39; às arestas</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_50</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">maxspeed</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">)</span>  <span class="c1"># Obter maxspeed da aresta</span>
    <span class="k">if</span> <span class="n">maxspeed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Verificar se maxspeed está definido</span>
        <span class="n">velocidade_m_s</span> <span class="o">=</span> <span class="n">maxspeed</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">3600</span>  <span class="c1"># Converter para m/s</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span> <span class="o">/</span> <span class="n">velocidade_m_s</span>  <span class="c1"># Tempo = comprimento / velocidade</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>  <span class="c1"># Definir tempo como infinito se maxspeed não estiver disponível</span>
</pre></div>
</div>
</div>
</div>
<p>Por fim, a rota mais rápida é calculada, utilizando o atributo <code class="docutils literal notranslate"><span class="pre">tempo</span></code> como peso.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular a rota mais rápida</span>
<span class="n">rota_mais_rapida</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_50</span><span class="p">,</span> <span class="n">nó_origem</span><span class="p">,</span> <span class="n">nó_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;tempo&quot;</span><span class="p">)</span>

<span class="c1"># Visualizar a rota mais rápida</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span><span class="n">grafo_50</span><span class="p">,</span> <span class="n">rota_mais_rapida</span><span class="p">,</span> <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Calcular o tempo total da rota</span>
<span class="n">tempo_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">grafo_50</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;tempo&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota_mais_rapida</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota_mais_rapida</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tempo total da rota: </span><span class="si">{</span><span class="n">tempo_total</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> segundos (</span><span class="si">{</span><span class="n">tempo_total</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> minutos)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1316082c0b60e8634dd6cf215b8543001167a7cd8e0a786434003f662f019f7e.png" src="_images/1316082c0b60e8634dd6cf215b8543001167a7cd8e0a786434003f662f019f7e.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tempo total da rota: 225.23 segundos (3.75 minutos)
</pre></div>
</div>
</div>
</div>
<p>Ao comparar os plots da rota obtida utilizando a velocidade padrão de 50 km/h com a rota obtida utilizando a velocidade padrão de 50 km/h, constatamos que as rotas são diferentes. Essa diferença reflete o impacto das velocidades atribuídas na definição da rota mais rápida, evidenciando como alterações nos pesos das arestas podem influenciar os resultados do roteamento.</p>
</section>
</section>
<section id="calculo-de-roteamento-a-partir-de-nos-do-grafo-da-rede-viaria">
<h2>4.6 Cálculo de roteamento a partir de nós do grafo da rede viária<a class="headerlink" href="#calculo-de-roteamento-a-partir-de-nos-do-grafo-da-rede-viaria" title="Link to this heading">#</a></h2>
<p>O <strong><code class="docutils literal notranslate"><span class="pre">osmid</span></code></strong> é um identificador único atribuído aos elementos de uma rede viária extraídos do <strong>OpenStreetMap (OSM)</strong>, uma base de dados colaborativa de mapas. Esse identificador está presente tanto em nós (interseções ou pontos de conexão) quanto em arestas (trechos de vias) de um grafo gerado com ferramentas como o <strong>OSMnx</strong>.</p>
<ul class="simple">
<li><p><strong>Nos Nós (Nodes):</strong> O <code class="docutils literal notranslate"><span class="pre">osmid</span></code> identifica pontos específicos na rede viária, como cruzamentos, bifurcações ou pontos de extremidade de ruas.</p></li>
<li><p><strong>Nas Arestas (Edges):</strong> Em arestas, o <code class="docutils literal notranslate"><span class="pre">osmid</span></code> pode representar a via ou conjunto de vias associadas ao trecho correspondente. Algumas vezes, as arestas possuem múltiplos identificadores <code class="docutils literal notranslate"><span class="pre">osmid</span></code> quando representam trechos de vias combinadas.</p></li>
</ul>
<p>Esses identificadores únicos podem ser utilizados diretamente para definir os pontos de origem e destino para o cálculo de rotas. Segue uma explicação e os passos do processo.</p>
<p>Inicialmente vamos plotar o grafo e exibir os IDs dos nós diretamente no mapa para identificar quais usar como origem e destino:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plotar o grafo</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span>
    <span class="n">grafo_editado</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>  <span class="c1"># Tamanho dos nós</span>
    <span class="n">node_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>  <span class="c1"># Cor dos nós</span>
    <span class="n">edge_linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Espessura das arestas</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>  <span class="c1"># Cor das arestas</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Adicionar os IDs dos nós no plot</span>
<span class="k">for</span> <span class="n">no</span><span class="p">,</span> <span class="n">atributos</span> <span class="ow">in</span> <span class="n">grafo_editado</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">atributos</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">atributos</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>  <span class="c1"># Coordenadas do nó</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">no</span><span class="p">),</span>  <span class="c1"># ID do nó como texto</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>  <span class="c1"># Estilo do texto</span>
        <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">),</span>  <span class="c1"># Fundo preto</span>
    <span class="p">)</span>

<span class="c1"># Exibir o plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/0a7cfe26558537aa347e6f2ac2bbabea724db5692ef08bf0e091264e860372c0.png" src="_images/0a7cfe26558537aa347e6f2ac2bbabea724db5692ef08bf0e091264e860372c0.png" />
</div>
</div>
<p>Com base no mapa interativo definimos que o nó de origem será o nó com osmid 2082358176 e o nó de destino, será o nó com osmid 296286010.
Agora podemos utilizá-los para calcular rotas.</p>
<p>Para calcular a rota mais curta com base no comprimento:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Usar IDs dos nós conhecidos</span>
<span class="n">no_origem</span> <span class="o">=</span> <span class="mi">2082358176</span>
<span class="n">no_destino</span> <span class="o">=</span> <span class="mi">296286010</span>

<span class="c1"># Calcular a rota mais curta</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_editado</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span><span class="n">grafo_editado</span><span class="p">,</span> <span class="n">rota</span><span class="p">,</span> <span class="n">route_color</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e4727c4fa306d110b5da0e39104c4059411041a799232b113c1e7824bacd1652.png" src="_images/e4727c4fa306d110b5da0e39104c4059411041a799232b113c1e7824bacd1652.png" />
</div>
</div>
<p>Rota Mais Rápida com Base no Tempo:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Usar IDs dos nós conhecidos</span>
<span class="n">no_origem</span> <span class="o">=</span> <span class="mi">296286010</span> 
<span class="n">no_destino</span> <span class="o">=</span> <span class="mi">2082358176</span>

<span class="c1"># Calcular a rota mais rápida</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_50</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;tempo&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span><span class="n">grafo_50</span><span class="p">,</span> <span class="n">rota</span><span class="p">,</span> <span class="n">route_color</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/77b4bc17623fdcd9e3071de23872fb507c3a4fdac84fb6c797bb21b94e17286a.png" src="_images/77b4bc17623fdcd9e3071de23872fb507c3a4fdac84fb6c797bb21b94e17286a.png" />
</div>
</div>
<section id="calculo-de-roteamento-a-partir-de-pontos-de-interesse">
<h3>4.7 Calculo de roteamento a partir de pontos de interesse<a class="headerlink" href="#calculo-de-roteamento-a-partir-de-pontos-de-interesse" title="Link to this heading">#</a></h3>
<p>Neste exemplo, definiremos os pontos de origem e destino com base em localizações de paradas de ônibus, utilizando uma rede configurada para pedestres. Essa abordagem permite analisar rotas que refletem a mobilidade urbana associada ao transporte público, considerando a infraestrutura destinada ao deslocamento a pé, como calçadas, travessias e passarelas.</p>
<p>Inicialmente obtemos os dados referentes aos pontos de ônibus disponíveis no OSM.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Baixar os pontos de ônibus na área especificada</span>
<span class="n">pontos_onibus</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geometries_from_place</span><span class="p">(</span><span class="s2">&quot;Liberdade, São Paulo, Brazil&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;highway&quot;</span><span class="p">:</span> <span class="s2">&quot;bus_stop&quot;</span><span class="p">})</span>

<span class="c1"># Visualizar os primeiros registros e seus atributos</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pontos_onibus</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Listar todas as colunas disponíveis (atributos)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Atributos disponíveis nos pontos de ônibus:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pontos_onibus</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                         bus   highway                           name  \
element_type osmid                                                      
node         1004651491  yes  bus_stop            Rua Barão de Iguape   
             4351857004  yes  bus_stop  Rua Conselheiro Furtado, 1246   
             4353325059  yes  bus_stop   Rua Conselheiro Furtado, 534   
             4374795527  yes  bus_stop    Avenida Lacerda Franco, 282   
             4380804947  yes  bus_stop                            NaN   

                        public_transport   source  \
element_type osmid                                  
node         1004651491         platform  picture   
             4351857004         platform      NaN   
             4353325059         platform      NaN   
             4374795527         platform      NaN   
             4380804947         platform      NaN   

                                            geometry  addr:city bench  bin  \
element_type osmid                                                           
node         1004651491  POINT (-46.63639 -23.55830)        NaN   NaN  NaN   
             4351857004  POINT (-46.63257 -23.56413)  São Paulo   yes  yes   
             4353325059  POINT (-46.63305 -23.55771)  São Paulo   NaN  NaN   
             4374795527  POINT (-46.62278 -23.56514)  São Paulo   yes  NaN   
             4380804947  POINT (-46.63014 -23.56673)  São Paulo    no  NaN   

                                                               description  \
element_type osmid                                                           
node         1004651491                                                NaN   
             4351857004  Ref.: R Pandia Calogeras/ R Senador Felicio Do...   
             4353325059       Ref.: R Barao de Iguape/ R Americo de Campos   
             4374795527                          Ref.: Rua Álvares Ribeiro   
             4380804947                       Ref.: Rua Dom Raimundo Brito   

                         ... covered departures_board addr:housenumber  \
element_type osmid       ...                                             
node         1004651491  ...     NaN              NaN              NaN   
             4351857004  ...     NaN              NaN              NaN   
             4353325059  ...     NaN              NaN              NaN   
             4374795527  ...     yes               no              NaN   
             4380804947  ...     NaN              yes              769   

                        addr:postcode                            addr:street  \
element_type osmid                                                             
node         1004651491           NaN                                    NaN   
             4351857004           NaN                                    NaN   
             4353325059           NaN                                    NaN   
             4374795527           NaN                                    NaN   
             4380804947     01526-000  Bueno de Andrade;Rua Bueno de Andrade   

                        addr:suburb network:wikipedia addr:country  \
element_type osmid                                                   
node         1004651491         NaN               NaN          NaN   
             4351857004         NaN               NaN          NaN   
             4353325059         NaN               NaN          NaN   
             4374795527         NaN               NaN          NaN   
             4380804947   Aclimação               NaN          NaN   

                        gtfs_stop_desc building:levels  
element_type osmid                                      
node         1004651491            NaN             NaN  
             4351857004            NaN             NaN  
             4353325059            NaN             NaN  
             4374795527            NaN             NaN  
             4380804947            NaN             NaN  

[5 rows x 29 columns]
Atributos disponíveis nos pontos de ônibus:
Index([&#39;bus&#39;, &#39;highway&#39;, &#39;name&#39;, &#39;public_transport&#39;, &#39;source&#39;, &#39;geometry&#39;,
       &#39;addr:city&#39;, &#39;bench&#39;, &#39;bin&#39;, &#39;description&#39;, &#39;gtfs_id&#39;, &#39;lit&#39;, &#39;network&#39;,
       &#39;operator&#39;, &#39;route_ref&#39;, &#39;shelter&#39;, &#39;trolleybus&#39;, &#39;wheelchair&#39;,
       &#39;network:wikidata&#39;, &#39;covered&#39;, &#39;departures_board&#39;, &#39;addr:housenumber&#39;,
       &#39;addr:postcode&#39;, &#39;addr:street&#39;, &#39;addr:suburb&#39;, &#39;network:wikipedia&#39;,
       &#39;addr:country&#39;, &#39;gtfs_stop_desc&#39;, &#39;building:levels&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Em seguida, visualizamos os dados obtidos em um mapa interativo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar um mapa centralizado</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.565</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mf">14.5</span><span class="p">)</span>

<span class="c1"># Adicionar os pontos de ônibus ao mapa com números</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">pontos_onibus</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
        <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
            <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span><span class="p">],</span>
            <span class="n">popup</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Ponto </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># Exibir o número do ponto</span>
            <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;info-sign&quot;</span><span class="p">),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Exibir o mapa</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_bfd914b98d3a002422f5b93b7ab0c35e {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_bfd914b98d3a002422f5b93b7ab0c35e&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_bfd914b98d3a002422f5b93b7ab0c35e = L.map(
                &quot;map_bfd914b98d3a002422f5b93b7ab0c35e&quot;,
                {
                    center: [-23.565, -46.6333],
                    crs: L.CRS.EPSG3857,
                    zoom: 14.5,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_445adc348025fb6ca6f81d7d96127c1b = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_445adc348025fb6ca6f81d7d96127c1b.addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var marker_dda21c5db2a524f38c9a774b6a00fda0 = L.marker(
                [-23.5582988, -46.6363862],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_531f3b0a8b470c5d7c462dc521c7addc = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_dda21c5db2a524f38c9a774b6a00fda0.setIcon(icon_531f3b0a8b470c5d7c462dc521c7addc);
        
    
        var popup_9d746d699a99c589607048237fe0be76 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_80d529642aefcd6b2f884366a00218d8 = $(`&lt;div id=&quot;html_80d529642aefcd6b2f884366a00218d8&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 1004651491)&lt;/div&gt;`)[0];
                popup_9d746d699a99c589607048237fe0be76.setContent(html_80d529642aefcd6b2f884366a00218d8);
            
        

        marker_dda21c5db2a524f38c9a774b6a00fda0.bindPopup(popup_9d746d699a99c589607048237fe0be76)
        ;

        
    
    
            var marker_d6cc1754cf24540d1f81a9b9045e9e04 = L.marker(
                [-23.5641278, -46.6325731],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_458b182bd3821cd160e67e3bbfa71fe3 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_d6cc1754cf24540d1f81a9b9045e9e04.setIcon(icon_458b182bd3821cd160e67e3bbfa71fe3);
        
    
        var popup_4ec22c6fa7435d980b0f41c64792f394 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_f4846c873d9d7f5c34cebb54021e07d9 = $(`&lt;div id=&quot;html_f4846c873d9d7f5c34cebb54021e07d9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4351857004)&lt;/div&gt;`)[0];
                popup_4ec22c6fa7435d980b0f41c64792f394.setContent(html_f4846c873d9d7f5c34cebb54021e07d9);
            
        

        marker_d6cc1754cf24540d1f81a9b9045e9e04.bindPopup(popup_4ec22c6fa7435d980b0f41c64792f394)
        ;

        
    
    
            var marker_98767088d2c7ee559d1147bf0178b7f8 = L.marker(
                [-23.557706, -46.6330548],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_dc5cdb5f4a4a17cc3cb6b5987a5f7c5c = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_98767088d2c7ee559d1147bf0178b7f8.setIcon(icon_dc5cdb5f4a4a17cc3cb6b5987a5f7c5c);
        
    
        var popup_782d6824bf0a34b408324d91b6b1b2dc = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3242e3e6163cc281d79b93f02760eaf6 = $(`&lt;div id=&quot;html_3242e3e6163cc281d79b93f02760eaf6&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4353325059)&lt;/div&gt;`)[0];
                popup_782d6824bf0a34b408324d91b6b1b2dc.setContent(html_3242e3e6163cc281d79b93f02760eaf6);
            
        

        marker_98767088d2c7ee559d1147bf0178b7f8.bindPopup(popup_782d6824bf0a34b408324d91b6b1b2dc)
        ;

        
    
    
            var marker_0509e9674dc84de6d088ee08ab61c65d = L.marker(
                [-23.5651423, -46.6227837],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_3c5aa750a8035f07c1256d5fe11a0274 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_0509e9674dc84de6d088ee08ab61c65d.setIcon(icon_3c5aa750a8035f07c1256d5fe11a0274);
        
    
        var popup_eef13c635cff348998b2fe8e9f65797a = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_93cb12bd3221fa6f8a22a8ec5f9c1d92 = $(`&lt;div id=&quot;html_93cb12bd3221fa6f8a22a8ec5f9c1d92&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4374795527)&lt;/div&gt;`)[0];
                popup_eef13c635cff348998b2fe8e9f65797a.setContent(html_93cb12bd3221fa6f8a22a8ec5f9c1d92);
            
        

        marker_0509e9674dc84de6d088ee08ab61c65d.bindPopup(popup_eef13c635cff348998b2fe8e9f65797a)
        ;

        
    
    
            var marker_c47c5d8484d72e29e94fcbe951bc3a92 = L.marker(
                [-23.5667322, -46.6301447],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1564401e2ec9c1572c39727abfd48641 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_c47c5d8484d72e29e94fcbe951bc3a92.setIcon(icon_1564401e2ec9c1572c39727abfd48641);
        
    
        var popup_00256661f31f555f76a00069b2c43550 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_9ef50f18cb6c8dce393e4ec6f9c55c9a = $(`&lt;div id=&quot;html_9ef50f18cb6c8dce393e4ec6f9c55c9a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4380804947)&lt;/div&gt;`)[0];
                popup_00256661f31f555f76a00069b2c43550.setContent(html_9ef50f18cb6c8dce393e4ec6f9c55c9a);
            
        

        marker_c47c5d8484d72e29e94fcbe951bc3a92.bindPopup(popup_00256661f31f555f76a00069b2c43550)
        ;

        
    
    
            var marker_3304b97d6deb13f322af3686fd0ec67f = L.marker(
                [-23.5722132, -46.6409218],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_353304e82f947868e917e8def418b85b = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_3304b97d6deb13f322af3686fd0ec67f.setIcon(icon_353304e82f947868e917e8def418b85b);
        
    
        var popup_9061c01752bbd00b2a64cb0b3b7fb089 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c99731433488a8063c951acba21c13ec = $(`&lt;div id=&quot;html_c99731433488a8063c951acba21c13ec&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4462083444)&lt;/div&gt;`)[0];
                popup_9061c01752bbd00b2a64cb0b3b7fb089.setContent(html_c99731433488a8063c951acba21c13ec);
            
        

        marker_3304b97d6deb13f322af3686fd0ec67f.bindPopup(popup_9061c01752bbd00b2a64cb0b3b7fb089)
        ;

        
    
    
            var marker_0e9190ad2af65f7fadcbc336e4462c4a = L.marker(
                [-23.5583902, -46.6328486],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_a63c10d8fa74c86a7f4882df6d95cb16 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_0e9190ad2af65f7fadcbc336e4462c4a.setIcon(icon_a63c10d8fa74c86a7f4882df6d95cb16);
        
    
        var popup_214b35cbcfafaac15f144c026fbd4e1e = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_fbbf954b2e4eff6617fcce9e34c1e33d = $(`&lt;div id=&quot;html_fbbf954b2e4eff6617fcce9e34c1e33d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 4583142663)&lt;/div&gt;`)[0];
                popup_214b35cbcfafaac15f144c026fbd4e1e.setContent(html_fbbf954b2e4eff6617fcce9e34c1e33d);
            
        

        marker_0e9190ad2af65f7fadcbc336e4462c4a.bindPopup(popup_214b35cbcfafaac15f144c026fbd4e1e)
        ;

        
    
    
            var marker_bf1aa476e974e4af27552ff4e34da17a = L.marker(
                [-23.568571, -46.6330169],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_67b2f884f7c4f1559d779d889917d651 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_bf1aa476e974e4af27552ff4e34da17a.setIcon(icon_67b2f884f7c4f1559d779d889917d651);
        
    
        var popup_5b46bf7f6f05931c58a6749f661483f5 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_d313c16bcab7e344c65216351b3142b4 = $(`&lt;div id=&quot;html_d313c16bcab7e344c65216351b3142b4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5001563651)&lt;/div&gt;`)[0];
                popup_5b46bf7f6f05931c58a6749f661483f5.setContent(html_d313c16bcab7e344c65216351b3142b4);
            
        

        marker_bf1aa476e974e4af27552ff4e34da17a.bindPopup(popup_5b46bf7f6f05931c58a6749f661483f5)
        ;

        
    
    
            var marker_65ab67a01405e090bcd29be8e0b55234 = L.marker(
                [-23.5687797, -46.6330235],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_0568c4a5ef0458ae35a8e078e57b6fb9 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_65ab67a01405e090bcd29be8e0b55234.setIcon(icon_0568c4a5ef0458ae35a8e078e57b6fb9);
        
    
        var popup_2b8872ae0d03118c60318578480dab16 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_90edc815647010ec9dcc37546163a59f = $(`&lt;div id=&quot;html_90edc815647010ec9dcc37546163a59f&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5001576557)&lt;/div&gt;`)[0];
                popup_2b8872ae0d03118c60318578480dab16.setContent(html_90edc815647010ec9dcc37546163a59f);
            
        

        marker_65ab67a01405e090bcd29be8e0b55234.bindPopup(popup_2b8872ae0d03118c60318578480dab16)
        ;

        
    
    
            var marker_bf28c23de17429b54b41cdabf06bf644 = L.marker(
                [-23.5711488, -46.6307168],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_10cea57f1db594011e1290bad8553247 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_bf28c23de17429b54b41cdabf06bf644.setIcon(icon_10cea57f1db594011e1290bad8553247);
        
    
        var popup_0f09c3faa5cc6314988e91e713658777 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_463dad27ba4bfe7759053c8f11df17f4 = $(`&lt;div id=&quot;html_463dad27ba4bfe7759053c8f11df17f4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5001579799)&lt;/div&gt;`)[0];
                popup_0f09c3faa5cc6314988e91e713658777.setContent(html_463dad27ba4bfe7759053c8f11df17f4);
            
        

        marker_bf28c23de17429b54b41cdabf06bf644.bindPopup(popup_0f09c3faa5cc6314988e91e713658777)
        ;

        
    
    
            var marker_c01c192df99acd5dc5551d6e5d437833 = L.marker(
                [-23.5656809, -46.6317604],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_177c7ff84ab51d561f345a234040394f = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_c01c192df99acd5dc5551d6e5d437833.setIcon(icon_177c7ff84ab51d561f345a234040394f);
        
    
        var popup_ec3eab980e54ecd59ae01aec911889a4 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_335d2497e7f1c7b5f899ef27fd4a5190 = $(`&lt;div id=&quot;html_335d2497e7f1c7b5f899ef27fd4a5190&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5001581607)&lt;/div&gt;`)[0];
                popup_ec3eab980e54ecd59ae01aec911889a4.setContent(html_335d2497e7f1c7b5f899ef27fd4a5190);
            
        

        marker_c01c192df99acd5dc5551d6e5d437833.bindPopup(popup_ec3eab980e54ecd59ae01aec911889a4)
        ;

        
    
    
            var marker_62922605e2b8b4adefff5c671c21e6e3 = L.marker(
                [-23.5654693, -46.6311568],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_69d13caa2a83a48b77b3ab7ff2f6d6ee = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_62922605e2b8b4adefff5c671c21e6e3.setIcon(icon_69d13caa2a83a48b77b3ab7ff2f6d6ee);
        
    
        var popup_532ec4b8d2974c76c7873a7fe499cdd5 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_d255ca932f3b6a0c097a8ab7af2f1617 = $(`&lt;div id=&quot;html_d255ca932f3b6a0c097a8ab7af2f1617&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5001582626)&lt;/div&gt;`)[0];
                popup_532ec4b8d2974c76c7873a7fe499cdd5.setContent(html_d255ca932f3b6a0c097a8ab7af2f1617);
            
        

        marker_62922605e2b8b4adefff5c671c21e6e3.bindPopup(popup_532ec4b8d2974c76c7873a7fe499cdd5)
        ;

        
    
    
            var marker_aaffbc7afc7d53eb472120d16918f947 = L.marker(
                [-23.5724284, -46.6243551],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_0dddb7c9e4e420925e6aa0a7307e3578 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_aaffbc7afc7d53eb472120d16918f947.setIcon(icon_0dddb7c9e4e420925e6aa0a7307e3578);
        
    
        var popup_e8bb63530da9556f9be87671454a37cf = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_13b2a89306afdd432d40f31a9b2de8a9 = $(`&lt;div id=&quot;html_13b2a89306afdd432d40f31a9b2de8a9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287818372)&lt;/div&gt;`)[0];
                popup_e8bb63530da9556f9be87671454a37cf.setContent(html_13b2a89306afdd432d40f31a9b2de8a9);
            
        

        marker_aaffbc7afc7d53eb472120d16918f947.bindPopup(popup_e8bb63530da9556f9be87671454a37cf)
        ;

        
    
    
            var marker_b76e82585595a9ee55d2bfeb7ed1d406 = L.marker(
                [-23.5755927, -46.6250394],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1e1f5d999803e27878e3e4a06b62284e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_b76e82585595a9ee55d2bfeb7ed1d406.setIcon(icon_1e1f5d999803e27878e3e4a06b62284e);
        
    
        var popup_ad8af51fbf907346918bcb809ce0e716 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_92a055d5545719b5e29eb118996cf7fd = $(`&lt;div id=&quot;html_92a055d5545719b5e29eb118996cf7fd&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287818373)&lt;/div&gt;`)[0];
                popup_ad8af51fbf907346918bcb809ce0e716.setContent(html_92a055d5545719b5e29eb118996cf7fd);
            
        

        marker_b76e82585595a9ee55d2bfeb7ed1d406.bindPopup(popup_ad8af51fbf907346918bcb809ce0e716)
        ;

        
    
    
            var marker_53b8f474bf8e08a9ba3f0f25d92d8dc1 = L.marker(
                [-23.5714073, -46.6245579],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_c3db2dd8a7410c81a0d9d26e04327b02 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_53b8f474bf8e08a9ba3f0f25d92d8dc1.setIcon(icon_c3db2dd8a7410c81a0d9d26e04327b02);
        
    
        var popup_62bb2c63c329885b29a4b24a047fc0e3 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_dbcc452e31eed83f848bc9ebf9e2cce2 = $(`&lt;div id=&quot;html_dbcc452e31eed83f848bc9ebf9e2cce2&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915570)&lt;/div&gt;`)[0];
                popup_62bb2c63c329885b29a4b24a047fc0e3.setContent(html_dbcc452e31eed83f848bc9ebf9e2cce2);
            
        

        marker_53b8f474bf8e08a9ba3f0f25d92d8dc1.bindPopup(popup_62bb2c63c329885b29a4b24a047fc0e3)
        ;

        
    
    
            var marker_876040deec5f428b24778e12e297c8ec = L.marker(
                [-23.5702679, -46.6260036],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1b8ec286f573b50dd104356f43814877 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_876040deec5f428b24778e12e297c8ec.setIcon(icon_1b8ec286f573b50dd104356f43814877);
        
    
        var popup_d090480574071a2cbd8b7dd8a9e16023 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_1ad748f3b37bd0932c167ca04d33efff = $(`&lt;div id=&quot;html_1ad748f3b37bd0932c167ca04d33efff&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915571)&lt;/div&gt;`)[0];
                popup_d090480574071a2cbd8b7dd8a9e16023.setContent(html_1ad748f3b37bd0932c167ca04d33efff);
            
        

        marker_876040deec5f428b24778e12e297c8ec.bindPopup(popup_d090480574071a2cbd8b7dd8a9e16023)
        ;

        
    
    
            var marker_54a1b9160898b907295e664d0b57ce5b = L.marker(
                [-23.5689526, -46.6271771],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_8e8311c6814cc63777e416aaa95240ad = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_54a1b9160898b907295e664d0b57ce5b.setIcon(icon_8e8311c6814cc63777e416aaa95240ad);
        
    
        var popup_4ba179cd54adef2363e2d6e2562142ff = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a3f4fe6819bc520ba894a9efb2e655e6 = $(`&lt;div id=&quot;html_a3f4fe6819bc520ba894a9efb2e655e6&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915572)&lt;/div&gt;`)[0];
                popup_4ba179cd54adef2363e2d6e2562142ff.setContent(html_a3f4fe6819bc520ba894a9efb2e655e6);
            
        

        marker_54a1b9160898b907295e664d0b57ce5b.bindPopup(popup_4ba179cd54adef2363e2d6e2562142ff)
        ;

        
    
    
            var marker_03a14802247ce6dd7cb5a7e66b7d9539 = L.marker(
                [-23.5680085, -46.6282406],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_4912c8f4053ac4e578ae9b7efc3cc211 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_03a14802247ce6dd7cb5a7e66b7d9539.setIcon(icon_4912c8f4053ac4e578ae9b7efc3cc211);
        
    
        var popup_bf1f21b1af9a6d9b98f706aea7a5563f = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_9b7f267a955afe5093ee3d3d3273f133 = $(`&lt;div id=&quot;html_9b7f267a955afe5093ee3d3d3273f133&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915573)&lt;/div&gt;`)[0];
                popup_bf1f21b1af9a6d9b98f706aea7a5563f.setContent(html_9b7f267a955afe5093ee3d3d3273f133);
            
        

        marker_03a14802247ce6dd7cb5a7e66b7d9539.bindPopup(popup_bf1f21b1af9a6d9b98f706aea7a5563f)
        ;

        
    
    
            var marker_9ac3688fc4b94a3dc74d51fa6c400acc = L.marker(
                [-23.5678303, -46.6286818],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_addd4e0f5631fd66e649663bf9f600d0 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_9ac3688fc4b94a3dc74d51fa6c400acc.setIcon(icon_addd4e0f5631fd66e649663bf9f600d0);
        
    
        var popup_edc2e8630e0ff2932c22f159b70b6161 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_120d4e9ddedec7626a36c3ba845e4e28 = $(`&lt;div id=&quot;html_120d4e9ddedec7626a36c3ba845e4e28&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915574)&lt;/div&gt;`)[0];
                popup_edc2e8630e0ff2932c22f159b70b6161.setContent(html_120d4e9ddedec7626a36c3ba845e4e28);
            
        

        marker_9ac3688fc4b94a3dc74d51fa6c400acc.bindPopup(popup_edc2e8630e0ff2932c22f159b70b6161)
        ;

        
    
    
            var marker_29b4d1261c7dcb90c1cc69a45135352d = L.marker(
                [-23.5666306, -46.6303931],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_d4ef469a7ee4f93d74186481a00b3a3e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_29b4d1261c7dcb90c1cc69a45135352d.setIcon(icon_d4ef469a7ee4f93d74186481a00b3a3e);
        
    
        var popup_b4dfae0012c02e8307f46b64abe81f4a = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c2c0659f6421aac31a5ad04a186baa97 = $(`&lt;div id=&quot;html_c2c0659f6421aac31a5ad04a186baa97&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915575)&lt;/div&gt;`)[0];
                popup_b4dfae0012c02e8307f46b64abe81f4a.setContent(html_c2c0659f6421aac31a5ad04a186baa97);
            
        

        marker_29b4d1261c7dcb90c1cc69a45135352d.bindPopup(popup_b4dfae0012c02e8307f46b64abe81f4a)
        ;

        
    
    
            var marker_138ea4a36a271fef03c3e1774025484e = L.marker(
                [-23.5625397, -46.6315509],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_9968807679a1ba3e28de8b808804bd6e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_138ea4a36a271fef03c3e1774025484e.setIcon(icon_9968807679a1ba3e28de8b808804bd6e);
        
    
        var popup_6e6ec9684b150d8c0c719f6ad81bfb47 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_05b3bc789cac6c38afdc5091e236e6f1 = $(`&lt;div id=&quot;html_05b3bc789cac6c38afdc5091e236e6f1&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915576)&lt;/div&gt;`)[0];
                popup_6e6ec9684b150d8c0c719f6ad81bfb47.setContent(html_05b3bc789cac6c38afdc5091e236e6f1);
            
        

        marker_138ea4a36a271fef03c3e1774025484e.bindPopup(popup_6e6ec9684b150d8c0c719f6ad81bfb47)
        ;

        
    
    
            var marker_60ce42c14cf9b4b88075d6c967953f3e = L.marker(
                [-23.5619851, -46.6327118],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_2d9fe25cd008b2742c98b0db0a7652a4 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_60ce42c14cf9b4b88075d6c967953f3e.setIcon(icon_2d9fe25cd008b2742c98b0db0a7652a4);
        
    
        var popup_eb563e97ec40517b8caa1c733bb2c5f4 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_2c5578f4f0206376c10e5d22e09dd5d1 = $(`&lt;div id=&quot;html_2c5578f4f0206376c10e5d22e09dd5d1&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915577)&lt;/div&gt;`)[0];
                popup_eb563e97ec40517b8caa1c733bb2c5f4.setContent(html_2c5578f4f0206376c10e5d22e09dd5d1);
            
        

        marker_60ce42c14cf9b4b88075d6c967953f3e.bindPopup(popup_eb563e97ec40517b8caa1c733bb2c5f4)
        ;

        
    
    
            var marker_f1990594c9c8a9c97020d698a1500af6 = L.marker(
                [-23.5604348, -46.6313617],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_4dec05c371589e3dc00a3a7309064e76 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_f1990594c9c8a9c97020d698a1500af6.setIcon(icon_4dec05c371589e3dc00a3a7309064e76);
        
    
        var popup_0596452af30c38c56290b8fc0d11cb07 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_2ffba3d4b8bfb7788d8a78a82969459d = $(`&lt;div id=&quot;html_2ffba3d4b8bfb7788d8a78a82969459d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287915578)&lt;/div&gt;`)[0];
                popup_0596452af30c38c56290b8fc0d11cb07.setContent(html_2ffba3d4b8bfb7788d8a78a82969459d);
            
        

        marker_f1990594c9c8a9c97020d698a1500af6.bindPopup(popup_0596452af30c38c56290b8fc0d11cb07)
        ;

        
    
    
            var marker_f57a622ba979343368f3e7ff129cfe5f = L.marker(
                [-23.5597392, -46.6334816],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_69d1b4be2f9c88d641f0754172c120a6 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_f57a622ba979343368f3e7ff129cfe5f.setIcon(icon_69d1b4be2f9c88d641f0754172c120a6);
        
    
        var popup_269fc9ec319c0408806fc680c2fa5867 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_063356321d714f123d18d53331dc9698 = $(`&lt;div id=&quot;html_063356321d714f123d18d53331dc9698&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287953532)&lt;/div&gt;`)[0];
                popup_269fc9ec319c0408806fc680c2fa5867.setContent(html_063356321d714f123d18d53331dc9698);
            
        

        marker_f57a622ba979343368f3e7ff129cfe5f.bindPopup(popup_269fc9ec319c0408806fc680c2fa5867)
        ;

        
    
    
            var marker_ce7722314a2b0e63d42913344e0e3c3c = L.marker(
                [-23.5593311, -46.6329479],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1d43ce8d2407535316dae92d685e97d1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_ce7722314a2b0e63d42913344e0e3c3c.setIcon(icon_1d43ce8d2407535316dae92d685e97d1);
        
    
        var popup_c5f1db4c9f6d3b5e44eb8ac861405b03 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c5e74b59fb36ce59ac33a8da15c0c3ae = $(`&lt;div id=&quot;html_c5e74b59fb36ce59ac33a8da15c0c3ae&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287953533)&lt;/div&gt;`)[0];
                popup_c5f1db4c9f6d3b5e44eb8ac861405b03.setContent(html_c5e74b59fb36ce59ac33a8da15c0c3ae);
            
        

        marker_ce7722314a2b0e63d42913344e0e3c3c.bindPopup(popup_c5f1db4c9f6d3b5e44eb8ac861405b03)
        ;

        
    
    
            var marker_cb968f14f069d749b12f4b65651ceb20 = L.marker(
                [-23.5573903, -46.6341955],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_6112afe409e87d57855d74397f521080 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_cb968f14f069d749b12f4b65651ceb20.setIcon(icon_6112afe409e87d57855d74397f521080);
        
    
        var popup_159c2a21a48ab4a58c8f411f0f401c07 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a6fd55e3c7ffcc669efa0a2cd8fe9803 = $(`&lt;div id=&quot;html_a6fd55e3c7ffcc669efa0a2cd8fe9803&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5287953534)&lt;/div&gt;`)[0];
                popup_159c2a21a48ab4a58c8f411f0f401c07.setContent(html_a6fd55e3c7ffcc669efa0a2cd8fe9803);
            
        

        marker_cb968f14f069d749b12f4b65651ceb20.bindPopup(popup_159c2a21a48ab4a58c8f411f0f401c07)
        ;

        
    
    
            var marker_f45de4bf26dc1b531a4ac4499bfd13e1 = L.marker(
                [-23.5605088, -46.6294346],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_d7569a8965758f7127476195de1f984e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_f45de4bf26dc1b531a4ac4499bfd13e1.setIcon(icon_d7569a8965758f7127476195de1f984e);
        
    
        var popup_096a269d6714c72ceffb05536f94adb2 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3463046e8324b42614bc598863e6e860 = $(`&lt;div id=&quot;html_3463046e8324b42614bc598863e6e860&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5292067294)&lt;/div&gt;`)[0];
                popup_096a269d6714c72ceffb05536f94adb2.setContent(html_3463046e8324b42614bc598863e6e860);
            
        

        marker_f45de4bf26dc1b531a4ac4499bfd13e1.bindPopup(popup_096a269d6714c72ceffb05536f94adb2)
        ;

        
    
    
            var marker_b26e0d317b9c15c0c78c91bff91a591e = L.marker(
                [-23.5618103, -46.6251234],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_3e808dcd790626d7b3b91c1c3dfcd99c = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_b26e0d317b9c15c0c78c91bff91a591e.setIcon(icon_3e808dcd790626d7b3b91c1c3dfcd99c);
        
    
        var popup_0d896b906d5d3fb3d25c1c2277f99406 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_e212b1c81c60d4ec877c18df8e4dd6c3 = $(`&lt;div id=&quot;html_e212b1c81c60d4ec877c18df8e4dd6c3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5292067295)&lt;/div&gt;`)[0];
                popup_0d896b906d5d3fb3d25c1c2277f99406.setContent(html_e212b1c81c60d4ec877c18df8e4dd6c3);
            
        

        marker_b26e0d317b9c15c0c78c91bff91a591e.bindPopup(popup_0d896b906d5d3fb3d25c1c2277f99406)
        ;

        
    
    
            var marker_cbaf8594915f51a46c13dbc77a58e969 = L.marker(
                [-23.568136, -46.623465],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_24e93c69bc8d0e5a43ed6fbfca46f500 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_cbaf8594915f51a46c13dbc77a58e969.setIcon(icon_24e93c69bc8d0e5a43ed6fbfca46f500);
        
    
        var popup_6a6ebdf1ea1675bf6e2ca4a95a613347 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_66f075f17b3d1dfb3a05b3fc52a34e45 = $(`&lt;div id=&quot;html_66f075f17b3d1dfb3a05b3fc52a34e45&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5294012679)&lt;/div&gt;`)[0];
                popup_6a6ebdf1ea1675bf6e2ca4a95a613347.setContent(html_66f075f17b3d1dfb3a05b3fc52a34e45);
            
        

        marker_cbaf8594915f51a46c13dbc77a58e969.bindPopup(popup_6a6ebdf1ea1675bf6e2ca4a95a613347)
        ;

        
    
    
            var marker_e880c84c9b2dc4bd7a6590435b242b69 = L.marker(
                [-23.5707588, -46.6240048],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_df67d8aaf17a9642512e09e1d2ebb999 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_e880c84c9b2dc4bd7a6590435b242b69.setIcon(icon_df67d8aaf17a9642512e09e1d2ebb999);
        
    
        var popup_ce5337687fe1443426c0ca89f7ffc22d = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_1eff4eab883cfd23bd60904a3b4c95ad = $(`&lt;div id=&quot;html_1eff4eab883cfd23bd60904a3b4c95ad&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5294012680)&lt;/div&gt;`)[0];
                popup_ce5337687fe1443426c0ca89f7ffc22d.setContent(html_1eff4eab883cfd23bd60904a3b4c95ad);
            
        

        marker_e880c84c9b2dc4bd7a6590435b242b69.bindPopup(popup_ce5337687fe1443426c0ca89f7ffc22d)
        ;

        
    
    
            var marker_3d5db7111c1b1a5848eac8980115d50d = L.marker(
                [-23.5581922, -46.6281031],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_97fe0a3ac7d12a80b737579e1484e23c = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_3d5db7111c1b1a5848eac8980115d50d.setIcon(icon_97fe0a3ac7d12a80b737579e1484e23c);
        
    
        var popup_1ee5df893eda6163d03d6e141a7222f1 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ef0a5fd6c5ec49e8010f50ab57f7e37b = $(`&lt;div id=&quot;html_ef0a5fd6c5ec49e8010f50ab57f7e37b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5446622135)&lt;/div&gt;`)[0];
                popup_1ee5df893eda6163d03d6e141a7222f1.setContent(html_ef0a5fd6c5ec49e8010f50ab57f7e37b);
            
        

        marker_3d5db7111c1b1a5848eac8980115d50d.bindPopup(popup_1ee5df893eda6163d03d6e141a7222f1)
        ;

        
    
    
            var marker_1046c75309645e5504599222a0305097 = L.marker(
                [-23.5583318, -46.635445],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_eee8f7213363892c16230df25a9c7346 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_1046c75309645e5504599222a0305097.setIcon(icon_eee8f7213363892c16230df25a9c7346);
        
    
        var popup_b27eff1cc2b86c78e7b34b8cc5fd1600 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_cef6ea0d0530b3deec8473a6e26ca904 = $(`&lt;div id=&quot;html_cef6ea0d0530b3deec8473a6e26ca904&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5446622773)&lt;/div&gt;`)[0];
                popup_b27eff1cc2b86c78e7b34b8cc5fd1600.setContent(html_cef6ea0d0530b3deec8473a6e26ca904);
            
        

        marker_1046c75309645e5504599222a0305097.bindPopup(popup_b27eff1cc2b86c78e7b34b8cc5fd1600)
        ;

        
    
    
            var marker_1198f3f833997469ebe056a13117390e = L.marker(
                [-23.5580706, -46.6308638],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_67f196cc4c0fc455a1d186197d5f47f5 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_1198f3f833997469ebe056a13117390e.setIcon(icon_67f196cc4c0fc455a1d186197d5f47f5);
        
    
        var popup_43c6b4b7c42116dd0c2e8e5a4e25763b = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_91d97a3a32a111aa7920f2c7b3ca3d3e = $(`&lt;div id=&quot;html_91d97a3a32a111aa7920f2c7b3ca3d3e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5446623411)&lt;/div&gt;`)[0];
                popup_43c6b4b7c42116dd0c2e8e5a4e25763b.setContent(html_91d97a3a32a111aa7920f2c7b3ca3d3e);
            
        

        marker_1198f3f833997469ebe056a13117390e.bindPopup(popup_43c6b4b7c42116dd0c2e8e5a4e25763b)
        ;

        
    
    
            var marker_89f4199c1a7c56c24863538bc5c912e8 = L.marker(
                [-23.558239, -46.6337083],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_510c31b6b5866cda4cb8fcd5dd27cbfc = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_89f4199c1a7c56c24863538bc5c912e8.setIcon(icon_510c31b6b5866cda4cb8fcd5dd27cbfc);
        
    
        var popup_a10a8c3c0850ebd85ae4535ba9933a27 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_7c7fc28f4a6f89dfe0c98883e407e7c4 = $(`&lt;div id=&quot;html_7c7fc28f4a6f89dfe0c98883e407e7c4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5446625026)&lt;/div&gt;`)[0];
                popup_a10a8c3c0850ebd85ae4535ba9933a27.setContent(html_7c7fc28f4a6f89dfe0c98883e407e7c4);
            
        

        marker_89f4199c1a7c56c24863538bc5c912e8.bindPopup(popup_a10a8c3c0850ebd85ae4535ba9933a27)
        ;

        
    
    
            var marker_b702c1a6ef56f83d8f7b5053ceb5573c = L.marker(
                [-23.5592772, -46.6309284],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_9629e6c2281acbf2cd3ed90faad2c1d6 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_b702c1a6ef56f83d8f7b5053ceb5573c.setIcon(icon_9629e6c2281acbf2cd3ed90faad2c1d6);
        
    
        var popup_c5a7ce37a92df393b9c63b40830aeb4c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_b9412fd4496ca036888cd2023a247c5b = $(`&lt;div id=&quot;html_b9412fd4496ca036888cd2023a247c5b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5448845666)&lt;/div&gt;`)[0];
                popup_c5a7ce37a92df393b9c63b40830aeb4c.setContent(html_b9412fd4496ca036888cd2023a247c5b);
            
        

        marker_b702c1a6ef56f83d8f7b5053ceb5573c.bindPopup(popup_c5a7ce37a92df393b9c63b40830aeb4c)
        ;

        
    
    
            var marker_a92814c489743f3b6e253c7e7d5bd0b9 = L.marker(
                [-23.5588064, -46.6293968],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ec3bb12eccc06fd1c81395012ceb298d = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_a92814c489743f3b6e253c7e7d5bd0b9.setIcon(icon_ec3bb12eccc06fd1c81395012ceb298d);
        
    
        var popup_213ddc0d4050e15981913f583723d819 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_f068dd4fd5b3518f78e7987147fd9579 = $(`&lt;div id=&quot;html_f068dd4fd5b3518f78e7987147fd9579&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5448845667)&lt;/div&gt;`)[0];
                popup_213ddc0d4050e15981913f583723d819.setContent(html_f068dd4fd5b3518f78e7987147fd9579);
            
        

        marker_a92814c489743f3b6e253c7e7d5bd0b9.bindPopup(popup_213ddc0d4050e15981913f583723d819)
        ;

        
    
    
            var marker_e45cf4b8bc847cc7a4fe345aea1b47b7 = L.marker(
                [-23.557047, -46.63377],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_58dc9875921b5619cfefdaf23cae9a6d = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_e45cf4b8bc847cc7a4fe345aea1b47b7.setIcon(icon_58dc9875921b5619cfefdaf23cae9a6d);
        
    
        var popup_50f4b36caf44b33460bd448778c43295 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_7cb7cb9e5e28a1ffa677235375b4a7bf = $(`&lt;div id=&quot;html_7cb7cb9e5e28a1ffa677235375b4a7bf&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5449200553)&lt;/div&gt;`)[0];
                popup_50f4b36caf44b33460bd448778c43295.setContent(html_7cb7cb9e5e28a1ffa677235375b4a7bf);
            
        

        marker_e45cf4b8bc847cc7a4fe345aea1b47b7.bindPopup(popup_50f4b36caf44b33460bd448778c43295)
        ;

        
    
    
            var marker_e275181384765b8b6612f4e523bc880d = L.marker(
                [-23.5569113, -46.6284962],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1769aeac1fe0b31cf4df7448b7768632 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_e275181384765b8b6612f4e523bc880d.setIcon(icon_1769aeac1fe0b31cf4df7448b7768632);
        
    
        var popup_ea4a0f01f42eab215edbcbf4f274fe2f = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_7e8f36f49f88dbeb1da9b96eebd47271 = $(`&lt;div id=&quot;html_7e8f36f49f88dbeb1da9b96eebd47271&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5480124770)&lt;/div&gt;`)[0];
                popup_ea4a0f01f42eab215edbcbf4f274fe2f.setContent(html_7e8f36f49f88dbeb1da9b96eebd47271);
            
        

        marker_e275181384765b8b6612f4e523bc880d.bindPopup(popup_ea4a0f01f42eab215edbcbf4f274fe2f)
        ;

        
    
    
            var marker_37da2027a2b24ebe7add345c0c7213b4 = L.marker(
                [-23.5577471, -46.6267933],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_55af0234dca4fa389ff7720b70886d80 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_37da2027a2b24ebe7add345c0c7213b4.setIcon(icon_55af0234dca4fa389ff7720b70886d80);
        
    
        var popup_e7a0daf732a85b0271d616ae13cd97f7 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ded880b4bc9d093aa989b7e8bafecab7 = $(`&lt;div id=&quot;html_ded880b4bc9d093aa989b7e8bafecab7&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 5480187296)&lt;/div&gt;`)[0];
                popup_e7a0daf732a85b0271d616ae13cd97f7.setContent(html_ded880b4bc9d093aa989b7e8bafecab7);
            
        

        marker_37da2027a2b24ebe7add345c0c7213b4.bindPopup(popup_e7a0daf732a85b0271d616ae13cd97f7)
        ;

        
    
    
            var marker_bc84ab02e951c39ffd4bb51666844bd5 = L.marker(
                [-23.5586876, -46.6349975],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_150c2edcc84079bac76842cdf6cc0ffc = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_bc84ab02e951c39ffd4bb51666844bd5.setIcon(icon_150c2edcc84079bac76842cdf6cc0ffc);
        
    
        var popup_d92c9648674ce16307fb5d249a08cbe9 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_975b7a23bea2afc7f70008b65105251d = $(`&lt;div id=&quot;html_975b7a23bea2afc7f70008b65105251d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 6695735699)&lt;/div&gt;`)[0];
                popup_d92c9648674ce16307fb5d249a08cbe9.setContent(html_975b7a23bea2afc7f70008b65105251d);
            
        

        marker_bc84ab02e951c39ffd4bb51666844bd5.bindPopup(popup_d92c9648674ce16307fb5d249a08cbe9)
        ;

        
    
    
            var marker_28afd1c9583804321092efcc9e42f130 = L.marker(
                [-23.5691297, -46.6268036],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_3c5b50cc26568bf920bbe1a345a2557b = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_28afd1c9583804321092efcc9e42f130.setIcon(icon_3c5b50cc26568bf920bbe1a345a2557b);
        
    
        var popup_f51d71c92e37771c94e7716ccc9ac9b8 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_4eeeafa1fe68a1328b3675f97c6a3427 = $(`&lt;div id=&quot;html_4eeeafa1fe68a1328b3675f97c6a3427&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 7340938193)&lt;/div&gt;`)[0];
                popup_f51d71c92e37771c94e7716ccc9ac9b8.setContent(html_4eeeafa1fe68a1328b3675f97c6a3427);
            
        

        marker_28afd1c9583804321092efcc9e42f130.bindPopup(popup_f51d71c92e37771c94e7716ccc9ac9b8)
        ;

        
    
    
            var marker_2b8722db09e24ca47dcb389f6c158e6a = L.marker(
                [-23.5678396, -46.6263017],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_85ac35b1847899fb859add0615e764e1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_2b8722db09e24ca47dcb389f6c158e6a.setIcon(icon_85ac35b1847899fb859add0615e764e1);
        
    
        var popup_12d84b139688e72644e4edaf20401de0 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_02a69b1610e0c47ea78a0efb89bb5d9c = $(`&lt;div id=&quot;html_02a69b1610e0c47ea78a0efb89bb5d9c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 7340938194)&lt;/div&gt;`)[0];
                popup_12d84b139688e72644e4edaf20401de0.setContent(html_02a69b1610e0c47ea78a0efb89bb5d9c);
            
        

        marker_2b8722db09e24ca47dcb389f6c158e6a.bindPopup(popup_12d84b139688e72644e4edaf20401de0)
        ;

        
    
    
            var marker_a79781939ed3e2f48dc8f0f9e9fdf67e = L.marker(
                [-23.5681377, -46.6334554],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_614d5ec83400f7bb15cdcc2be8148232 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_a79781939ed3e2f48dc8f0f9e9fdf67e.setIcon(icon_614d5ec83400f7bb15cdcc2be8148232);
        
    
        var popup_fb13b5234b0a4762b1226bba3c38e8db = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_747a75cc909efaf542fe1fc3fd5ee4f3 = $(`&lt;div id=&quot;html_747a75cc909efaf542fe1fc3fd5ee4f3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 7988914461)&lt;/div&gt;`)[0];
                popup_fb13b5234b0a4762b1226bba3c38e8db.setContent(html_747a75cc909efaf542fe1fc3fd5ee4f3);
            
        

        marker_a79781939ed3e2f48dc8f0f9e9fdf67e.bindPopup(popup_fb13b5234b0a4762b1226bba3c38e8db)
        ;

        
    
    
            var marker_9818854a91c0b0466cfa399c8568a10a = L.marker(
                [-23.5673556, -46.6333561],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_7ff02ed9c63d55ed244c368e1397fd93 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_9818854a91c0b0466cfa399c8568a10a.setIcon(icon_7ff02ed9c63d55ed244c368e1397fd93);
        
    
        var popup_7bcc4e5cd990d062f95d58d97fc1dbcb = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a29a70d5966dede9ceb1694de3d83588 = $(`&lt;div id=&quot;html_a29a70d5966dede9ceb1694de3d83588&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 7988966680)&lt;/div&gt;`)[0];
                popup_7bcc4e5cd990d062f95d58d97fc1dbcb.setContent(html_a29a70d5966dede9ceb1694de3d83588);
            
        

        marker_9818854a91c0b0466cfa399c8568a10a.bindPopup(popup_7bcc4e5cd990d062f95d58d97fc1dbcb)
        ;

        
    
    
            var marker_638854c5cd67257fca2c2c5954c45333 = L.marker(
                [-23.572665, -46.632951],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_dd1b99d863333cc702a0e436412aec0f = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_638854c5cd67257fca2c2c5954c45333.setIcon(icon_dd1b99d863333cc702a0e436412aec0f);
        
    
        var popup_4f9d4c3a7599e08541c32da3d8677810 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c63292c1c6ea1565b9b436b9d0bbc10d = $(`&lt;div id=&quot;html_c63292c1c6ea1565b9b436b9d0bbc10d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279194839)&lt;/div&gt;`)[0];
                popup_4f9d4c3a7599e08541c32da3d8677810.setContent(html_c63292c1c6ea1565b9b436b9d0bbc10d);
            
        

        marker_638854c5cd67257fca2c2c5954c45333.bindPopup(popup_4f9d4c3a7599e08541c32da3d8677810)
        ;

        
    
    
            var marker_9e05f05b194349649b96139e6ad3b192 = L.marker(
                [-23.562478, -46.629894],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_203b9e090d87bf0baddc8e0ce295d643 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_9e05f05b194349649b96139e6ad3b192.setIcon(icon_203b9e090d87bf0baddc8e0ce295d643);
        
    
        var popup_676994d80334213c4d8ae2e696b517cf = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a7844830bcdcefd693524619f0bd2e66 = $(`&lt;div id=&quot;html_a7844830bcdcefd693524619f0bd2e66&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279194851)&lt;/div&gt;`)[0];
                popup_676994d80334213c4d8ae2e696b517cf.setContent(html_a7844830bcdcefd693524619f0bd2e66);
            
        

        marker_9e05f05b194349649b96139e6ad3b192.bindPopup(popup_676994d80334213c4d8ae2e696b517cf)
        ;

        
    
    
            var marker_ae5a5640873466f4fa0ac7b633c7784c = L.marker(
                [-23.564745, -46.628973],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_c3773445ae0b786d381dea2189a0d8fc = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_ae5a5640873466f4fa0ac7b633c7784c.setIcon(icon_c3773445ae0b786d381dea2189a0d8fc);
        
    
        var popup_d36a95c0f6fe6ac5b8e71ac707eda6ba = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_51447d66eca42591e1692811b1b7ee89 = $(`&lt;div id=&quot;html_51447d66eca42591e1692811b1b7ee89&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279194864)&lt;/div&gt;`)[0];
                popup_d36a95c0f6fe6ac5b8e71ac707eda6ba.setContent(html_51447d66eca42591e1692811b1b7ee89);
            
        

        marker_ae5a5640873466f4fa0ac7b633c7784c.bindPopup(popup_d36a95c0f6fe6ac5b8e71ac707eda6ba)
        ;

        
    
    
            var marker_53ab17fd1075d01844bf3e23819f0976 = L.marker(
                [-23.5573025, -46.6364129],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1637c3e91865e6b0efd750306d717592 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_53ab17fd1075d01844bf3e23819f0976.setIcon(icon_1637c3e91865e6b0efd750306d717592);
        
    
        var popup_447c71d4ce9b227734c3da9c530d0fde = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_8eee7005742bd0bb94a1b849891ca87f = $(`&lt;div id=&quot;html_8eee7005742bd0bb94a1b849891ca87f&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279194868)&lt;/div&gt;`)[0];
                popup_447c71d4ce9b227734c3da9c530d0fde.setContent(html_8eee7005742bd0bb94a1b849891ca87f);
            
        

        marker_53ab17fd1075d01844bf3e23819f0976.bindPopup(popup_447c71d4ce9b227734c3da9c530d0fde)
        ;

        
    
    
            var marker_e6a45221b58191ff3bf55bfaa5f5a9a9 = L.marker(
                [-23.561675, -46.6272298],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_09474b55a7860aa6e3e061568b19122c = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_e6a45221b58191ff3bf55bfaa5f5a9a9.setIcon(icon_09474b55a7860aa6e3e061568b19122c);
        
    
        var popup_a03cbc4f3f94a78d458151917ba1ae39 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0fc5584857196848eabf053326bf0f3e = $(`&lt;div id=&quot;html_0fc5584857196848eabf053326bf0f3e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279194996)&lt;/div&gt;`)[0];
                popup_a03cbc4f3f94a78d458151917ba1ae39.setContent(html_0fc5584857196848eabf053326bf0f3e);
            
        

        marker_e6a45221b58191ff3bf55bfaa5f5a9a9.bindPopup(popup_a03cbc4f3f94a78d458151917ba1ae39)
        ;

        
    
    
            var marker_83cce786387028465375f85e59376b33 = L.marker(
                [-23.564581, -46.635571],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_39c075253b3987e3649374cf7ac00bf6 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_83cce786387028465375f85e59376b33.setIcon(icon_39c075253b3987e3649374cf7ac00bf6);
        
    
        var popup_ab3bd49e18c340c2d19150eb382ea1a8 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_5432e56e3ed2d583f1a0e9add18ff796 = $(`&lt;div id=&quot;html_5432e56e3ed2d583f1a0e9add18ff796&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279195099)&lt;/div&gt;`)[0];
                popup_ab3bd49e18c340c2d19150eb382ea1a8.setContent(html_5432e56e3ed2d583f1a0e9add18ff796);
            
        

        marker_83cce786387028465375f85e59376b33.bindPopup(popup_ab3bd49e18c340c2d19150eb382ea1a8)
        ;

        
    
    
            var marker_a27abc0d15eb1e58c0d280b7486b299f = L.marker(
                [-23.564962, -46.625439],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_8947187cb1e5237f5bd79753bb52889f = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_a27abc0d15eb1e58c0d280b7486b299f.setIcon(icon_8947187cb1e5237f5bd79753bb52889f);
        
    
        var popup_cfe19ed1037abbdda09f574df56801db = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_b81c32703c237b1837221f77bcfb19dc = $(`&lt;div id=&quot;html_b81c32703c237b1837221f77bcfb19dc&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8279195140)&lt;/div&gt;`)[0];
                popup_cfe19ed1037abbdda09f574df56801db.setContent(html_b81c32703c237b1837221f77bcfb19dc);
            
        

        marker_a27abc0d15eb1e58c0d280b7486b299f.bindPopup(popup_cfe19ed1037abbdda09f574df56801db)
        ;

        
    
    
            var marker_18bf52debc721e9d26496bfe7ee19380 = L.marker(
                [-23.573064, -46.63118],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ed529c0c6b320f52ba4b39516b28cad6 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_18bf52debc721e9d26496bfe7ee19380.setIcon(icon_ed529c0c6b320f52ba4b39516b28cad6);
        
    
        var popup_ba16fa0d53a021cf9219f79d8cde9bc6 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_573c39e4c387eee421659e8d395ffff4 = $(`&lt;div id=&quot;html_573c39e4c387eee421659e8d395ffff4&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498367)&lt;/div&gt;`)[0];
                popup_ba16fa0d53a021cf9219f79d8cde9bc6.setContent(html_573c39e4c387eee421659e8d395ffff4);
            
        

        marker_18bf52debc721e9d26496bfe7ee19380.bindPopup(popup_ba16fa0d53a021cf9219f79d8cde9bc6)
        ;

        
    
    
            var marker_0b39ff22f03a6fd845ddf0fcdf0da56c = L.marker(
                [-23.567602, -46.6399608],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_b449bc2e90096f570aa5b662e5b290d7 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_0b39ff22f03a6fd845ddf0fcdf0da56c.setIcon(icon_b449bc2e90096f570aa5b662e5b290d7);
        
    
        var popup_f08aca5173de6343bf99b75552c964da = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_eade9a1abb1a07c5239e08740a0f7479 = $(`&lt;div id=&quot;html_eade9a1abb1a07c5239e08740a0f7479&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498379)&lt;/div&gt;`)[0];
                popup_f08aca5173de6343bf99b75552c964da.setContent(html_eade9a1abb1a07c5239e08740a0f7479);
            
        

        marker_0b39ff22f03a6fd845ddf0fcdf0da56c.bindPopup(popup_f08aca5173de6343bf99b75552c964da)
        ;

        
    
    
            var marker_ca961d92971d676f0c9d80119fc43b89 = L.marker(
                [-23.565048, -46.639509],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_f31963ebca7a55d9124a127901220798 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_ca961d92971d676f0c9d80119fc43b89.setIcon(icon_f31963ebca7a55d9124a127901220798);
        
    
        var popup_cc06e7b0ae6a1f811727ca76ef657e90 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ec4e3069bb4aefc4257febf43daa421b = $(`&lt;div id=&quot;html_ec4e3069bb4aefc4257febf43daa421b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498382)&lt;/div&gt;`)[0];
                popup_cc06e7b0ae6a1f811727ca76ef657e90.setContent(html_ec4e3069bb4aefc4257febf43daa421b);
            
        

        marker_ca961d92971d676f0c9d80119fc43b89.bindPopup(popup_cc06e7b0ae6a1f811727ca76ef657e90)
        ;

        
    
    
            var marker_8102bf88378d2934652eda241a8ccd31 = L.marker(
                [-23.5596657, -46.6379323],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_aac0d207d137f3da8502e01af939880a = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_8102bf88378d2934652eda241a8ccd31.setIcon(icon_aac0d207d137f3da8502e01af939880a);
        
    
        var popup_bd7b81739355f680ceba933ddefed232 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0c412f9cbbd64d95ed732b339dbaea2f = $(`&lt;div id=&quot;html_0c412f9cbbd64d95ed732b339dbaea2f&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498383)&lt;/div&gt;`)[0];
                popup_bd7b81739355f680ceba933ddefed232.setContent(html_0c412f9cbbd64d95ed732b339dbaea2f);
            
        

        marker_8102bf88378d2934652eda241a8ccd31.bindPopup(popup_bd7b81739355f680ceba933ddefed232)
        ;

        
    
    
            var marker_8cae3788a0b4aec66805aa1a8bcab6f0 = L.marker(
                [-23.572223, -46.639792],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_a178e530888dedc4d00115a7f04fdfb1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_8cae3788a0b4aec66805aa1a8bcab6f0.setIcon(icon_a178e530888dedc4d00115a7f04fdfb1);
        
    
        var popup_89d793642f9d9cccf10f40a8d6374746 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_009325f7b522909874fe589f2e1544c9 = $(`&lt;div id=&quot;html_009325f7b522909874fe589f2e1544c9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498384)&lt;/div&gt;`)[0];
                popup_89d793642f9d9cccf10f40a8d6374746.setContent(html_009325f7b522909874fe589f2e1544c9);
            
        

        marker_8cae3788a0b4aec66805aa1a8bcab6f0.bindPopup(popup_89d793642f9d9cccf10f40a8d6374746)
        ;

        
    
    
            var marker_fbd4a805ddaaaa5344b3310f9353264b = L.marker(
                [-23.566017, -46.6394],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_30256d98d28346620eb6cd350a02ef89 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_fbd4a805ddaaaa5344b3310f9353264b.setIcon(icon_30256d98d28346620eb6cd350a02ef89);
        
    
        var popup_ff00fc55fcfc4609bf808b4e6788f070 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c0d7c960f9ce3130a86c22d76303f51d = $(`&lt;div id=&quot;html_c0d7c960f9ce3130a86c22d76303f51d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498385)&lt;/div&gt;`)[0];
                popup_ff00fc55fcfc4609bf808b4e6788f070.setContent(html_c0d7c960f9ce3130a86c22d76303f51d);
            
        

        marker_fbd4a805ddaaaa5344b3310f9353264b.bindPopup(popup_ff00fc55fcfc4609bf808b4e6788f070)
        ;

        
    
    
            var marker_ad302f31c24233771e547ecd4dd4eaea = L.marker(
                [-23.556829, -46.6364725],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ae3c17fd5368dcc649602fe76e6d8da0 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_ad302f31c24233771e547ecd4dd4eaea.setIcon(icon_ae3c17fd5368dcc649602fe76e6d8da0);
        
    
        var popup_c76d250440aa98b84a2790055f360424 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_71bed9b63e5a6b742ccd02044da6d74b = $(`&lt;div id=&quot;html_71bed9b63e5a6b742ccd02044da6d74b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498386)&lt;/div&gt;`)[0];
                popup_c76d250440aa98b84a2790055f360424.setContent(html_71bed9b63e5a6b742ccd02044da6d74b);
            
        

        marker_ad302f31c24233771e547ecd4dd4eaea.bindPopup(popup_c76d250440aa98b84a2790055f360424)
        ;

        
    
    
            var marker_a941b2e9142112016138b8170e7b67ad = L.marker(
                [-23.5717675, -46.6399283],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_0933e9143df2fa5a8af4bcf43c84a401 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_a941b2e9142112016138b8170e7b67ad.setIcon(icon_0933e9143df2fa5a8af4bcf43c84a401);
        
    
        var popup_fab53f6ec31ecb4299aca337d704d688 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3eb4418786bf45afbdf395d21df315bf = $(`&lt;div id=&quot;html_3eb4418786bf45afbdf395d21df315bf&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498387)&lt;/div&gt;`)[0];
                popup_fab53f6ec31ecb4299aca337d704d688.setContent(html_3eb4418786bf45afbdf395d21df315bf);
            
        

        marker_a941b2e9142112016138b8170e7b67ad.bindPopup(popup_fab53f6ec31ecb4299aca337d704d688)
        ;

        
    
    
            var marker_70bb1bf251db33a8029a631fd0a2ecfa = L.marker(
                [-23.573844, -46.6306195],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_2dcaf9705b3df3540f752e664547a042 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_70bb1bf251db33a8029a631fd0a2ecfa.setIcon(icon_2dcaf9705b3df3540f752e664547a042);
        
    
        var popup_5a5dbef1626068bf258b0abbf9b97351 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_920a10b9541e83e7b7f570b3391997e5 = $(`&lt;div id=&quot;html_920a10b9541e83e7b7f570b3391997e5&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498396)&lt;/div&gt;`)[0];
                popup_5a5dbef1626068bf258b0abbf9b97351.setContent(html_920a10b9541e83e7b7f570b3391997e5);
            
        

        marker_70bb1bf251db33a8029a631fd0a2ecfa.bindPopup(popup_5a5dbef1626068bf258b0abbf9b97351)
        ;

        
    
    
            var marker_f94b3858663ce49eca52b154134d63b7 = L.marker(
                [-23.5743263, -46.6315743],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_d9fb80df17dd80a211f8cbda5faf67e1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_f94b3858663ce49eca52b154134d63b7.setIcon(icon_d9fb80df17dd80a211f8cbda5faf67e1);
        
    
        var popup_d93cf57f5f73a25f1bfacc9ca30ae38a = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_99487e7e33edf481ac2c9d4f4ff1579a = $(`&lt;div id=&quot;html_99487e7e33edf481ac2c9d4f4ff1579a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498397)&lt;/div&gt;`)[0];
                popup_d93cf57f5f73a25f1bfacc9ca30ae38a.setContent(html_99487e7e33edf481ac2c9d4f4ff1579a);
            
        

        marker_f94b3858663ce49eca52b154134d63b7.bindPopup(popup_d93cf57f5f73a25f1bfacc9ca30ae38a)
        ;

        
    
    
            var marker_02369b07d8e0dfcc8217f6d289d1dd92 = L.marker(
                [-23.574697, -46.633069],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_345c966b8964afb1a30ea105bb870517 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_02369b07d8e0dfcc8217f6d289d1dd92.setIcon(icon_345c966b8964afb1a30ea105bb870517);
        
    
        var popup_d3e305309e919ea92ef605b8347ba855 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_7263983e8cff7dc2ba66b1da92c0ee69 = $(`&lt;div id=&quot;html_7263983e8cff7dc2ba66b1da92c0ee69&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498398)&lt;/div&gt;`)[0];
                popup_d3e305309e919ea92ef605b8347ba855.setContent(html_7263983e8cff7dc2ba66b1da92c0ee69);
            
        

        marker_02369b07d8e0dfcc8217f6d289d1dd92.bindPopup(popup_d3e305309e919ea92ef605b8347ba855)
        ;

        
    
    
            var marker_9b10db964eb7ea0c46f9cc9eb026c1d1 = L.marker(
                [-23.5744038, -46.632205],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_4e3e35d202f8673ca5c459d6c5a81886 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_9b10db964eb7ea0c46f9cc9eb026c1d1.setIcon(icon_4e3e35d202f8673ca5c459d6c5a81886);
        
    
        var popup_59965f43af535b5d72306b5cbca61a1f = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0987fb15fca76b848a7d23d7c4afe267 = $(`&lt;div id=&quot;html_0987fb15fca76b848a7d23d7c4afe267&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498399)&lt;/div&gt;`)[0];
                popup_59965f43af535b5d72306b5cbca61a1f.setContent(html_0987fb15fca76b848a7d23d7c4afe267);
            
        

        marker_9b10db964eb7ea0c46f9cc9eb026c1d1.bindPopup(popup_59965f43af535b5d72306b5cbca61a1f)
        ;

        
    
    
            var marker_e3cb7092cdf0e3502c5704fb7692fc93 = L.marker(
                [-23.5713954, -46.6282014],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_8a3a95678920398a82cdb4c2d5984f12 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_e3cb7092cdf0e3502c5704fb7692fc93.setIcon(icon_8a3a95678920398a82cdb4c2d5984f12);
        
    
        var popup_9016ac3c545d3bc8b7fb1c68a5b31566 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_a2a0eacf33438251de410e58087ce47d = $(`&lt;div id=&quot;html_a2a0eacf33438251de410e58087ce47d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498400)&lt;/div&gt;`)[0];
                popup_9016ac3c545d3bc8b7fb1c68a5b31566.setContent(html_a2a0eacf33438251de410e58087ce47d);
            
        

        marker_e3cb7092cdf0e3502c5704fb7692fc93.bindPopup(popup_9016ac3c545d3bc8b7fb1c68a5b31566)
        ;

        
    
    
            var marker_d18b7c473abaae7ec45e4a37f397c509 = L.marker(
                [-23.571435, -46.6283506],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_8ae2f1e814739454432ab9038ffe0db8 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_d18b7c473abaae7ec45e4a37f397c509.setIcon(icon_8ae2f1e814739454432ab9038ffe0db8);
        
    
        var popup_c4b3ac8ac2856060d733db091bb2d4e0 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_04e83ff14d95ee0b979f451514e56098 = $(`&lt;div id=&quot;html_04e83ff14d95ee0b979f451514e56098&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420498410)&lt;/div&gt;`)[0];
                popup_c4b3ac8ac2856060d733db091bb2d4e0.setContent(html_04e83ff14d95ee0b979f451514e56098);
            
        

        marker_d18b7c473abaae7ec45e4a37f397c509.bindPopup(popup_c4b3ac8ac2856060d733db091bb2d4e0)
        ;

        
    
    
            var marker_efdfd80b85eb0f3c037448d3fba8a370 = L.marker(
                [-23.578018, -46.629184],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ab4f09a26b8dc44a4ad873b265b6f004 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_efdfd80b85eb0f3c037448d3fba8a370.setIcon(icon_ab4f09a26b8dc44a4ad873b265b6f004);
        
    
        var popup_5153a44aa6294e7c6fa37abbab3935ac = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_76ed267731ad4dc5421fa8f03749fdde = $(`&lt;div id=&quot;html_76ed267731ad4dc5421fa8f03749fdde&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594519)&lt;/div&gt;`)[0];
                popup_5153a44aa6294e7c6fa37abbab3935ac.setContent(html_76ed267731ad4dc5421fa8f03749fdde);
            
        

        marker_efdfd80b85eb0f3c037448d3fba8a370.bindPopup(popup_5153a44aa6294e7c6fa37abbab3935ac)
        ;

        
    
    
            var marker_55e2735a1cdf2bfa205c1b7055bdf5b2 = L.marker(
                [-23.575834, -46.6296039],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_d5a5c01e00cf4de0f8e33b4db53ed50a = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_55e2735a1cdf2bfa205c1b7055bdf5b2.setIcon(icon_d5a5c01e00cf4de0f8e33b4db53ed50a);
        
    
        var popup_a4d6c92efb5e5f644c6fb4763cdb5f81 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_471f3901e5cf14ba83ea3b08bf95f44d = $(`&lt;div id=&quot;html_471f3901e5cf14ba83ea3b08bf95f44d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594521)&lt;/div&gt;`)[0];
                popup_a4d6c92efb5e5f644c6fb4763cdb5f81.setContent(html_471f3901e5cf14ba83ea3b08bf95f44d);
            
        

        marker_55e2735a1cdf2bfa205c1b7055bdf5b2.bindPopup(popup_a4d6c92efb5e5f644c6fb4763cdb5f81)
        ;

        
    
    
            var marker_ec005e56226fa004204cd2e26e2cbe08 = L.marker(
                [-23.5661869, -46.6253726],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_a339feecfc807c350efa81761a2f0951 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_ec005e56226fa004204cd2e26e2cbe08.setIcon(icon_a339feecfc807c350efa81761a2f0951);
        
    
        var popup_f30325be532aee1cddec63721284c591 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_1f59b437831674f2d33c9e988d36d915 = $(`&lt;div id=&quot;html_1f59b437831674f2d33c9e988d36d915&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594522)&lt;/div&gt;`)[0];
                popup_f30325be532aee1cddec63721284c591.setContent(html_1f59b437831674f2d33c9e988d36d915);
            
        

        marker_ec005e56226fa004204cd2e26e2cbe08.bindPopup(popup_f30325be532aee1cddec63721284c591)
        ;

        
    
    
            var marker_a78323e4763bd2ea79407bc6d60ebf8a = L.marker(
                [-23.564762, -46.624469],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_cf739c5e037777f735cbef7db07f954a = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_a78323e4763bd2ea79407bc6d60ebf8a.setIcon(icon_cf739c5e037777f735cbef7db07f954a);
        
    
        var popup_ba22da13b2d8f0dd24865f6a4148be8c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_45a08e8b255ecaa38843d1f9a1f4b1d9 = $(`&lt;div id=&quot;html_45a08e8b255ecaa38843d1f9a1f4b1d9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594523)&lt;/div&gt;`)[0];
                popup_ba22da13b2d8f0dd24865f6a4148be8c.setContent(html_45a08e8b255ecaa38843d1f9a1f4b1d9);
            
        

        marker_a78323e4763bd2ea79407bc6d60ebf8a.bindPopup(popup_ba22da13b2d8f0dd24865f6a4148be8c)
        ;

        
    
    
            var marker_5f75bdd6be7cd7ca862002f054b50fe1 = L.marker(
                [-23.5667811, -46.6256046],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ffb073c1f72fb4d8fa2e4ca3006cf115 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_5f75bdd6be7cd7ca862002f054b50fe1.setIcon(icon_ffb073c1f72fb4d8fa2e4ca3006cf115);
        
    
        var popup_a54ea6a2f341101504cfee9009531dc9 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_aa659d5f0c8be5f5659e93d74377ea35 = $(`&lt;div id=&quot;html_aa659d5f0c8be5f5659e93d74377ea35&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594524)&lt;/div&gt;`)[0];
                popup_a54ea6a2f341101504cfee9009531dc9.setContent(html_aa659d5f0c8be5f5659e93d74377ea35);
            
        

        marker_5f75bdd6be7cd7ca862002f054b50fe1.bindPopup(popup_a54ea6a2f341101504cfee9009531dc9)
        ;

        
    
    
            var marker_6131bf64c3b1f3f0c45819baf37b7cd7 = L.marker(
                [-23.5678095, -46.6353363],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_d7b88e60bfbb23b193d3aeb4b8a696c1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_6131bf64c3b1f3f0c45819baf37b7cd7.setIcon(icon_d7b88e60bfbb23b193d3aeb4b8a696c1);
        
    
        var popup_5644c08111313994178a3f44d8c46263 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_fa30d060229e12e20882c09dae105925 = $(`&lt;div id=&quot;html_fa30d060229e12e20882c09dae105925&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594528)&lt;/div&gt;`)[0];
                popup_5644c08111313994178a3f44d8c46263.setContent(html_fa30d060229e12e20882c09dae105925);
            
        

        marker_6131bf64c3b1f3f0c45819baf37b7cd7.bindPopup(popup_5644c08111313994178a3f44d8c46263)
        ;

        
    
    
            var marker_dc0776df8a9bb563899f5dc917a91859 = L.marker(
                [-23.563157, -46.626101],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_61fb8ef7d103eb037af8d86c7b9fb49d = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_dc0776df8a9bb563899f5dc917a91859.setIcon(icon_61fb8ef7d103eb037af8d86c7b9fb49d);
        
    
        var popup_101ffb2192d63ed3ebb249dbbf2f755d = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3d2a21d844d80c7484bb010c204ede7e = $(`&lt;div id=&quot;html_3d2a21d844d80c7484bb010c204ede7e&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594551)&lt;/div&gt;`)[0];
                popup_101ffb2192d63ed3ebb249dbbf2f755d.setContent(html_3d2a21d844d80c7484bb010c204ede7e);
            
        

        marker_dc0776df8a9bb563899f5dc917a91859.bindPopup(popup_101ffb2192d63ed3ebb249dbbf2f755d)
        ;

        
    
    
            var marker_7fe98b9c40373e5946343a1240e92496 = L.marker(
                [-23.5633341, -46.6265382],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_6a3fb841552cee74d954018f095a28f4 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_7fe98b9c40373e5946343a1240e92496.setIcon(icon_6a3fb841552cee74d954018f095a28f4);
        
    
        var popup_05ee1297464030a33237d641f9ecd83a = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_2562b248cf33983f8e1e96b099701c6b = $(`&lt;div id=&quot;html_2562b248cf33983f8e1e96b099701c6b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594552)&lt;/div&gt;`)[0];
                popup_05ee1297464030a33237d641f9ecd83a.setContent(html_2562b248cf33983f8e1e96b099701c6b);
            
        

        marker_7fe98b9c40373e5946343a1240e92496.bindPopup(popup_05ee1297464030a33237d641f9ecd83a)
        ;

        
    
    
            var marker_4f019f5e99de11ffc616fce6a0668b80 = L.marker(
                [-23.564166, -46.625089],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_3e1e8ad8c4c7ecd68a9bfd3c1aab2567 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_4f019f5e99de11ffc616fce6a0668b80.setIcon(icon_3e1e8ad8c4c7ecd68a9bfd3c1aab2567);
        
    
        var popup_5fc22790aa3037b36a1f7c0b8fadf6a6 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_6ab788f218714a2ab3580128d682ff42 = $(`&lt;div id=&quot;html_6ab788f218714a2ab3580128d682ff42&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594555)&lt;/div&gt;`)[0];
                popup_5fc22790aa3037b36a1f7c0b8fadf6a6.setContent(html_6ab788f218714a2ab3580128d682ff42);
            
        

        marker_4f019f5e99de11ffc616fce6a0668b80.bindPopup(popup_5fc22790aa3037b36a1f7c0b8fadf6a6)
        ;

        
    
    
            var marker_f97092f66dd5b868839de44006e6b447 = L.marker(
                [-23.563404, -46.640031],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_69d86ace96cfff8dd38bd3223fec9459 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_f97092f66dd5b868839de44006e6b447.setIcon(icon_69d86ace96cfff8dd38bd3223fec9459);
        
    
        var popup_7b8ffd8e9e49862f86c48526ed5c726b = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_143ecd8d398dbf1c096e4d181ed75b5f = $(`&lt;div id=&quot;html_143ecd8d398dbf1c096e4d181ed75b5f&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594567)&lt;/div&gt;`)[0];
                popup_7b8ffd8e9e49862f86c48526ed5c726b.setContent(html_143ecd8d398dbf1c096e4d181ed75b5f);
            
        

        marker_f97092f66dd5b868839de44006e6b447.bindPopup(popup_7b8ffd8e9e49862f86c48526ed5c726b)
        ;

        
    
    
            var marker_7fff8e73022e6225ff674336653079f8 = L.marker(
                [-23.557395, -46.637872],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_1824cf6f2b65fe661d9a59e0fd963f39 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_7fff8e73022e6225ff674336653079f8.setIcon(icon_1824cf6f2b65fe661d9a59e0fd963f39);
        
    
        var popup_7595fd4643bb54354fdb67c4ed132eaf = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_cdfd716f54de164828f5823673bfd841 = $(`&lt;div id=&quot;html_cdfd716f54de164828f5823673bfd841&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594569)&lt;/div&gt;`)[0];
                popup_7595fd4643bb54354fdb67c4ed132eaf.setContent(html_cdfd716f54de164828f5823673bfd841);
            
        

        marker_7fff8e73022e6225ff674336653079f8.bindPopup(popup_7595fd4643bb54354fdb67c4ed132eaf)
        ;

        
    
    
            var marker_89d9c5b36c0bdbd5be30a6079c211dc2 = L.marker(
                [-23.562561, -46.6346577],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ebcfe387a32b543081c9d84d4264fe58 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_89d9c5b36c0bdbd5be30a6079c211dc2.setIcon(icon_ebcfe387a32b543081c9d84d4264fe58);
        
    
        var popup_584a5bf702217426271320adf78755e0 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_355165bb8331f914f02fd2bbc762ac56 = $(`&lt;div id=&quot;html_355165bb8331f914f02fd2bbc762ac56&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594578)&lt;/div&gt;`)[0];
                popup_584a5bf702217426271320adf78755e0.setContent(html_355165bb8331f914f02fd2bbc762ac56);
            
        

        marker_89d9c5b36c0bdbd5be30a6079c211dc2.bindPopup(popup_584a5bf702217426271320adf78755e0)
        ;

        
    
    
            var marker_c78d18e9507873022bdeb19535b155d0 = L.marker(
                [-23.5693045, -46.6364718],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_f4ae554daa0265cc9dd8c43d20520f7e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_c78d18e9507873022bdeb19535b155d0.setIcon(icon_f4ae554daa0265cc9dd8c43d20520f7e);
        
    
        var popup_e58c4e48d2ecb89505ee4dacc61ba914 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_f1935b09f450ac57dbf2d1c9b6d34cac = $(`&lt;div id=&quot;html_f1935b09f450ac57dbf2d1c9b6d34cac&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594616)&lt;/div&gt;`)[0];
                popup_e58c4e48d2ecb89505ee4dacc61ba914.setContent(html_f1935b09f450ac57dbf2d1c9b6d34cac);
            
        

        marker_c78d18e9507873022bdeb19535b155d0.bindPopup(popup_e58c4e48d2ecb89505ee4dacc61ba914)
        ;

        
    
    
            var marker_b72b58c5fb99ffa921eb93c341783abd = L.marker(
                [-23.5702801, -46.6342305],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_7be4fb42d68a30bc534e8de574629dbe = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_b72b58c5fb99ffa921eb93c341783abd.setIcon(icon_7be4fb42d68a30bc534e8de574629dbe);
        
    
        var popup_46dd7193f42374b8ac00463304c056d7 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0991abdc4da9007a6e39815c70c35faa = $(`&lt;div id=&quot;html_0991abdc4da9007a6e39815c70c35faa&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594618)&lt;/div&gt;`)[0];
                popup_46dd7193f42374b8ac00463304c056d7.setContent(html_0991abdc4da9007a6e39815c70c35faa);
            
        

        marker_b72b58c5fb99ffa921eb93c341783abd.bindPopup(popup_46dd7193f42374b8ac00463304c056d7)
        ;

        
    
    
            var marker_5e31e7dbeb8696baeb84b37bfc854fd6 = L.marker(
                [-23.5734569, -46.631577],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_170e6d0f60ea3cd954d8410a8baf05af = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_5e31e7dbeb8696baeb84b37bfc854fd6.setIcon(icon_170e6d0f60ea3cd954d8410a8baf05af);
        
    
        var popup_45a7429425d94be01daa343cf3034d00 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_d6e28ac346a1045257479bf442171cef = $(`&lt;div id=&quot;html_d6e28ac346a1045257479bf442171cef&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594623)&lt;/div&gt;`)[0];
                popup_45a7429425d94be01daa343cf3034d00.setContent(html_d6e28ac346a1045257479bf442171cef);
            
        

        marker_5e31e7dbeb8696baeb84b37bfc854fd6.bindPopup(popup_45a7429425d94be01daa343cf3034d00)
        ;

        
    
    
            var marker_107bd23cf600952f3567e546f084c011 = L.marker(
                [-23.5641051, -46.6293612],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_995ae1e6a273f2a983cd5c0015a5a48a = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_107bd23cf600952f3567e546f084c011.setIcon(icon_995ae1e6a273f2a983cd5c0015a5a48a);
        
    
        var popup_599b7e51f7e5de63b3da42f2bc3979d5 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_bab46c21bd1adef77bead1b74c2f10df = $(`&lt;div id=&quot;html_bab46c21bd1adef77bead1b74c2f10df&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594628)&lt;/div&gt;`)[0];
                popup_599b7e51f7e5de63b3da42f2bc3979d5.setContent(html_bab46c21bd1adef77bead1b74c2f10df);
            
        

        marker_107bd23cf600952f3567e546f084c011.bindPopup(popup_599b7e51f7e5de63b3da42f2bc3979d5)
        ;

        
    
    
            var marker_d4f8cde04f0eb8df22139d0b521750fb = L.marker(
                [-23.5643218, -46.6279657],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_50b4719ab632c377113c4c633b2cddfd = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_d4f8cde04f0eb8df22139d0b521750fb.setIcon(icon_50b4719ab632c377113c4c633b2cddfd);
        
    
        var popup_9e6da8ab21240400e6e3f040657e98be = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_5df39a4fc275938cfbf46b61caa44eae = $(`&lt;div id=&quot;html_5df39a4fc275938cfbf46b61caa44eae&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594629)&lt;/div&gt;`)[0];
                popup_9e6da8ab21240400e6e3f040657e98be.setContent(html_5df39a4fc275938cfbf46b61caa44eae);
            
        

        marker_d4f8cde04f0eb8df22139d0b521750fb.bindPopup(popup_9e6da8ab21240400e6e3f040657e98be)
        ;

        
    
    
            var marker_5708ea7a5bafdd0bd1f28a3adfdbe5d3 = L.marker(
                [-23.562561, -46.627408],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_e600d0a670760f13b69e57f1af4b5089 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_5708ea7a5bafdd0bd1f28a3adfdbe5d3.setIcon(icon_e600d0a670760f13b69e57f1af4b5089);
        
    
        var popup_f47099aa07d9f6a95deebba76ed6aec4 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_968c9f5cd76340540027a7a8ac6dae19 = $(`&lt;div id=&quot;html_968c9f5cd76340540027a7a8ac6dae19&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594631)&lt;/div&gt;`)[0];
                popup_f47099aa07d9f6a95deebba76ed6aec4.setContent(html_968c9f5cd76340540027a7a8ac6dae19);
            
        

        marker_5708ea7a5bafdd0bd1f28a3adfdbe5d3.bindPopup(popup_f47099aa07d9f6a95deebba76ed6aec4)
        ;

        
    
    
            var marker_23efae43988ae0e51265a509ab77a6fd = L.marker(
                [-23.5632703, -46.6308963],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_e5e9bdc66b4bd8f742eebaa649953be1 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_23efae43988ae0e51265a509ab77a6fd.setIcon(icon_e5e9bdc66b4bd8f742eebaa649953be1);
        
    
        var popup_fbbd8a291cd1ab830c4e4f9fa4ddfe2c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_340c9d1e3639d2d3e3d59c0d617f4e6c = $(`&lt;div id=&quot;html_340c9d1e3639d2d3e3d59c0d617f4e6c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594632)&lt;/div&gt;`)[0];
                popup_fbbd8a291cd1ab830c4e4f9fa4ddfe2c.setContent(html_340c9d1e3639d2d3e3d59c0d617f4e6c);
            
        

        marker_23efae43988ae0e51265a509ab77a6fd.bindPopup(popup_fbbd8a291cd1ab830c4e4f9fa4ddfe2c)
        ;

        
    
    
            var marker_0fef98e1c7e688bfde8711fb6000c3a4 = L.marker(
                [-23.56507, -46.627284],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_8f718d7a64ef174dfeba74cdaa0a9b00 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_0fef98e1c7e688bfde8711fb6000c3a4.setIcon(icon_8f718d7a64ef174dfeba74cdaa0a9b00);
        
    
        var popup_1be02572d92c33cb0c497edd745259cb = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_ccdcabaafcfaa8eab663999e328c22fd = $(`&lt;div id=&quot;html_ccdcabaafcfaa8eab663999e328c22fd&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594633)&lt;/div&gt;`)[0];
                popup_1be02572d92c33cb0c497edd745259cb.setContent(html_ccdcabaafcfaa8eab663999e328c22fd);
            
        

        marker_0fef98e1c7e688bfde8711fb6000c3a4.bindPopup(popup_1be02572d92c33cb0c497edd745259cb)
        ;

        
    
    
            var marker_537c8e10849854b9b5b80575e926508c = L.marker(
                [-23.566563, -46.637071],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_9f18c5d4f2def20d5149a24578530faf = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_537c8e10849854b9b5b80575e926508c.setIcon(icon_9f18c5d4f2def20d5149a24578530faf);
        
    
        var popup_6b902071a5732bb7d56e74df4410f9eb = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_2cab516e0efc8d33dfee1cb590cb342a = $(`&lt;div id=&quot;html_2cab516e0efc8d33dfee1cb590cb342a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594639)&lt;/div&gt;`)[0];
                popup_6b902071a5732bb7d56e74df4410f9eb.setContent(html_2cab516e0efc8d33dfee1cb590cb342a);
            
        

        marker_537c8e10849854b9b5b80575e926508c.bindPopup(popup_6b902071a5732bb7d56e74df4410f9eb)
        ;

        
    
    
            var marker_373c19a19735d42bc19a96540e08fd2c = L.marker(
                [-23.564596, -46.635395],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_5811421cf1f9b33a59e1e6e0c43d4ab0 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_373c19a19735d42bc19a96540e08fd2c.setIcon(icon_5811421cf1f9b33a59e1e6e0c43d4ab0);
        
    
        var popup_0bb6baeff11bf55479438fb84ef08564 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_b1c83337da8285dff6d67234b55a5301 = $(`&lt;div id=&quot;html_b1c83337da8285dff6d67234b55a5301&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594642)&lt;/div&gt;`)[0];
                popup_0bb6baeff11bf55479438fb84ef08564.setContent(html_b1c83337da8285dff6d67234b55a5301);
            
        

        marker_373c19a19735d42bc19a96540e08fd2c.bindPopup(popup_0bb6baeff11bf55479438fb84ef08564)
        ;

        
    
    
            var marker_46f29c03b8e9ea94ccad6cd2d9cf21b6 = L.marker(
                [-23.5625056, -46.6337681],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_c6c50fd1e76ad7dc17294b531fcc2918 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_46f29c03b8e9ea94ccad6cd2d9cf21b6.setIcon(icon_c6c50fd1e76ad7dc17294b531fcc2918);
        
    
        var popup_ceee4c05db1bae4983b4e61c726579cf = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_c230cf5aea909a2e693acd9ea0701d49 = $(`&lt;div id=&quot;html_c230cf5aea909a2e693acd9ea0701d49&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8420594644)&lt;/div&gt;`)[0];
                popup_ceee4c05db1bae4983b4e61c726579cf.setContent(html_c230cf5aea909a2e693acd9ea0701d49);
            
        

        marker_46f29c03b8e9ea94ccad6cd2d9cf21b6.bindPopup(popup_ceee4c05db1bae4983b4e61c726579cf)
        ;

        
    
    
            var marker_eb4d7a3b7070020d8e4a0ef884b6af1d = L.marker(
                [-23.5633734, -46.6320374],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_ce5b0af5bc2803601e5f027cbf7095e9 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_eb4d7a3b7070020d8e4a0ef884b6af1d.setIcon(icon_ce5b0af5bc2803601e5f027cbf7095e9);
        
    
        var popup_2a417f16905019a09a020869e21c5dbb = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_e681b0865bcf374a08cc467358ff598d = $(`&lt;div id=&quot;html_e681b0865bcf374a08cc467358ff598d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8851405650)&lt;/div&gt;`)[0];
                popup_2a417f16905019a09a020869e21c5dbb.setContent(html_e681b0865bcf374a08cc467358ff598d);
            
        

        marker_eb4d7a3b7070020d8e4a0ef884b6af1d.bindPopup(popup_2a417f16905019a09a020869e21c5dbb)
        ;

        
    
    
            var marker_73f553a5803a2e25ebc5ecd66229f9b6 = L.marker(
                [-23.570974, -46.631394],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_c523f98beb6da03f404895ea63f3beaa = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_73f553a5803a2e25ebc5ecd66229f9b6.setIcon(icon_c523f98beb6da03f404895ea63f3beaa);
        
    
        var popup_4ad6083a1a0bf0562da77829d20c29af = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_12e4b8a7245252e579694d411233791a = $(`&lt;div id=&quot;html_12e4b8a7245252e579694d411233791a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 8851405653)&lt;/div&gt;`)[0];
                popup_4ad6083a1a0bf0562da77829d20c29af.setContent(html_12e4b8a7245252e579694d411233791a);
            
        

        marker_73f553a5803a2e25ebc5ecd66229f9b6.bindPopup(popup_4ad6083a1a0bf0562da77829d20c29af)
        ;

        
    
    
            var marker_9d20307ba180de8532a2d59cb96482e8 = L.marker(
                [-23.56943, -46.627237],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_a8343c84b5ef4de50d5a2b0eedde8d8e = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_9d20307ba180de8532a2d59cb96482e8.setIcon(icon_a8343c84b5ef4de50d5a2b0eedde8d8e);
        
    
        var popup_aa4bd669cd7c158ed192fb2199e9945e = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_3de6e8a736d3e00e878592e43624ab10 = $(`&lt;div id=&quot;html_3de6e8a736d3e00e878592e43624ab10&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 9043972740)&lt;/div&gt;`)[0];
                popup_aa4bd669cd7c158ed192fb2199e9945e.setContent(html_3de6e8a736d3e00e878592e43624ab10);
            
        

        marker_9d20307ba180de8532a2d59cb96482e8.bindPopup(popup_aa4bd669cd7c158ed192fb2199e9945e)
        ;

        
    
    
            var marker_7c0c901c24a8a1b3aa7d4019c25c7406 = L.marker(
                [-23.5681234, -46.6400397],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_6065d083f8233f8e80e2c0bac598a715 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_7c0c901c24a8a1b3aa7d4019c25c7406.setIcon(icon_6065d083f8233f8e80e2c0bac598a715);
        
    
        var popup_76d58cfe60f489058bd993294c985297 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_e2d8c98c4e394697e85c3ff0bfcf8e57 = $(`&lt;div id=&quot;html_e2d8c98c4e394697e85c3ff0bfcf8e57&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 9251692840)&lt;/div&gt;`)[0];
                popup_76d58cfe60f489058bd993294c985297.setContent(html_e2d8c98c4e394697e85c3ff0bfcf8e57);
            
        

        marker_7c0c901c24a8a1b3aa7d4019c25c7406.bindPopup(popup_76d58cfe60f489058bd993294c985297)
        ;

        
    
    
            var marker_35799d91148ff3ecf24491bcf680eb4b = L.marker(
                [-23.5566681, -46.6342173],
                {}
            ).addTo(map_bfd914b98d3a002422f5b93b7ab0c35e);
        
    
            var icon_5a22accd2100b9a9027f196bfe0b87af = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_35799d91148ff3ecf24491bcf680eb4b.setIcon(icon_5a22accd2100b9a9027f196bfe0b87af);
        
    
        var popup_6bb0dc5e3d20522e43c08fbe1f1a706d = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_e97dc4bcb375e89756d64145c8a7c678 = $(`&lt;div id=&quot;html_e97dc4bcb375e89756d64145c8a7c678&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Ponto (&#x27;node&#x27;, 9431675942)&lt;/div&gt;`)[0];
                popup_6bb0dc5e3d20522e43c08fbe1f1a706d.setContent(html_e97dc4bcb375e89756d64145c8a7c678);
            
        

        marker_35799d91148ff3ecf24491bcf680eb4b.bindPopup(popup_6bb0dc5e3d20522e43c08fbe1f1a706d)
        ;

        
    
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
<p>Queremos calcular a rota partindo da parada de ônibus com OSMID 5446623411 até a parada de ônibus com OSMID 8420594618.
Primeiramente filtramos esses dois pontos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrar os pontos de ônibus pelos `osmid` desejados</span>
<span class="n">ponto_origem</span> <span class="o">=</span> <span class="n">pontos_onibus</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">&quot;node&quot;</span><span class="p">,</span> <span class="mi">5446623411</span><span class="p">),</span> <span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
<span class="n">ponto_destino</span> <span class="o">=</span> <span class="n">pontos_onibus</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">&quot;node&quot;</span><span class="p">,</span> <span class="mi">8420594618</span><span class="p">),</span> <span class="s2">&quot;geometry&quot;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ponto origem: </span><span class="si">{</span><span class="n">ponto_origem</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ponto destino: </span><span class="si">{</span><span class="n">ponto_destino</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ponto origem: POINT (-46.6308638 -23.5580706)
Ponto destino: POINT (-46.6342305 -23.5702801)
</pre></div>
</div>
</div>
</div>
<p>Vamos plotar os pontos de origem e de destino em um mapa interativo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar um mapa centralizado no ponto de origem com tile diferente</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.565</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mf">14.7</span><span class="p">,</span>  <span class="n">tiles</span><span class="o">=</span><span class="s2">&quot;CartoDB positron&quot;</span><span class="p">)</span>

<span class="c1"># Adicionar marcador para o ponto de origem</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">ponto_origem</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_origem</span><span class="o">.</span><span class="n">x</span><span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Origem&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Adicionar marcador para o ponto de destino</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">ponto_destino</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_destino</span><span class="o">.</span><span class="n">x</span><span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Destino&quot;</span><span class="p">,</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Exibir o mapa</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_a262ae84e12ae3e90f41529c64ff0427 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_a262ae84e12ae3e90f41529c64ff0427&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_a262ae84e12ae3e90f41529c64ff0427 = L.map(
                &quot;map_a262ae84e12ae3e90f41529c64ff0427&quot;,
                {
                    center: [-23.565, -46.6333],
                    crs: L.CRS.EPSG3857,
                    zoom: 14.7,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_1ae3d1aae443022b2858b9cbc7df621b = L.tileLayer(
                &quot;https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\&quot;https://carto.com/attributions\&quot;\u003eCARTO\u003c/a\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 20, &quot;maxZoom&quot;: 20, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abcd&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_1ae3d1aae443022b2858b9cbc7df621b.addTo(map_a262ae84e12ae3e90f41529c64ff0427);
        
    
            var marker_be6d7a76a2a110650a2b6452fdea3470 = L.marker(
                [-23.5580706, -46.6308638],
                {}
            ).addTo(map_a262ae84e12ae3e90f41529c64ff0427);
        
    
            var icon_9a80f93ecd75946eeca75ebcb9a78e8a = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;green&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_be6d7a76a2a110650a2b6452fdea3470.setIcon(icon_9a80f93ecd75946eeca75ebcb9a78e8a);
        
    
        var popup_68eb6aa894e9a0e7b728528ff271afdf = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_76e7d94f7716fc39b64c8c70e0d31c90 = $(`&lt;div id=&quot;html_76e7d94f7716fc39b64c8c70e0d31c90&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Origem&lt;/div&gt;`)[0];
                popup_68eb6aa894e9a0e7b728528ff271afdf.setContent(html_76e7d94f7716fc39b64c8c70e0d31c90);
            
        

        marker_be6d7a76a2a110650a2b6452fdea3470.bindPopup(popup_68eb6aa894e9a0e7b728528ff271afdf)
        ;

        
    
    
            var marker_40ea6dffe51e36dce235a16171700bdf = L.marker(
                [-23.5702801, -46.6342305],
                {}
            ).addTo(map_a262ae84e12ae3e90f41529c64ff0427);
        
    
            var icon_c9057e5ce929336b4712f183bcf9d7ca = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;red&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_40ea6dffe51e36dce235a16171700bdf.setIcon(icon_c9057e5ce929336b4712f183bcf9d7ca);
        
    
        var popup_1f6c06bd0e55d453f90a23f6a4b28709 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_59dc3a803232e8118319988d5bcebdb8 = $(`&lt;div id=&quot;html_59dc3a803232e8118319988d5bcebdb8&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Destino&lt;/div&gt;`)[0];
                popup_1f6c06bd0e55d453f90a23f6a4b28709.setContent(html_59dc3a803232e8118319988d5bcebdb8);
            
        

        marker_40ea6dffe51e36dce235a16171700bdf.bindPopup(popup_1f6c06bd0e55d453f90a23f6a4b28709)
        ;

        
    
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
<p>Após definir os pontos de origem e de destino, vamos extrair o grafo de ruas para pedestres do bairro da Liberdade:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obter o grafo de ruas para pedestres no bairro da Liberdade</span>
<span class="n">grafo_pedestre</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="s2">&quot;Liberdade, São Paulo, Brazil&quot;</span><span class="p">,</span> <span class="n">network_type</span><span class="o">=</span><span class="s2">&quot;walk&quot;</span><span class="p">)</span>

<span class="c1"># Exibir informações básicas sobre o grafo</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ox</span><span class="o">.</span><span class="n">basic_stats</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">))</span>

<span class="c1"># Visualizar o grafo</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;n&#39;: 676, &#39;m&#39;: 1904, &#39;k_avg&#39;: 5.633136094674557, &#39;edge_length_total&#39;: 136548.10000000027, &#39;edge_length_avg&#39;: 71.71643907563039, &#39;streets_per_node_avg&#39;: 2.937869822485207, &#39;streets_per_node_counts&#39;: {0: 0, 1: 104, 2: 0, 3: 413, 4: 153, 5: 5, 6: 1}, &#39;streets_per_node_proportions&#39;: {0: 0.0, 1: 0.15384615384615385, 2: 0.0, 3: 0.6109467455621301, 4: 0.22633136094674555, 5: 0.0073964497041420114, 6: 0.0014792899408284023}, &#39;intersection_count&#39;: 572, &#39;street_length_total&#39;: 68274.05000000008, &#39;street_segment_count&#39;: 952, &#39;street_length_avg&#39;: 71.71643907563033, &#39;circuity_avg&#39;: 1.0462086952710288, &#39;self_loop_proportion&#39;: 0.004201680672268907}
</pre></div>
</div>
<img alt="_images/58c81e1865526388e9eded144f9932966145d07b85c8b2d43524ef09544d0816.png" src="_images/58c81e1865526388e9eded144f9932966145d07b85c8b2d43524ef09544d0816.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&lt;Figure size 800x800 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div>
</div>
</div>
</div>
<p>A próxima etapa consiste em utilizar as coordenadas dos pontos de ônibus para encontrar os nós mais próximos no grafo de pedestres.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Encontrar os nós mais próximos no grafo de pedestres</span>
<span class="n">no_origem</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">,</span> <span class="n">ponto_origem</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">ponto_origem</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">no_destino</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">nearest_nodes</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">,</span> <span class="n">ponto_destino</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">ponto_destino</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nó origem: </span><span class="si">{</span><span class="n">no_origem</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nó destino: </span><span class="si">{</span><span class="n">no_destino</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Nó origem: 246650792
Nó destino: 296285318
</pre></div>
</div>
</div>
</div>
<p>Por fim, calculamos e plotamos a rota mais curta entre os nós de origem e destino com base no comprimento das arestas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular a rota a pé</span>
<span class="n">rota</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;length&quot;</span><span class="p">)</span>

<span class="c1"># Plotar a rota no grafo</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span>
    <span class="n">grafo_pedestre</span><span class="p">,</span>
    <span class="n">rota</span><span class="p">,</span>
    <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">bgcolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>  <span class="c1"># Cor de fundo</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>  <span class="c1"># Cor das arestas</span>
    <span class="n">route_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>  <span class="c1"># Cor da rota</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c7049af4ac443bae39726a92d0b4eda5d95436280734e8d09ba7bd93b581afe2.png" src="_images/c7049af4ac443bae39726a92d0b4eda5d95436280734e8d09ba7bd93b581afe2.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&lt;Figure size 800x800 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div>
</div>
</div>
</div>
<p>Agora vamos calcular o comprimento total da rota.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comprimento total da rota</span>
<span class="n">comprimento_total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Comprimento total da rota (em metros): </span><span class="si">{</span><span class="n">comprimento_total</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Comprimento total da rota (em metros): 1546.14
</pre></div>
</div>
</div>
</div>
<p>Além disso, consultamos todos os nós que compõem a rota.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exibir os nós da rota</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nós visitados na rota:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rota</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Nós visitados na rota:
[246650792, 10705224095, 2537138042, 8728690615, 10705224090, 176020585, 2537138046, 466919197, 4293818305, 4293818308, 466919092, 466919212, 296284491, 296285245, 7991725207, 4849861793, 7991725199, 296285314, 296285317, 459335418, 296285318]
</pre></div>
</div>
</div>
</div>
<p>Por fim, criamos um mapa interativo para exibir a rota, os nós visitados e os pontos de ônibus:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Criar um mapa centralizado no ponto de origem</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">23.565</span><span class="p">,</span> <span class="o">-</span><span class="mf">46.6333</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mf">14.7</span><span class="p">,</span> <span class="n">tiles</span><span class="o">=</span><span class="s2">&quot;CartoDB positron&quot;</span><span class="p">)</span>

<span class="c1"># Adicionar os nós da rota ao mapa</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
    <span class="c1"># Obter coordenadas dos nós</span>
    <span class="n">coord_origem</span> <span class="o">=</span> <span class="n">grafo_pedestre</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">u</span><span class="p">]</span>
    <span class="n">coord_destino</span> <span class="o">=</span> <span class="n">grafo_pedestre</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>

    <span class="c1"># Adicionar linha entre os nós</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">PolyLine</span><span class="p">(</span>
        <span class="n">locations</span><span class="o">=</span><span class="p">[[</span><span class="n">coord_origem</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">coord_origem</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]],</span> <span class="p">[</span><span class="n">coord_destino</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">coord_destino</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]]],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="n">weight</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Adicionar marcadores para o ponto de origem e destino</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="n">ponto_origem</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_origem</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Origem&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="n">ponto_destino</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ponto_destino</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Destino&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Exibir o mapa</span>
<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_f8b603c854ea351258402bebb92388e8 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_f8b603c854ea351258402bebb92388e8&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_f8b603c854ea351258402bebb92388e8 = L.map(
                &quot;map_f8b603c854ea351258402bebb92388e8&quot;,
                {
                    center: [-23.565, -46.6333],
                    crs: L.CRS.EPSG3857,
                    zoom: 14.7,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_afef891402c8efc6678f55506f2f229c = L.tileLayer(
                &quot;https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\&quot;https://carto.com/attributions\&quot;\u003eCARTO\u003c/a\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 20, &quot;maxZoom&quot;: 20, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abcd&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_afef891402c8efc6678f55506f2f229c.addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_2b6b1652db4e8c5afbe265785065382b = L.polyline(
                [[-23.5581463, -46.6313952], [-23.5597255, -46.6311934]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_2cf542b908b507b82b3c353eeb2e966a = L.polyline(
                [[-23.5597255, -46.6311934], [-23.5597803, -46.6311359]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_ead542ba95b0d040f60943532e134b5a = L.polyline(
                [[-23.5597803, -46.6311359], [-23.5598117, -46.6311518]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_7d94bbf85a350c9156b74a0f95137cbf = L.polyline(
                [[-23.5598117, -46.6311518], [-23.5598664, -46.6311795]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_bed0ca22e359445204d0f2c8bc15b80f = L.polyline(
                [[-23.5598664, -46.6311795], [-23.5599194, -46.6312064]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_cc21c1873107e4f0af4b65e9956063e4 = L.polyline(
                [[-23.5599194, -46.6312064], [-23.5600338, -46.631321]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_1b953dbb27700cb5e14383ff08a7c02d = L.polyline(
                [[-23.5600338, -46.631321], [-23.5601142, -46.6314147]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_713def3b9323dfde34ea574a3f60b91e = L.polyline(
                [[-23.5601142, -46.6314147], [-23.5612289, -46.6315346]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_b4cc91ec2ee16f1ed31669197c32ff98 = L.polyline(
                [[-23.5612289, -46.6315346], [-23.5614502, -46.6315583]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_a8ffca94b9ffa343869f6196fc9e0bf6 = L.polyline(
                [[-23.5614502, -46.6315583], [-23.5633867, -46.6315788]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_70e41fe76bf814574db4db7932367988 = L.polyline(
                [[-23.5633867, -46.6315788], [-23.5641927, -46.6315098]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_33bd555e7396ee6ba0ca574144f93ba4 = L.polyline(
                [[-23.5641927, -46.6315098], [-23.5653412, -46.6313727]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_24210283bcf82a8bdc47dfb1ecc2eb31 = L.polyline(
                [[-23.5653412, -46.6313727], [-23.5659416, -46.6321985]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_0d3a948f8f17263c2a7125034b5a6996 = L.polyline(
                [[-23.5659416, -46.6321985], [-23.567705, -46.6320777]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_8157f2cbbaa28943e21304e8382eaa36 = L.polyline(
                [[-23.567705, -46.6320777], [-23.5678133, -46.632004]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_c7c4d1e06560ad0a8c0907953d9714b8 = L.polyline(
                [[-23.5678133, -46.632004], [-23.5678888, -46.6320891]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_38d662adf22f574a286f8bb195722b45 = L.polyline(
                [[-23.5678888, -46.6320891], [-23.5682871, -46.6317754]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_9eb17665aafe39330192336a066ce6ca = L.polyline(
                [[-23.5682871, -46.6317754], [-23.5689835, -46.6327842]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_34946486754cc2ec64dc7aa38877a2ec = L.polyline(
                [[-23.5689835, -46.6327842], [-23.5696138, -46.6336358]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var poly_line_57a539836f541b2b96413b3b4a186f41 = L.polyline(
                [[-23.5696138, -46.6336358], [-23.5701521, -46.6344212]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;blue&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 1.0, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 5}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var marker_81fc3a7eaeae57b9dd0a5e7f30ef58a9 = L.marker(
                [-23.5580706, -46.6308638],
                {}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var icon_4b59348ef9bbfae7f4b8e07fc2634af9 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;green&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_81fc3a7eaeae57b9dd0a5e7f30ef58a9.setIcon(icon_4b59348ef9bbfae7f4b8e07fc2634af9);
        
    
        var popup_efc307eb79f62616905e87a93500eb29 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_17fb42e8a33af3fccf3bb1335014a5f3 = $(`&lt;div id=&quot;html_17fb42e8a33af3fccf3bb1335014a5f3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Origem&lt;/div&gt;`)[0];
                popup_efc307eb79f62616905e87a93500eb29.setContent(html_17fb42e8a33af3fccf3bb1335014a5f3);
            
        

        marker_81fc3a7eaeae57b9dd0a5e7f30ef58a9.bindPopup(popup_efc307eb79f62616905e87a93500eb29)
        ;

        
    
    
            var marker_1ce5bbb119985a2bb959b2c233008aa6 = L.marker(
                [-23.5702801, -46.6342305],
                {}
            ).addTo(map_f8b603c854ea351258402bebb92388e8);
        
    
            var icon_8230c025c8f80c4b1415649213475733 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;red&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_1ce5bbb119985a2bb959b2c233008aa6.setIcon(icon_8230c025c8f80c4b1415649213475733);
        
    
        var popup_d22c48ce3b063f250189f17b298ac8c6 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_0c9c6192a0850a0e0fcdef09133e4850 = $(`&lt;div id=&quot;html_0c9c6192a0850a0e0fcdef09133e4850&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Destino&lt;/div&gt;`)[0];
                popup_d22c48ce3b063f250189f17b298ac8c6.setContent(html_0c9c6192a0850a0e0fcdef09133e4850);
            
        

        marker_1ce5bbb119985a2bb959b2c233008aa6.bindPopup(popup_d22c48ce3b063f250189f17b298ac8c6)
        ;

        
    
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
<p>Agora vamos calcular a rota com relação ao tempo de viagem. Inicialmente, consultamos os valores únicos de <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obter valores únicos de maxspeed, lidando com listas</span>
<span class="n">valores_unicos_maxspeed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_pedestre</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">maxspeed</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxspeed&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">maxspeed</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="c1"># Se for uma lista, converta para uma tupla para torná-la hashable</span>
        <span class="n">valores_unicos_maxspeed</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">maxspeed</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">valores_unicos_maxspeed</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">maxspeed</span><span class="p">)</span>

<span class="c1"># Exibir os valores únicos</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Valores únicos de maxspeed no grafo de pedestres:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valores_unicos_maxspeed</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Valores únicos de maxspeed no grafo de pedestres:
{(&#39;40&#39;, &#39;50&#39;), &#39;30&#39;, &#39;50&#39;, None, &#39;60&#39;, &#39;10&#39;, &#39;20&#39;, &#39;40&#39;}
</pre></div>
</div>
</div>
</div>
<p>Como é possível verificar, embora tenhamos baixado o grafo para pedestres do OSM, a coluna <code class="docutils literal notranslate"><span class="pre">maxspeed</span></code> continua com os valores de velocidade no contexto dos automóveis.
Para considerar o tempo necessário para caminhar ao invés de usar apenas o comprimento das arestas, é necessário adicionar um novo atributo ao grafo, que chamaremos de <code class="docutils literal notranslate"><span class="pre">tempo_caminhada</span></code>. Esse atributo será calculado com base em uma velocidade média de caminhada e no comprimento de cada aresta. Adotaremos uma velocidade média de caminhada de 5km/h, a qual será convertida em m/s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definir a velocidade média de caminhada (em m/s)</span>
<span class="n">velocidade_caminhada_m_s</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">3600</span>  <span class="c1"># 5 km/h convertido para m/s</span>

<span class="c1"># Adicionar o atributo &#39;tempo_caminhada&#39; às arestas</span>
<span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">grafo_pedestre</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tempo_caminhada&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">velocidade_caminhada_m_s</span>
</pre></div>
</div>
</div>
</div>
<p>Agora, calcularemos a rota mais curta entre dois pontos usando o atributo <code class="docutils literal notranslate"><span class="pre">tempo_caminhada</span></code> como peso:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular a rota mais curta baseada no tempo de caminhada</span>
<span class="n">rota_tempo_caminhada</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">grafo_pedestre</span><span class="p">,</span> <span class="n">no_origem</span><span class="p">,</span> <span class="n">no_destino</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;tempo_caminhada&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Para calcular o tempo total de caminhada:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular o tempo total de caminhada</span>
<span class="n">tempo_total_caminhada</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">grafo_pedestre</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;tempo_caminhada&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rota_tempo_caminhada</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">rota_tempo_caminhada</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>

<span class="c1"># Converter para minutos</span>
<span class="n">tempo_total_caminhada_minutos</span> <span class="o">=</span> <span class="n">tempo_total_caminhada</span> <span class="o">/</span> <span class="mi">60</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tempo total de caminhada: </span><span class="si">{</span><span class="n">tempo_total_caminhada_minutos</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> minutos&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tempo total de caminhada: 18.55 minutos
</pre></div>
</div>
</div>
</div>
<p>Por fim, visualizamos a rota no grafo para verificar o trajeto calculado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ox</span><span class="o">.</span><span class="n">plot_graph_route</span><span class="p">(</span>
    <span class="n">grafo_pedestre</span><span class="p">,</span>
    <span class="n">rota_tempo_caminhada</span><span class="p">,</span>
    <span class="n">route_linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">bgcolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">route_color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1ac1d5bc0e241957425365ed11a4a76d10c094342099eee92b05f09e8967c94e.png" src="_images/1ac1d5bc0e241957425365ed11a4a76d10c094342099eee92b05f09e8967c94e.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&lt;Figure size 800x800 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div>
</div>
</div>
</div>
<p>Como estamos considerando uma velocidade de caminhada uniforme para todas as arestas, o caminho mais curto e o caminho mais rápido coincidem, resultando na mesma rota em ambos os casos.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="capitulo3.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">3. MÉTRICAS E INDICADORES DE REDES</p>
      </div>
    </a>
    <a class="right-next"
       href="capitulo5.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Capítulo 5 - Mapeamento de isócronas para análise de acessibilidade espacial</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#algoritmos-de-roteamento">4.1 Algoritmos de Roteamento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-na-biblioteca-osmnx">4.2 Cálculo de roteamento na biblioteca OSMnx**</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#obtencao-e-analise-preliminar-da-rede-viaria">4.3 Obtenção e análise preliminar da rede viária</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roteamento-basico-por-distancia">4.4 Roteamento básico por distância</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definicao-dos-pontos-para-o-roteamento">4.4.1 Definição dos pontos para o roteamento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#determinacao-do-caminho-minimo">4.4.2 Determinação do caminho mínimo</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roteamento-considerando-velocidade-e-tempo-de-viagem">4.5 Roteamento considerando velocidade e tempo de viagem</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exemplo"><strong>Exemplo</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-a-partir-de-nos-do-grafo-da-rede-viaria">4.6 Cálculo de roteamento a partir de nós do grafo da rede viária</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-roteamento-a-partir-de-pontos-de-interesse">4.7 Calculo de roteamento a partir de pontos de interesse</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alexandro Gularte Schafer
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>